var HaikuDOMAdapter = function () { "use strict"; function e(e) { return e && e.__esModule && Object.prototype.hasOwnProperty.call(e, "default") ? e.default : e } function t(e, t) { return t = { exports: {} }, e(t, t.exports), t.exports } var n = "undefined" != typeof window ? window : "undefined" != typeof global ? global : "undefined" != typeof self ? self : {}, r = t(function (e, t) { function n(e) { return e === o.LIVE } function r(e) { return n(e) } Object.defineProperty(t, "__esModule", { value: !0 }); var o; !function (e) { e.EDIT = 0, e.LIVE = 1 }(o = t.InteractionMode || (t.InteractionMode = {})), t.isPreviewMode = n, t.isLiveMode = r }); e(r); r.InteractionMode, r.isPreviewMode, r.isLiveMode; var o = t(function (e, t) { function o() { return Math.random().toString(36).slice(2) } function i() { for (var e = [], n = 0; n < arguments.length; n++)e[n] = arguments[n]; var r = {}, o = e.slice(); return o.unshift(t.DEFAULTS), o.forEach(function (e) { if (e && "object" == typeof e) for (var t in e) void 0 !== e[t] && (l[t] ? (r[t] || (r[t] = {}), r[t] = a({}, r[t], e[t])) : r[t] = e[t]) }), r.overflow && (r.overflowX || r.overflowY) && (console.warn("[haiku core] `overflow` overrides `overflowY`/`overflowX`"), r.overflowX = null, r.overflowY = null), r } var a = n && n.__assign || function () { return (a = Object.assign || function (e) { for (var t, n = 1, r = arguments.length; n < r; n++) { t = arguments[n]; for (var o in t) Object.prototype.hasOwnProperty.call(t, o) && (e[o] = t[o]) } return e }).apply(this, arguments) }; Object.defineProperty(t, "__esModule", { value: !0 }), t.DEFAULTS = { alwaysComputeSizing: !1, automount: !0, autoplay: !0, children: null, clock: {}, contextMenu: "enabled", eventHandlers: null, folder: null, forceFlush: !1, frame: null, freeze: !1, helpers: null, hooks: null, interactionMode: r.InteractionMode.LIVE, loop: !1, mixpanel: "6f31d4f99cf71024ce27c3e404a79a61", overflow: null, overflowX: null, overflowY: null, placeholder: null, position: "relative", preserve3d: "auto", seed: null, sizing: null, states: null, timelines: null, timestamp: null, vanities: null }; var s = { alwaysComputeSizing: !0, clock: !0, contextMenu: !0, folder: !0, freeze: !0, interactionMode: !0, mixpanel: !0, overflow: !0, overflowX: !0, overflowY: !0, preserve3d: !0, seed: !0, sizing: !0, timestamp: !0 }, u = function (e) { var t = {}; for (var n in e) s[n] && (t[n] = e[n]); return t }, l = { states: !0, eventHandlers: !0, timelines: !0, helpers: !0, vanities: !0, initialStates: !0 }; t.default = { build: i, seed: o, DEFAULTS: t.DEFAULTS, buildChildSafeConfig: u } }); e(o); o.DEFAULTS; var i = t(function (e, t) { Object.defineProperty(t, "__esModule", { value: !0 }), t.tokenize = function (e, t) { for (var n = [], r = e, o = r.length, i = 0; r.length > 0;) { for (var a = 0; a < t.length; a++) { var s = t[a], u = s.re.exec(r); if (u) { var l = u[0]; n.push({ value: l, type: s.type }), r = r.slice(u[0].length, r.length); break } } if (i++ > o) throw new Error("Unable to tokenize expression " + e) } return n }; var n = [{ type: "whitespace", re: /^[\s]+/ }, { type: "paren_open", re: /^\(/ }, { type: "paren_close", re: /^\)/ }, { type: "square_open", re: /^\[/ }, { type: "square_close", re: /^]/ }, { type: "curly_open", re: /^\{/ }, { type: "curly_close", re: /^\}/ }, { type: "rest", re: /^\.\.\./ }, { type: "colon", re: /^:/ }, { type: "comma", re: /^,/ }, { type: "identifier", re: /^[a-zA-Z0-9_$]+/ }]; t.tokenizeParameters = function (e) { return t.tokenize(e, n) }; var r = "~!@#$%^&*-_=+/|:'<,>.?".split("").join("\\"), o = [{ type: "whitespace", re: /^[\s]+/ }, { type: "paren_open", re: /^\(/ }, { type: "paren_close", re: /^\)/ }, { type: "number", re: /^0b[01]+|^0o[0-7]+|^0x[\da-f]+|^\d*\.?\d+(?:e[+-]?\d+)?/i }, { type: "symbol", re: new RegExp("^([$" + r + "][$" + r + "]*)([^\\n\\S]*:(?!:))?") }, { type: "identifier", re: new RegExp("^([$A-Za-z_\\x7f-\\uffff][$\\w\\x7f-\\uffff]*)([^\\n\\S]*:(?!:))?") }]; t.tokenizeDirective = function (e) { var n = t.tokenize(e, o).filter(function (e) { return "whitespace" !== e.type }); return n.forEach(function (e) { "number" === e.type && (e.value = Number(e.value)) }), n }, t.isNumeric = function (e) { return !isNaN(parseFloat(e)) && isFinite(e) } }); e(i); i.tokenize, i.tokenizeParameters, i.tokenizeDirective, i.isNumeric; var a = t(function (e, t) { function n(e, t, n) { var r = { value: null, type: "void" }; if (n.length < 1 || e > n.length) return r; for (var o = 0, i = 0; i < n.length; i++)if (n[i].type === t && (o += 1), o === e) return n[i]; return r } function r(e) { if (e.length < 1) return []; for (var t, n = "", r = "", o = e.shift(), i = []; o;) { switch (o.type) { case "whitespace": r = " "; break; case "comma": r = ","; break; case "colon": r = ":"; break; case "paren_open": r = "[", i.push("square"); break; case "paren_close": r = "]", i.pop(); break; case "square_open": r = "[", i.push("square"); break; case "square_close": r = "]", i.pop(); break; case "curly_open": r = "{", i.push("curly"); break; case "curly_close": r = "}", i.pop(); break; case "rest": t = e.shift(), r = JSON.stringify({ __rest: t.value }); break; case "identifier": r = '"' + o.value + '"', !e[0] || "comma" !== e[0].type && "square_close" !== e[0].type && "curly_close" !== e[0].type || (r += "square" === i[i.length - 1] ? "" : ':"' + o.value + '"'); break; default: r = "" }n += r, o = e.shift() } return JSON.parse(n) } function o(e) { for (var t = i.tokenizeParameters(e), n = [], o = 0; o < t.length; o++)"whitespace" !== t[o].type && n.push(t[o]); try { return r(n) } catch (t) { return console.warn("Unable to parse signature " + e, t), [] } } function a(e) { var t = e.toString(); ")" === t[t.length - 1] && "(" === t[0] && (t = t.slice(1)); var r = t.indexOf("("), a = t.indexOf(")"), s = t.slice(0, r), u = t.slice(r, a + 1), l = t.slice(a + 1, t.length), c = l.slice(l.indexOf("{") + 1, l.length - 1).trim(), f = { type: l.match(/^\s*=>\s*{/) ? "ArrowFunctionExpression" : "FunctionExpression", name: n(2, "identifier", i.tokenizeParameters(s)).value, params: o(u), body: c }; return e.injectee && (f.injectee = !0), { __function: f } } Object.defineProperty(t, "__esModule", { value: !0 }), t.default = a }); e(a); var s = t(function (e, t) { function n(e, t) { if (!e.specification) { var n = a.default(e); n && n.__function ? (e.specification = n.__function, t && (e.specification.params = t)) : e.specification = !0 } } Object.defineProperty(t, "__esModule", { value: !0 }), t.default = n }); e(s); var u = t(function (e, t) { function n() { for (var e = [], t = 0; t < arguments.length; t++)e[t] = arguments[t]; var n = e.shift(); return "function" != typeof n ? (console.warn("[haiku core] Inject expects a function as the first argument"), n) : (e.length > 0 ? s.default(n, e) : s.default(n, null), n.injectee = !0, n) } Object.defineProperty(t, "__esModule", { value: !0 }), t.default = n }); e(u); var l = "Haiku Core is a JavaScript library for building user interfaces", c = "https://www.haikuforteams.com", f = { lib: "lib", dom: "dom", components: "components", dist: "dist" }, p = ["animation", "motion", "component", "web", "browser", "svg", "rendering", "engine"], h = "https://github.com/HaikuTeam/core", d = { lint: "tslint --exclude 'src/vendor/**' -p tsconfig.all.json -t stylish", "lint-report": "yarn lint -t checkstyle -o checkstyle-result.xml", fix: "yarn lint --fix", ts: "cross-env NODE_ENV=test ts-node -r tsconfig-paths/register -P tsconfig.all.json", test: "yarn ts ./node_modules/.bin/tape 'test/**/*.test.ts' | tap-spec", "test-report": "nyc yarn ts ./node_modules/.bin/tape 'test/**/*.test.ts' > test-result.tap", compile: "tsc", develop: "tsc --watch", bundle: "yarn compile && yarn ts ./scripts/bundle.ts", demos: "yarn ts ./scripts/demos.ts" }, y = ["Matthew Trost <matthew@haiku.ai>", "Zack Brown <zack@haiku.ai>", "Taylor Poe <taylor@haiku.ai>", "Sasha Joseph <sasha@haiku.ai>"], m = { "@angular/core": "^6.0.9", async: "^2.5.0", chokidar: "^1.7.0", "cross-env": "^5.1.6", depcheck: "^0.6.7", express: "4.14.1", filesize: "3.5.10", "fs-extra": "^4.0.2", "haiku-testing": "5.0.0", handlebars: "^4.0.8", "istanbul-reporter-cobertura-haiku": "^1.0.2", jsdom: "^11.1.0", "leaked-handles": "^5.2.0", nodemon: "1.11.0", nyc: "^13.0.1", opn: "^5.3.0", react: "^16.0.0", "react-dom": "^16.0.0", "react-router-dom": "^4.1.1", rollup: "^0.53.3", "rollup-plugin-commonjs": "^8.2.6", "rollup-plugin-json": "^2.3.0", "rollup-plugin-node-resolve": "^3.0.0", "rollup-plugin-uglify-es": "^0.0.1", rxjs: "^6.3.3", "tap-spec": "^4.1.2", tape: "^4.9.0", "ts-loader": "^4.4.2", "ts-node": "^6.1.0", "tsconfig-paths": "^3.3.2", tslint: "^5.11.0", "tslint-config-haiku": "^1.0.16", "tslint-no-circular-imports": "^0.5.0", typescript: "^3.0.3", webpack: "^4.16.0", "webpack-cli": "^3.0.8" }, g = { "@angular/core": "^6.0.9", react: "^16.0.0 || ^15.4.2", "react-dom": "^16.0.0 || ^15.4.2" }, v = { name: "@haiku/core", version: "5.0.0", description: l, homepage: c, directories: f, keywords: p, repository: h, main: "index.js", scripts: d, authors: y, license: "MIT", devDependencies: m, peerDependencies: g }, b = Object.freeze({ name: "@haiku/core", version: "5.0.0", description: l, homepage: c, directories: f, keywords: p, repository: h, main: "index.js", scripts: d, authors: y, license: "MIT", devDependencies: m, peerDependencies: g, default: v }), _ = b && v || b, x = t(function (e, t) { Object.defineProperty(t, "__esModule", { value: !0 }); var r = _.version, o = function () { var e = {}; return "undefined" != typeof window ? e = window : void 0 !== n && (e = n), e.haiku || (e.haiku = {}), e.haiku[r] || (e.haiku[r] = {}), e.haiku[r].models || (e.haiku[r].models = {}), e.haiku[r].idCounter || (e.haiku[r].idCounter = 1e3), e.haiku[r].enhance || (e.haiku[r].enhance = s.default), e.haiku[r].inject || (e.haiku[r].inject = u.default), e.haiku[r] }(); t.default = o }); e(x); var O = t(function (e, t) { Object.defineProperty(t, "__esModule", { value: !0 }), t.GLOBAL_LISTENER_KEY = "*", t.GENERIC_EVENT_KEY = "event"; var n = function (e) { return e.charAt(0).toUpperCase() + e.slice(1) }, r = function (e) { return e.replace(/\W+/g, " ").replace(/(?:^\w|[A-Z]|\b\w)/g, function (e, t) { return 0 === t ? e.toLowerCase() : e.toUpperCase() }).replace(/\s+/g, "") }, o = function (e) { return x.default.models[e] || (x.default.models[e] = []), x.default.models[e] }, i = function (e) { var t = e.getClassName(); return o(t) }, a = function (e) { return i(e).push(e), ++x.default.idCounter }, s = function (e) { for (var t = i(e), n = 0; n < t.length; n++)if (t[n] === e) return void t.splice(n, 1) }, u = function () { function e() { this.cache = {}, this.$id = a(this), this.listeners = {} } return e.prototype.getId = function () { return this.$id }, e.prototype.getPrimaryKey = function () { return this.getClassName() + ":" + this.getId() }, e.prototype.getClassName = function () { return this.constructor.__name__ }, e.prototype.cacheSet = function (e, t) { this.cache[e] = t }, e.prototype.cacheGet = function (e) { return this.cache[e] }, e.prototype.cacheFetch = function (e, t) { var n = this.cacheGet(e); if (void 0 !== n) return n; var r = t(); return this.cacheSet(e, r), r }, e.prototype.cacheUnset = function (e) { this.cache[e] = void 0 }, e.prototype.cacheClear = function () { this.cache = {} }, e.prototype.subcacheGet = function (e) { return this.cacheGet(e) }, e.prototype.subcacheEnsure = function (e) { this.cacheGet(e) || this.cacheSet(e, {}) }, e.prototype.subcacheClear = function (e) { this.cacheSet(e, {}) }, e.prototype.on = function (e, t) { this.listeners[e] || (this.listeners[e] = []), this.listeners[e].push(t) }, e.prototype.addEventListener = function (e, t) { this.on(e, t) }, e.prototype.off = function (e, t) { if (this.listeners[e]) for (var n = this.listeners[e].length - 1; n >= 0; n--)this.listeners[e][n] === t && this.listeners[e].splice(n, 1) }, e.prototype.removeEventListener = function (e, t) { this.off(e, t) }, e.prototype.removeListener = function (e, t) { this.off(e, t) }, e.prototype.emitToListeners = function (e, t) { if (this.listeners[e]) for (var n = 0; n < this.listeners[e].length; n++)this.listeners[e][n].apply(null, t) }, e.prototype.emitToGenericListeners = function (e, n) { if (this.listeners[t.GLOBAL_LISTENER_KEY]) for (var r = 0; r < this.listeners[t.GLOBAL_LISTENER_KEY].length; r++)this.listeners[t.GLOBAL_LISTENER_KEY][r].apply(null, [e].concat(n)) }, e.prototype.emitToAncestors = function (e) { for (var t = [], n = 1; n < arguments.length; n++)t[n - 1] = arguments[n] }, e.prototype.emit = function (e) { for (var n = [], r = 1; r < arguments.length; r++)n[r - 1] = arguments[r]; this.emitToListeners(e, n), this.emitToConfigHandlers(e, n), this.emitToGenericListeners(e, n), this.emitToAncestors.apply(this, [e].concat(n)); var o = [e].concat(n); this.emitToConfigHandlers(t.GENERIC_EVENT_KEY, o) }, e.prototype.emitToConfigHandlers = function (e, t) { if (this.config) { var o = n(r(e)), i = "on" + o; "function" == typeof this.config[i] && this.config[i].apply(null, t); var a = "onHaiku" + o; "function" == typeof this.config[a] && this.config[a].apply(null, t) } }, e.prototype.matchesCriteria = function (e) { if (!e) return !1; var t = !0; for (var n in e) this[n] !== e[n] && (t = !1); return t }, e.prototype.destroy = function () { s(this) }, e.getRegistryForClass = function (e) { return o(e.__name__) }, e }(); t.default = u }); e(O); O.GLOBAL_LISTENER_KEY, O.GENERIC_EVENT_KEY; var k = t(function (e, t) { function n() { for (var e = [], t = 0; t < arguments.length; t++)e[t] = arguments[t]; for (var n = e[0], r = void 0, o = 1, i = e.length; o < i; o++) { r = e[o]; for (var a in r) Object.prototype.hasOwnProperty.call(r, a) && (n[a] = r[a]) } return n } Object.defineProperty(t, "__esModule", { value: !0 }), t.default = n }); e(k); var w = t(function (e, t) { function n() { return a() } Object.defineProperty(t, "__esModule", { value: !0 }); var r, o, i, a; "undefined" != typeof performance && null !== performance && performance.now ? a = function () { return performance.now() } : "undefined" != typeof process && null !== process && process.hrtime ? (a = function () { return (r() - i) / 1e6 }, o = process.hrtime, i = (r = function () { var e; return 1e9 * (e = o())[0] + e[1] })()) : Date.now ? (a = function () { return Date.now() - i }, i = Date.now()) : (a = function () { return (new Date).getTime() - i }, i = (new Date).getTime()), t.default = n }); e(w); var z = t(function (e, t) { function r(e) { return i.call(s, e) } function o() { for (var e = [], t = 0; t < arguments.length; t++)e[t] = arguments[t]; return a.apply(s, e) } Object.defineProperty(t, "__esModule", { value: !0 }); var i, a, s = "undefined" == typeof window ? n : window, u = ["moz", "webkit"], l = "AnimationFrame"; if ("undefined" != typeof window) { i = window["request" + l], a = window["cancel" + l] || window["cancelRequest" + l]; for (var c = 0; !i && c < u.length; c++)i = window[u[c] + "Request" + l], a = window[u[c] + "Cancel" + l] || window[u[c] + "CancelRequest" + l]; if (!i || !a) { var f = 0, p = 0, h = []; i = function (e) { if (0 === h.length) { var t = w.default(), n = Math.max(0, 1e3 / 60 - (t - f)); f = n + t, setTimeout(function () { var e = h.slice(0); h.length = 0; for (var t = 0; t < e.length; t++)if (!e[t].cancelled) try { e[t].callback(f) } catch (e) { setTimeout(function () { throw e }, 0) } }, Math.round(n)) } return h.push({ handle: ++p, callback: e, cancelled: !1 }), p }, a = function (e) { for (var t = 0; t < h.length; t++)h[t].handle === e && (h[t].cancelled = !0) } } } else i = a = function () { }; t.default = { request: r, cancel: o } }); e(z); var P = t(function (e, t) { var r = n && n.__extends || function () { var e = function (t, n) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]) })(t, n) }; return function (t, n) { function r() { this.constructor = t } e(t, n), t.prototype = null === n ? Object.create(n) : (r.prototype = n.prototype, new r) } }(); Object.defineProperty(t, "__esModule", { value: !0 }); var o = { frameDuration: 16.666, frameDelay: 16.666, marginOfErrorForDelta: 1, run: !0 }; if (!x.default.HaikuGlobalAnimationHarness) { var i = [], a = function () { for (var e = i.length, t = 0; t < e; t++)i[t](); x.default.HaikuGlobalAnimationHarness.raf = z.default.request(a) }; x.default.HaikuGlobalAnimationHarness = { queue: i, frame: a, cancel: function () { x.default.HaikuGlobalAnimationHarness.raf && z.default.cancel(x.default.HaikuGlobalAnimationHarness.raf) } }, x.default.HaikuGlobalAnimationHarness.frame() } var s = function (e) { function t(t, n) { var r = e.call(this) || this; return r.boundRunner = function () { r.run() }, r._tickables = t, r.assignOptions(n), r._isRunning = !1, r.reinitialize(), r.options.run && x.default.HaikuGlobalAnimationHarness.queue.push(r.boundRunner), r.GLOBAL_ANIMATION_HARNESS = x.default.HaikuGlobalAnimationHarness, r } return r(t, e), t.prototype.reinitialize = function () { return this._numLoopsRun = 0, this._localFramesElapsed = 0, this._localTimeElapsed = 0, this._deltaSinceLastTick = 0, this._localExplicitlySetTime = null, this }, t.prototype.addTickable = function (e) { return this._tickables.push(e), this }, t.prototype.assignOptions = function (e) { return this.options = k.default(this.options || {}, o, e || {}), this }, t.prototype.run = function () { if (this.isRunning()) if (this.isTimeControlled()) this.tick(); else { this._numLoopsRun++; var e = this._localTimeElapsed, t = e + this.options.frameDuration, n = t - e + this._deltaSinceLastTick; n >= this.options.frameDelay - this.options.marginOfErrorForDelta ? (this.tick(), this._localFramesElapsed++ , this._localTimeElapsed = t, this._deltaSinceLastTick = 0) : this._deltaSinceLastTick = n } }, t.prototype.tick = function () { for (var e = 0; e < this._tickables.length; e++)this._tickables[e].performTick() }, t.prototype.getTime = function () { return this.getExplicitTime() }, t.prototype.setTime = function (e) { return this._localExplicitlySetTime = parseInt(e || 0, 10), this }, t.prototype.getFPS = function () { return Math.round(1e3 / this.options.frameDuration) }, t.prototype.getExplicitTime = function () { return this.isTimeControlled() ? this.getControlledTime() : this.getRunningTime() }, t.prototype.getControlledTime = function () { return this._localExplicitlySetTime }, t.prototype.isTimeControlled = function () { return "number" == typeof this._localExplicitlySetTime }, t.prototype.getRunningTime = function () { return this._localTimeElapsed }, t.prototype.isRunning = function () { return this._isRunning }, t.prototype.start = function () { return this._isRunning = !0, this }, t.prototype.stop = function () { return this._isRunning = !1, this }, t.prototype.getFrameDuration = function () { return this.options.frameDuration }, t.prototype.destroy = function () { e.prototype.destroy.call(this); for (var t = 0; t < x.default.HaikuGlobalAnimationHarness.queue.length; t++)if (x.default.HaikuGlobalAnimationHarness.queue[t] === this.boundRunner) return void x.default.HaikuGlobalAnimationHarness.queue.splice(t, 1) }, Object.defineProperty(t.prototype, "frameDuration", { get: function () { return this.options.frameDuration }, enumerable: !0, configurable: !0 }), Object.defineProperty(t.prototype, "frameDelay", { get: function () { return this.options.frameDelay }, enumerable: !0, configurable: !0 }), Object.defineProperty(t.prototype, "time", { get: function () { return this.getExplicitTime() }, enumerable: !0, configurable: !0 }), t.__name__ = "HaikuClock", t }(O.default); t.default = s }); e(P); var T = t(function (e, t) { Object.defineProperty(t, "__esModule", { value: !0 }); !function (e) { e.EaseInBack = "easeInBack", e.EaseInCirc = "easeInCirc", e.EaseInCubic = "easeInCubic", e.EaseInExpo = "easeInExpo", e.EaseInQuad = "easeInQuad", e.EaseInQuart = "easeInQuart", e.EaseInBounce = "easeInBounce", e.EaseInElastic = "easeInElastic", e.EaseInQuint = "easeInQuint", e.EaseInSine = "easeInSine", e.EaseOutBack = "easeOutBack", e.EaseOutCirc = "easeOutCirc", e.EaseOutCubic = "easeOutCubic", e.EaseOutExpo = "easeOutExpo", e.EaseOutQuad = "easeOutQuad", e.EaseOutQuart = "easeOutQuart", e.EaseOutBounce = "easeOutBounce", e.EaseOutElastic = "easeOutElastic", e.EaseOutQuint = "easeOutQuint", e.EaseOutSine = "easeOutSine", e.EaseInOutBack = "easeInOutBack", e.EaseInOutCirc = "easeInOutCirc", e.EaseInOutCubic = "easeInOutCubic", e.EaseInOutExpo = "easeInOutExpo", e.EaseInOutQuad = "easeInOutQuad", e.EaseInOutQuart = "easeInOutQuart", e.EaseInOutBounce = "easeInOutBounce", e.EaseInOutElastic = "easeInOutElastic", e.EaseInOutQuint = "easeInOutQuint", e.EaseInOutSine = "easeInOutSine", e.Linear = "linear" }(t.Curve || (t.Curve = {})) }); e(T); T.Curve; var E = t(function (e, t) { var r = n && n.__assign || function () { return (r = Object.assign || function (e) { for (var t, n = 1, r = arguments.length; n < r; n++) { t = arguments[n]; for (var o in t) Object.prototype.hasOwnProperty.call(t, o) && (e[o] = t[o]) } return e }).apply(this, arguments) }; Object.defineProperty(t, "__esModule", { value: !0 }); var o = { circle: !0, ellipse: !0, foreignObject: !0, g: !0, image: !0, line: !0, mesh: !0, path: !0, polygon: !0, polyline: !0, rect: !0, switch: !0, symbol: !0, text: !0, textPath: !0, tspan: !0, unknown: !0, use: !0 }; t.AUTO_SIZING_TOKEN = "auto", t.SIZE_PROPORTIONAL = 0, t.SIZE_ABSOLUTE = 1; var i = [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1], a = { THREE: 3, TWO: 2 }, s = function (e) { return "string" != typeof e.elementName || "svg" === e.elementName || "div" === e.elementName }, u = function (e, t) { if (e && "object" == typeof e) return e.attributes || (e.attributes = {}), e.attributes.style || (e.attributes.style = {}), e.isRootNode = t, e }, l = function (e) { e.layout = g(!e.isRootNode && s(e)), e.layout.matrix = c(), e.layout.format = o[e.elementName] ? a.TWO : a.THREE }, c = function () { return f(i) }, f = function (e) { return e.slice() }, p = function (e, t) { return [e[0] * t[0] + e[1] * t[4] + e[2] * t[8] + e[3] * t[12], e[0] * t[1] + e[1] * t[5] + e[2] * t[9] + e[3] * t[13], e[0] * t[2] + e[1] * t[6] + e[2] * t[10] + e[3] * t[14], e[0] * t[3] + e[1] * t[7] + e[2] * t[11] + e[3] * t[15], e[4] * t[0] + e[5] * t[4] + e[6] * t[8] + e[7] * t[12], e[4] * t[1] + e[5] * t[5] + e[6] * t[9] + e[7] * t[13], e[4] * t[2] + e[5] * t[6] + e[6] * t[10] + e[7] * t[14], e[4] * t[3] + e[5] * t[7] + e[6] * t[11] + e[7] * t[15], e[8] * t[0] + e[9] * t[4] + e[10] * t[8] + e[11] * t[12], e[8] * t[1] + e[9] * t[5] + e[10] * t[9] + e[11] * t[13], e[8] * t[2] + e[9] * t[6] + e[10] * t[10] + e[11] * t[14], e[8] * t[3] + e[9] * t[7] + e[10] * t[11] + e[11] * t[15], e[12] * t[0] + e[13] * t[4] + e[14] * t[8] + e[15] * t[12], e[12] * t[1] + e[13] * t[5] + e[14] * t[9] + e[15] * t[13], e[12] * t[2] + e[13] * t[6] + e[14] * t[10] + e[15] * t[14], e[12] * t[3] + e[13] * t[7] + e[14] * t[11] + e[15] * t[15]] }, h = function (e) { for (var t = c(), n = 0; n < e.length; n++)t = p(t, e[n]); return t }, d = function (e, t) { var n = r({}, g(), { rotation: e, shear: t }); return v(n, { x: 0, y: 0, z: 0 }) }, y = function (e, t, n) { var o = r({}, g(), { rotation: e, scale: t, shear: n }); return v(o, { x: 0, y: 0, z: 0 }) }, m = function (e) { if (!e) return e; var t = { shown: e.shown, opacity: e.opacity, mount: Object.assign({}, e.mount), offset: Object.assign({}, e.offset), origin: Object.assign({}, e.origin), translation: Object.assign({}, e.translation), rotation: Object.assign({}, e.rotation), scale: Object.assign({}, e.scale), shear: Object.assign({}, e.shear), sizeMode: Object.assign({}, e.sizeMode), sizeProportional: Object.assign({}, e.sizeProportional), sizeDifferential: Object.assign({}, e.sizeDifferential), sizeAbsolute: Object.assign({}, e.sizeAbsolute), size: null, matrix: null, computed: null }; return e.computed && (t.computed = m(e.computed)), e.matrix && (t.matrix = e.matrix.map(function (e) { return e })), e.size && (t.size = Object.assign({}, e.size)), t }, g = function (e) { return { shown: !0, opacity: 1, offset: { x: 0, y: 0, z: 0 }, origin: e ? { x: .5, y: .5, z: .5 } : { x: 0, y: 0, z: 0 }, translation: { x: 0, y: 0, z: 0 }, rotation: { x: 0, y: 0, z: 0 }, scale: { x: 1, y: 1, z: 1 }, shear: { xy: 0, xz: 0, yz: 0 }, sizeMode: { x: t.SIZE_PROPORTIONAL, y: t.SIZE_PROPORTIONAL, z: t.SIZE_PROPORTIONAL }, sizeProportional: { x: 1, y: 1, z: 1 }, sizeDifferential: { x: 0, y: 0, z: 0 }, sizeAbsolute: { x: 0, y: 0, z: 0 } } }, v = function (e, t) { var n = e.origin.x * t.x, r = e.origin.y * t.y, o = e.origin.z * t.z, i = c(); if (e.rotation.x || e.rotation.y || e.rotation.z) { var a = Math.sin(e.rotation.x), s = Math.sin(e.rotation.y), u = Math.sin(e.rotation.z), l = Math.cos(e.rotation.x), f = Math.cos(e.rotation.y), p = Math.cos(e.rotation.z), h = l * p, d = l * u, y = a * p, m = a * u; i[0] = f * p, i[4] = s * y - d, i[8] = s * h + m, i[1] = f * u, i[5] = s * m + h, i[9] = s * d - y, i[2] = -s, i[6] = f * a, i[10] = f * l } if (e.shear.xy || e.shear.xz || e.shear.yz) { var g = e.shear.xy * e.shear.yz + e.shear.xz; i[8] += e.shear.yz * i[4] + g * i[0], i[9] += e.shear.yz * i[5] + g * i[1], i[10] += e.shear.yz * i[6] + g * i[2], i[4] += e.shear.xy * i[0], i[5] += e.shear.xy * i[1], i[6] += e.shear.xy * i[2] } return 1 !== e.scale.x && (i[0] *= e.scale.x, i[1] *= e.scale.x, i[2] *= e.scale.x), 1 !== e.scale.y && (i[4] *= e.scale.y, i[5] *= e.scale.y, i[6] *= e.scale.y), 1 !== e.scale.z && (i[8] *= e.scale.z, i[9] *= e.scale.z, i[10] *= e.scale.z), i[12] = e.offset.x + e.translation.x - (i[0] * n + i[4] * r + i[8] * o), i[13] = e.offset.y + e.translation.y - (i[1] * n + i[5] * r + i[9] * o), i[14] = e.offset.z + e.translation.z - (i[2] * n + i[6] * r + i[10] * o), i }; t.default = { multiplyArrayOfMatrices: h, clone: m, computeMatrix: v, computeOrthonormalBasisMatrix: d, computeScaledBasisMatrix: y, createLayoutSpec: g, createMatrix: c, copyMatrix: f, initializeNodeAttributes: u, initializeNodeLayout: l, virtualElementIsLayoutContainer: s, FORMATS: a, SIZE_ABSOLUTE: t.SIZE_ABSOLUTE, SIZE_PROPORTIONAL: t.SIZE_PROPORTIONAL } }); e(E); E.AUTO_SIZING_TOKEN, E.SIZE_PROPORTIONAL, E.SIZE_ABSOLUTE; var C = t(function (e, t) { function n(e) { for (var t = e.length, n = -1; n++ < t;)for (var r = n + 1; r < e.length; ++r)e[n] === e[r] && e.splice(r--, 1); return e } function r(e) { for (var t = e.length, r = new Array(t), o = 0; o < t; o++)r[o] = e[o]; return n(r) } Object.defineProperty(t, "__esModule", { value: !0 }), t.default = { uniq: n, immutable: r } }); e(C); var M = t(function (e, t) { var r = n && n.__assign || function () { return (r = Object.assign || function (e) { for (var t, n = 1, r = arguments.length; n < r; n++) { t = arguments[n]; for (var o in t) Object.prototype.hasOwnProperty.call(t, o) && (e[o] = t[o]) } return e }).apply(this, arguments) }; Object.defineProperty(t, "__esModule", { value: !0 }); var o = C.default.uniq, i = /\[([a-zA-Z0-9]+)([$|^~])?(=)?"?(.+?)?"?( i)?]/, a = function (e) { if (e.name) return e.name; var t = e.toString(), n = /function ([^(]*)/.exec(t); return n && n[1] }; t.parseAttrSelector = function (e) { var t = i.exec(e); return t ? { key: t[1], operator: t[3] && (t[2] || "") + t[3], value: t[4], insensitive: !!t[5] } : null }, t.cssMatchByAttribute = function (e, t, n, r, o) { var i = e[o.attributes]; if (i) { var a = i[t]; if (!n) return !!a; switch (n) { case "=": return r === a; default: return console.warn("Operator `" + n + "` not supported yet"), !1 } } }, t.cssMatchByClass = function (e, t, n) { var r = e[n.attributes]; if (r) { var o = r.class; if (o || (o = r.className), o && -1 !== o.split(" ").indexOf(t)) return !0 } }, t.cssMatchByHaiku = function (e, t, n) { var r = e[n.attributes]; return !!r && (!!r["haiku-id"] && r["haiku-id"] === t) }, t.cssMatchById = function (e, t, n) { var r = e[n.attributes]; if (r && r.id === t) return !0 }, t.cssMatchByTagName = function (e, t, n) { var r = e[n.name]; if (r) { if ("string" == typeof r && r === t) return !0; if ("function" == typeof r && a(r) === t) return !0; if ("object" == typeof r && (r.name === t || r.tagName === t)) return !0 } }, t.cssMatchOne = function (e, n, r) { if ("haiku:" === n.slice(0, 6)) return t.cssMatchByHaiku(e, n.slice(6), r); if ("#" === n[0]) return t.cssMatchById(e, n.slice(1, n.length), r); if ("." === n[0]) return t.cssMatchByClass(e, n.slice(1, n.length), r); if ("[" === n[0]) { var o = t.parseAttrSelector(n); return !!o && t.cssMatchByAttribute(e, o.key, o.operator, o.value, r) } return t.cssMatchByTagName(e, n, r) }, t.cssQueryList = function (e, n, r) { for (var o = [], i = n.split(","), a = 0; a < i.length; a++)for (var s = i[a].trim(), u = 0; u < e.length; u++) { var l = e[u]; t.cssMatchOne(l, s, r) && o.push(l) } return o }, t.cssQueryTree = function (e, n, r) { return e && "object" == typeof e ? t.cssQueryList(t.manaFlattenTree(e, r), n, r) : [] }, t.manaFlattenTree = function (e, n, r, i, a, s) { if (void 0 === r && (r = !0), void 0 === i && (i = []), void 0 === a && (a = 0), void 0 === s && (s = 0), i.push(e), a < 1 || "string" == typeof e[n.name]) { var u = e[n.children]; if (!u || "string" == typeof u) return i; if (Array.isArray(u)) { var l = u.slice(0); o(l); for (var c = 0; c < l.length; c++)t.manaFlattenTree(l[c], n, !1, i, a + 1, c) } else if ("object" == typeof u) return i.push(u), i } return r ? o(i) : i }, t.visitManaTree = function (e, n, r, o, i) { if (!n || "string" == typeof n) return null; if (r(n.elementName, n.attributes, n.children, n, e, o, i), !n.children) return null; for (var a = 0; a < n.children.length; a++) { var s = n.children[a]; t.visitManaTree(e + "." + a, s, r, n, a) } }, t.visit = function (e, n, r) { if (e && "object" == typeof e) { n(e, r); var o = e.__memory && e.__memory.children || e.children; if (o) for (var i = 0; i < o.length; i++) { var a = o[i]; a && a.__memory && a.__memory.instance || t.visit(a, n, e) } } }, t.ascend = function (e, n) { e && "object" == typeof e && (n(e), e.__memory && !e.__memory.instance && e.__memory.parent && t.ascend(e.__memory.parent, n)) }, t.cloneNodeShallow = function (e) { return e ? r({}, e, { attributes: t.cloneAttributes(e.attributes), layout: E.default.clone(e.layout) }) : e }, t.cloneAttributes = function (e) { if (!e) return e; var t = r({}, e); return e.style && (t.style = Object.assign({}, e.style)), t } }); e(M); M.parseAttrSelector, M.cssMatchByAttribute, M.cssMatchByClass, M.cssMatchByHaiku, M.cssMatchById, M.cssMatchByTagName, M.cssMatchOne, M.cssQueryList, M.cssQueryTree, M.manaFlattenTree, M.visitManaTree, M.visit, M.ascend, M.cloneNodeShallow, M.cloneAttributes; var S = t(function (e, t) { var r = n && n.__extends || function () { var e = function (t, n) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]) })(t, n) }; return function (t, n) { function r() { this.constructor = t } e(t, n), t.prototype = null === n ? Object.create(n) : (r.prototype = n.prototype, new r) } }(), o = n && n.__assign || function () { return (o = Object.assign || function (e) { for (var t, n = 1, r = arguments.length; n < r; n++) { t = arguments[n]; for (var o in t) Object.prototype.hasOwnProperty.call(t, o) && (e[o] = t[o]) } return e }).apply(this, arguments) }; Object.defineProperty(t, "__esModule", { value: !0 }), t.HAIKU_ID_ATTRIBUTE = "haiku-id", t.HAIKU_TITLE_ATTRIBUTE = "haiku-title", t.HAIKU_VAR_ATTRIBUTE = "haiku-var", t.HAIKU_SOURCE_ATTRIBUTE = "haiku-source", t.HAIKU_LOCKED_ATTRIBUTE = "haiku-locked"; var i = { rect: !0, line: !0, circle: !0, ellipse: !0, path: !0, polygon: !0, polyline: !0 }, a = ["x", "y", "z"], s = { name: "elementName", attributes: "attributes", children: "children" }, u = E.default.createLayoutSpec(), l = function (e) { function n() { var t = e.call(this) || this; return t.isHovered = !1, t } return r(n, e), Object.defineProperty(n.prototype, "childNodes", { get: function () { return this.node && (this.memory && this.memory.children || this.node.children) || [] }, enumerable: !0, configurable: !0 }), Object.defineProperty(n.prototype, "children", { get: function () { return this.childNodes.map(function (e) { return n.findOrCreateByNode(e) }) }, enumerable: !0, configurable: !0 }), Object.defineProperty(n.prototype, "attributes", { get: function () { return this.node && this.node.attributes || {} }, enumerable: !0, configurable: !0 }), Object.defineProperty(n.prototype, "type", { get: function () { return this.node && this.node.elementName || "div" }, enumerable: !0, configurable: !0 }), Object.defineProperty(n.prototype, "title", { get: function () { return this.attributes[t.HAIKU_TITLE_ATTRIBUTE] }, enumerable: !0, configurable: !0 }), Object.defineProperty(n.prototype, "source", { get: function () { return this.attributes[t.HAIKU_SOURCE_ATTRIBUTE] }, enumerable: !0, configurable: !0 }), Object.defineProperty(n.prototype, "id", { get: function () { return this.attributes.id }, enumerable: !0, configurable: !0 }), Object.defineProperty(n.prototype, "className", { get: function () { return this.attributes.class }, enumerable: !0, configurable: !0 }), Object.defineProperty(n.prototype, "tagName", { get: function () { return this.isTextNode() ? "__text__" : this.isComponent() ? "div" : this.type || "div" }, enumerable: !0, configurable: !0 }), Object.defineProperty(n.prototype, "nodeType", { get: function () { return this.isTextNode() ? 3 : 1 }, enumerable: !0, configurable: !0 }), Object.defineProperty(n.prototype, "subcomponent", { get: function () { return this.memory && this.memory.subcomponent }, enumerable: !0, configurable: !0 }), Object.defineProperty(n.prototype, "instance", { get: function () { return this.memory && this.memory.instance }, enumerable: !0, configurable: !0 }), Object.defineProperty(n.prototype, "containee", { get: function () { return this.memory && this.memory.containee }, enumerable: !0, configurable: !0 }), Object.defineProperty(n.prototype, "owner", { get: function () { return this.instance ? this.instance : this.parent && this.parent.owner }, enumerable: !0, configurable: !0 }), Object.defineProperty(n.prototype, "top", { get: function () { return this.instanceContext && this.instanceContext.component }, enumerable: !0, configurable: !0 }), Object.defineProperty(n.prototype, "instanceContext", { get: function () { return this.memory && this.memory.context }, enumerable: !0, configurable: !0 }), Object.defineProperty(n.prototype, "parentNode", { get: function () { return this.memory && this.memory.parent }, enumerable: !0, configurable: !0 }), Object.defineProperty(n.prototype, "memory", { get: function () { return this.node && this.node.__memory }, enumerable: !0, configurable: !0 }), Object.defineProperty(n.prototype, "parent", { get: function () { return this.parentNode && n.findOrCreateByNode(this.parentNode) }, enumerable: !0, configurable: !0 }), Object.defineProperty(n.prototype, "layout", { get: function () { return this.node && this.node.layout && this.node.layout.computed }, enumerable: !0, configurable: !0 }), Object.defineProperty(n.prototype, "layoutMatrix", { get: function () { return this.layout && this.layout.matrix || E.default.createMatrix() }, enumerable: !0, configurable: !0 }), Object.defineProperty(n.prototype, "layoutAncestry", { get: function () { var e = []; this.layout && e.unshift(this.layout); for (var t = this; t.parent;) { var n = (t = t.parent).layout; n && e.unshift(n) } return e }, enumerable: !0, configurable: !0 }), Object.defineProperty(n.prototype, "layoutAncestryMatrices", { get: function () { return this.layoutAncestry.filter(function (e) { return !!e.matrix }).map(function (e) { return e.matrix }) }, enumerable: !0, configurable: !0 }), Object.defineProperty(n.prototype, "rootSVG", { get: function () { for (var e = this.parent; e;) { if ("svg" === e.type) return e; e = e.parent } }, enumerable: !0, configurable: !0 }), Object.defineProperty(n.prototype, "isChildOfDefs", { get: function () { for (var e = this.parent; e;) { if ("defs" === e.type) return !0; e = e.parent } return !1 }, enumerable: !0, configurable: !0 }), n.prototype.getTranscludedElement = function () { if ("use" !== this.type) return this; var e = this.attributes["xlink:href"] || this.attributes.href; if (e && this.rootSVG) { var t, n = e.substr(1); return this.rootSVG.visit(function (e) { if (e.id === n) return t = e, !1 }), t } }, Object.defineProperty(n.prototype, "rawLayout", { get: function () { return this.node && this.node.layout }, enumerable: !0, configurable: !0 }), Object.defineProperty(n.prototype, "shown", { get: function () { return this.layout && this.layout.shown }, enumerable: !0, configurable: !0 }), Object.defineProperty(n.prototype, "opacity", { get: function () { return this.layout && this.layout.opacity }, enumerable: !0, configurable: !0 }), Object.defineProperty(n.prototype, "shear", { get: function () { return this.layout && this.layout.shear }, enumerable: !0, configurable: !0 }), Object.defineProperty(n.prototype, "matrix", { get: function () { return this.layout && this.layout.matrix }, enumerable: !0, configurable: !0 }), Object.defineProperty(n.prototype, "translation", { get: function () { return this.layout && this.layout.translation || o({}, u.translation) }, enumerable: !0, configurable: !0 }), Object.defineProperty(n.prototype, "rotation", { get: function () { return this.layout && this.layout.rotation || o({}, u.rotation) }, enumerable: !0, configurable: !0 }), Object.defineProperty(n.prototype, "scale", { get: function () { return this.layout && this.layout.scale || o({}, u.scale) }, enumerable: !0, configurable: !0 }), Object.defineProperty(n.prototype, "origin", { get: function () { return this.layout && this.layout.origin || o({}, u.origin) }, enumerable: !0, configurable: !0 }), Object.defineProperty(n.prototype, "offset", { get: function () { return this.layout && this.layout.offset || o({}, u.offset) }, enumerable: !0, configurable: !0 }), Object.defineProperty(n.prototype, "targets", { get: function () { return this.memory && this.memory.targets || [] }, enumerable: !0, configurable: !0 }), Object.defineProperty(n.prototype, "target", { get: function () { return this.targets[this.targets.length - 1] }, enumerable: !0, configurable: !0 }), Object.defineProperty(n.prototype, "rotationX", { get: function () { return this.rotation && this.rotation.x }, enumerable: !0, configurable: !0 }), Object.defineProperty(n.prototype, "rotationY", { get: function () { return this.rotation && this.rotation.y }, enumerable: !0, configurable: !0 }), Object.defineProperty(n.prototype, "rotationZ", { get: function () { return this.rotation && this.rotation.z }, enumerable: !0, configurable: !0 }), Object.defineProperty(n.prototype, "scaleX", { get: function () { return this.scale && this.scale.x }, enumerable: !0, configurable: !0 }), Object.defineProperty(n.prototype, "scaleY", { get: function () { return this.scale && this.scale.y }, enumerable: !0, configurable: !0 }), Object.defineProperty(n.prototype, "scaleZ", { get: function () { return this.scale && this.scale.z }, enumerable: !0, configurable: !0 }), Object.defineProperty(n.prototype, "positionX", { get: function () { return this.translation && this.translation.x }, enumerable: !0, configurable: !0 }), Object.defineProperty(n.prototype, "positionY", { get: function () { return this.translation && this.translation.y }, enumerable: !0, configurable: !0 }), Object.defineProperty(n.prototype, "positionZ", { get: function () { return this.translation && this.translation.z }, enumerable: !0, configurable: !0 }), Object.defineProperty(n.prototype, "translationX", { get: function () { return this.translation && this.translation.x }, enumerable: !0, configurable: !0 }), Object.defineProperty(n.prototype, "translationY", { get: function () { return this.translation && this.translation.y }, enumerable: !0, configurable: !0 }), Object.defineProperty(n.prototype, "translationZ", { get: function () { return this.translation && this.translation.z }, enumerable: !0, configurable: !0 }), Object.defineProperty(n.prototype, "originX", { get: function () { return this.origin && this.origin.x }, enumerable: !0, configurable: !0 }), Object.defineProperty(n.prototype, "originY", { get: function () { return this.origin && this.origin.y }, enumerable: !0, configurable: !0 }), Object.defineProperty(n.prototype, "originZ", { get: function () { return this.origin && this.origin.z }, enumerable: !0, configurable: !0 }), Object.defineProperty(n.prototype, "offsetX", { get: function () { return this.offset && this.offset.x }, enumerable: !0, configurable: !0 }), Object.defineProperty(n.prototype, "offsetY", { get: function () { return this.offset && this.offset.y }, enumerable: !0, configurable: !0 }), Object.defineProperty(n.prototype, "offsetZ", { get: function () { return this.offset && this.offset.z }, enumerable: !0, configurable: !0 }), Object.defineProperty(n.prototype, "sizePrecomputed", { get: function () { return this.layout && this.layout.size }, enumerable: !0, configurable: !0 }), Object.defineProperty(n.prototype, "sizePrecomputedX", { get: function () { return this.sizePrecomputed && this.sizePrecomputed.x }, enumerable: !0, configurable: !0 }), Object.defineProperty(n.prototype, "sizePrecomputedY", { get: function () { return this.sizePrecomputed && this.sizePrecomputed.y }, enumerable: !0, configurable: !0 }), Object.defineProperty(n.prototype, "sizePrecomputedZ", { get: function () { return this.sizePrecomputed && this.sizePrecomputed.z }, enumerable: !0, configurable: !0 }), Object.defineProperty(n.prototype, "size", { get: function () { return { x: this.sizeX, y: this.sizeY, z: this.sizeZ } }, enumerable: !0, configurable: !0 }), Object.defineProperty(n.prototype, "sizeX", { get: function () { return this.computeSizeX() }, enumerable: !0, configurable: !0 }), Object.defineProperty(n.prototype, "sizeY", { get: function () { return this.computeSizeY() }, enumerable: !0, configurable: !0 }), Object.defineProperty(n.prototype, "sizeZ", { get: function () { return this.computeSizeZ() }, enumerable: !0, configurable: !0 }), Object.defineProperty(n.prototype, "width", { get: function () { return this.sizeX }, enumerable: !0, configurable: !0 }), Object.defineProperty(n.prototype, "height", { get: function () { return this.sizeY }, enumerable: !0, configurable: !0 }), Object.defineProperty(n.prototype, "depth", { get: function () { return this.sizeZ }, enumerable: !0, configurable: !0 }), Object.defineProperty(n.prototype, "attributeWidth", { get: function () { if (this.attributes && this.attributes.width) return Number(this.attributes.width) }, enumerable: !0, configurable: !0 }), Object.defineProperty(n.prototype, "attributeHeight", { get: function () { if (this.attributes && this.attributes.height) return Number(this.attributes.height) }, enumerable: !0, configurable: !0 }), Object.defineProperty(n.prototype, "sizeAbsolute", { get: function () { return this.rawLayout && this.rawLayout.sizeAbsolute || o({}, u.sizeAbsolute) }, enumerable: !0, configurable: !0 }), Object.defineProperty(n.prototype, "sizeAbsoluteX", { get: function () { return this.sizeAbsolute && this.sizeAbsolute.x }, enumerable: !0, configurable: !0 }), Object.defineProperty(n.prototype, "sizeAbsoluteY", { get: function () { return this.sizeAbsolute && this.sizeAbsolute.y }, enumerable: !0, configurable: !0 }), Object.defineProperty(n.prototype, "sizeAbsoluteZ", { get: function () { return this.sizeAbsolute && this.sizeAbsolute.z }, enumerable: !0, configurable: !0 }), Object.defineProperty(n.prototype, "sizeMode", { get: function () { return this.rawLayout && this.rawLayout.sizeMode }, enumerable: !0, configurable: !0 }), Object.defineProperty(n.prototype, "sizeModeX", { get: function () { return this.sizeMode && this.sizeMode.x }, enumerable: !0, configurable: !0 }), Object.defineProperty(n.prototype, "sizeModeY", { get: function () { return this.sizeMode && this.sizeMode.y }, enumerable: !0, configurable: !0 }), Object.defineProperty(n.prototype, "sizeModeZ", { get: function () { return this.sizeMode && this.sizeMode.z }, enumerable: !0, configurable: !0 }), Object.defineProperty(n.prototype, "sizeProportional", { get: function () { return this.rawLayout && this.rawLayout.sizeProportional || o({}, u.sizeProportional) }, enumerable: !0, configurable: !0 }), Object.defineProperty(n.prototype, "sizeProportionalX", { get: function () { return this.sizeProportional && this.sizeProportional.x }, enumerable: !0, configurable: !0 }), Object.defineProperty(n.prototype, "sizeProportionalY", { get: function () { return this.sizeProportional && this.sizeProportional.y }, enumerable: !0, configurable: !0 }), Object.defineProperty(n.prototype, "sizeProportionalZ", { get: function () { return this.sizeProportional && this.sizeProportional.z }, enumerable: !0, configurable: !0 }), Object.defineProperty(n.prototype, "sizeDifferential", { get: function () { return this.rawLayout && this.rawLayout.sizeDifferential || o({}, u.sizeDifferential) }, enumerable: !0, configurable: !0 }), Object.defineProperty(n.prototype, "sizeDifferentialX", { get: function () { return this.sizeDifferential && this.sizeDifferential.x }, enumerable: !0, configurable: !0 }), Object.defineProperty(n.prototype, "sizeDifferentialY", { get: function () { return this.sizeDifferential && this.sizeDifferential.y }, enumerable: !0, configurable: !0 }), Object.defineProperty(n.prototype, "sizeDifferentialZ", { get: function () { return this.sizeDifferential && this.sizeDifferential.z }, enumerable: !0, configurable: !0 }), Object.defineProperty(n.prototype, "properties", { get: function () { return { shown: this.shown, opacity: this.opacity, offset: this.offset, origin: this.origin, translation: this.translation, rotation: this.rotation, scale: this.scale, shear: this.shear, sizeMode: this.sizeMode, sizeProportional: this.sizeProportional, sizeDifferential: this.sizeDifferential, sizeAbsolute: this.sizeAbsolute, size: this.size, matrix: this.matrix } }, enumerable: !0, configurable: !0 }), Object.defineProperty(n.prototype, "componentId", { get: function () { return this.getComponentId() }, enumerable: !0, configurable: !0 }), n.prototype.computeSize = function () { return { x: this.computeSizeX(), y: this.computeSizeY(), z: this.computeSizeZ() } }, n.prototype.computeBoundsForAxis = function (e) { return "x" === e ? this.computeContentBoundsX() : "y" === e ? this.computeContentBoundsY() : "z" === e ? this.computeContentBoundsZ() : void 0 }, n.prototype.computeContentBounds = function () { return o({}, this.computeContentBoundsX(), this.computeContentBoundsY(), this.computeContentBoundsZ()) }, n.prototype.computeContentBoundsX = function () { if ("number" == typeof this.sizeAbsolute.x) return { left: null, right: null }; var e = [], t = [], n = this.children; if (n.length < 1) return { left: null, right: null }; for (var r = 0; r < n.length; r++) { var o = n[r].getLocallyTransformedBoundingClientRect(), i = o.left, a = o.right; e.push(i), t.push(a) } return { left: Math.min.apply(Math, e), right: Math.max.apply(Math, t) } }, n.prototype.computeContentBoundsY = function () { if ("number" == typeof this.sizeAbsolute.y) return { top: null, bottom: null }; var e = [], t = [], n = this.children; if (n.length < 1) return { top: null, bottom: null }; for (var r = 0; r < n.length; r++) { var o = n[r].getLocallyTransformedBoundingClientRect(), i = o.top, a = o.bottom; e.push(i), t.push(a) } return { top: Math.min.apply(Math, e), bottom: Math.max.apply(Math, t) } }, n.prototype.computeContentBoundsZ = function () { return { front: null, back: null } }, n.prototype.computeSizeForAxis = function (e) { return "x" === e ? this.computeSizeX() : "y" === e ? this.computeSizeY() : "z" === e ? this.computeSizeZ() : void 0 }, n.prototype.getOnlyChildSize = function (e) { var t = this.children; if (1 === t.length) { var n = t[0]; if (n && "object" == typeof n) return "number" == typeof n.sizeAbsolute[e] ? n.sizeAbsolute[e] : n.getOnlyChildSize(e) } }, n.prototype.computeSizeX = function () { if (this.isSvgPrimitive() && "number" == typeof this.attributeWidth) return this.attributeWidth; if ("number" == typeof this.sizeAbsolute.x) return this.sizeAbsolute.x; var e = this.getOnlyChildSize("x"); if ("number" == typeof e) return e; var t = this.computeContentBoundsX(), n = t.left; return t.right - n }, n.prototype.computeSizeY = function () { if (this.isSvgPrimitive() && "number" == typeof this.attributeHeight) return this.attributeHeight; if ("number" == typeof this.sizeAbsolute.y) return this.sizeAbsolute.y; var e = this.getOnlyChildSize("y"); if ("number" == typeof e) return e; var t = this.computeContentBoundsY(), n = t.top; return t.bottom - n }, n.prototype.computeSizeZ = function () { if ("number" == typeof this.sizeAbsolute.z) return this.sizeAbsolute.z; var e = this.getOnlyChildSize("z"); if ("number" == typeof e) return e; var t = this.computeContentBoundsZ(), n = t.front; return t.back - n }, n.prototype.getComponentId = function () { return this.attributes[t.HAIKU_ID_ATTRIBUTE] }, n.prototype.isSimpleNode = function () { return !this.isComponent() }, n.prototype.isTextNode = function () { return "object" != typeof this.node }, n.prototype.isComponent = function () { return !!this.instance }, n.prototype.isWrapper = function () { return !!this.subcomponent }, n.prototype.isSvgPrimitive = function () { return !!i[this.tagName] }, n.prototype.componentMatches = function (e) { if (!this.isComponent()) return !1; var t = e.trim(), n = this.source, r = this.title, o = this.id; return "div" === t || t === n || t === r || t === o }, n.prototype.matches = function (e) { return this.componentMatches(e) || M.cssMatchOne(this.node, e, s) }, n.prototype.visit = function (e, t) { var n = e(this); return !1 !== n ? this.visitDescendants(e, t) : n }, n.prototype.visitDescendants = function (e, t) { if (this.parent && this.parent.isWrapper()) return !0; for (var n = t ? this.children.filter(t) : this.children, r = 0; r < n.length; r++) { var o = n[r].visit(e, t); if (!1 === o) return o } return !0 }, n.prototype.querySelector = function (e) { var t = this; return this.cacheFetch("querySelector:" + e, function () { var n; return t.visitDescendants(function (t) { if (t.matches(e)) return n = t, !1 }), n }) }, n.prototype.querySelectorAll = function (e) { var t = this; return this.cacheFetch("querySelectorAll:" + e, function () { var n = []; return t.visitDescendants(function (t) { t.matches(e) && n.push(t) }), n }) }, n.prototype.getRawBoundingBoxPoints = function () { var e = this.computeSize(), t = e.x, n = e.y; return [{ x: 0, y: 0, z: 0 }, { x: t / 2, y: 0, z: 0 }, { x: t, y: 0, z: 0 }, { x: 0, y: n / 2, z: 0 }, { x: t / 2, y: n / 2, z: 0 }, { x: t, y: n / 2, z: 0 }, { y: n, x: 0, z: 0 }, { y: n, x: t / 2, z: 0 }, { y: n, x: t, z: 0 }] }, n.prototype.getLocallyTransformedBoundingBoxPoints = function () { return n.transformPointsInPlace(this.getRawBoundingBoxPoints(), n.computeLayout(this.node, null).matrix) }, n.prototype.getLocallyTransformedBoundingClientRect = function () { var e = this.getLocallyTransformedBoundingBoxPoints(); return n.getRectFromPoints(e) }, n.prototype.getNearestDefinedNonZeroAncestorSizeX = function () { var e = this.sizeAbsolute.x; return "number" == typeof e && e > 0 ? e : this.parent ? this.parent.getNearestDefinedNonZeroAncestorSizeX() : 1 }, n.prototype.getNearestDefinedNonZeroAncestorSizeY = function () { var e = this.sizeAbsolute.y; return "number" == typeof e && e > 0 ? e : this.parent ? this.parent.getNearestDefinedNonZeroAncestorSizeY() : 1 }, n.prototype.getNearestDefinedNonZeroAncestorSizeZ = function () { var e = this.sizeAbsolute.z; return "number" == typeof e && e > 0 ? e : this.parent ? this.parent.getNearestDefinedNonZeroAncestorSizeZ() : 1 }, n.prototype.triggerHover = function (e) { var t = this.top; if (t || (t = this.containee), t && !t.isDeactivated) { for (var r = this, o = void 0 !== t.lastHoveredElement, i = []; r && (o && t.lastHoveredElement === r && (o = !1), !r.isHovered);)i.push(r), r.isHovered = !0, r = r.parent; i.forEach(function (t) { var r = n.getElementEventDelegator(t); r && !r.isDeactivated && r.routeEventToHandlerAndEmitWithoutBubblingAndWithoutGlobalHandlers(t.selector, "hover", [t, t.target, e]) }); var a = []; if (o) for (var s = t.lastHoveredElement; s && s !== r;)a.push(s), s.isHovered = !1, s = s.parent; a.forEach(function (t) { var r = n.getElementEventDelegator(t); r && !r.isDeactivated && r.routeEventToHandlerAndEmitWithoutBubblingAndWithoutGlobalHandlers(t.selector, "unhover", [t, t.target, e]) }), t.lastHoveredElement = this } }, Object.defineProperty(n.prototype, "selector", { get: function () { return "haiku:" + this.getComponentId() }, enumerable: !0, configurable: !0 }), n.prototype.dump = function () { return this.$id + ":<" + this.tagName + ">(" + (this.getComponentId() || "[container]") + ")" }, n.getElementEventDelegator = function (e) { if (e) return e.isComponent() ? e : e.owner }, n.transformVectorByMatrix = function (e, t, n) { return e[0] = n[0] * t[0] + n[4] * t[1] + n[8] * t[2] + n[12], e[1] = n[1] * t[0] + n[5] * t[1] + n[9] * t[2] + n[13], e[2] = n[2] * t[0] + n[6] * t[1] + n[10] * t[2] + n[14], e }, n.getRectFromPoints = function (e) { var t = Math.min(e[0].y, e[2].y, e[6].y, e[8].y), n = Math.max(e[0].y, e[2].y, e[6].y, e[8].y), r = Math.min(e[0].x, e[2].x, e[6].x, e[8].x), o = Math.max(e[0].x, e[2].x, e[6].x, e[8].x); return { top: t, right: o, bottom: n, left: r, width: Math.abs(n - t), height: Math.abs(o - r) } }, n.getBoundingBoxPoints = function (e) { var t = e[0].x, n = e[0].y, r = e[0].x, o = e[0].y; e.forEach(function (e) { e.x < t ? t = e.x : e.x > r && (r = e.x), e.y < n ? n = e.y : e.y > o && (o = e.y) }); var i = r - t, a = o - n; return [{ x: t, y: n, z: 0 }, { x: t + i / 2, y: n, z: 0 }, { x: r, y: n, z: 0 }, { x: t, y: n + a / 2, z: 0 }, { x: t + i / 2, y: n + a / 2, z: 0 }, { x: r, y: n + a / 2, z: 0 }, { x: t, y: o, z: 0 }, { x: t + i / 2, y: o, z: 0 }, { x: r, y: o, z: 0 }] }, n.transformPointsInPlace = function (e, t) { for (var r = 0; r < e.length; r++)n.transformPointInPlace(e[r], t); return e }, n.transformPointInPlace = function (e, t) { var r = n.transformVectorByMatrix([], [e.x, e.y, e.z], t); return e.x = r[0], e.y = r[1], e.z = r[2], e }, n.getAncestry = function (e, t) { return e.unshift(t), t.parent && n.getAncestry(e, t.parent), e }, n.__name__ = "HaikuElement", n.findByNode = function (e) { for (var t = O.default.getRegistryForClass(n), r = 0; r < t.length; r++)if (t[r].node === e) return t[r] }, n.connectNodeWithElement = function (e, t) { t && (t.node = e), e && "object" == typeof e && (e.__memory || (e.__memory = {}), e.__memory.element = t) }, n.createByNode = function (e) { var t = new n; return n.connectNodeWithElement(e, t), t }, n.findOrCreateByNode = function (e) { var t; return e && "object" == typeof e && (t = e.__memory && e.__memory.element), t || (t = n.findByNode(e)), t ? (n.connectNodeWithElement(e, t), t) : n.createByNode(e) }, n.useAutoSizing = function (e) { return e === E.AUTO_SIZING_TOKEN || !0 === e }, n.computeLayout = function (e, t) { var r = e.layout, i = { x: null, y: null, z: null }, s = t && t.layout && t.layout.computed && t.layout.computed.bounds, u = { left: null, top: null, right: null, bottom: null, front: null, back: null }, l = 0, c = 0; s && ("number" == typeof s.left && (l += s.left), "number" == typeof s.top && (c += s.top)); for (var f, p = n.findOrCreateByNode(e), h = 0; h < a.length; h++) { var d = a[h]; switch (r.sizeMode[d]) { case E.SIZE_PROPORTIONAL: if (!f && (void 0 !== (f = t && t.layout && t.layout.computed && t.layout.computed.size || { x: 0, y: 0, z: 0 }).z && null !== f.z || (f.z = 0), 0 === f.x && 0 === f.y && 0 === f.z)) for (var y = e; y;)if ((y = y.__memory && y.__memory.parent) && y.layout && y.layout.computed) { Object.assign(f, y.layout.computed.size); break } i[d] = f[d] * r.sizeProportional[d] + r.sizeDifferential[d]; break; case E.SIZE_ABSOLUTE: var m = r.sizeAbsolute[d]; n.useAutoSizing(m) ? (i[d] = p.computeSizeForAxis(d), Object.assign(u, p.computeBoundsForAxis(d))) : i[d] = m } } var g = o({}, r, { offset: { x: r.offset.x - l, y: r.offset.y - c, z: r.offset.z } }), v = E.default.computeMatrix(g, i); return { shown: r.shown, opacity: r.opacity, offset: r.offset, origin: r.origin, translation: r.translation, rotation: r.rotation, scale: r.scale, shear: r.shear, sizeMode: r.sizeMode, sizeProportional: r.sizeProportional, sizeDifferential: r.sizeDifferential, sizeAbsolute: r.sizeAbsolute, size: i, matrix: v, bounds: u } }, n }(O.default); t.default = l }); e(S); S.HAIKU_ID_ATTRIBUTE, S.HAIKU_TITLE_ATTRIBUTE, S.HAIKU_VAR_ATTRIBUTE, S.HAIKU_SOURCE_ATTRIBUTE, S.HAIKU_LOCKED_ATTRIBUTE; var A = t(function (e, t) { Object.defineProperty(t, "__esModule", { value: !0 }); var r = _.version, o = "undefined" != typeof window ? window : void 0 !== n ? n : {}; o.HaikuHelpers || (o.HaikuHelpers = {}), o.HaikuHelpers[r] || (o.HaikuHelpers[r] = { helpers: {} }); var i = o.HaikuHelpers[r]; i.register = function (e, t) { return i.helpers[e] = t, i }, t.default = i }); e(A); var j = t(function (e, t) { Object.defineProperty(t, "__esModule", { value: !0 }), t.default = function (e, t, n) { var r = 0; if (!t) return r; for (var o in t) for (var i in t[o]) { var a = i.split(":"), s = (a[0], a[1]), u = a[2]; if (s && u && s === e) { var l = Number(u) * n; l > r && (r = l) } } return r } }); e(j); var I = t(function (e, t) { function n(e) { var t = 0; for (var n in e) { var r = e[n]; for (var o in r) { var i = r[o]; if ("object" == typeof i) for (var a = Object.keys(i), s = 0; s < a.length; s++) { var u = parseInt(a[s], 10); u > t && (t = u) } } } return t } Object.defineProperty(t, "__esModule", { value: !0 }), t.default = n }); e(I); var L = t(function (e, t) { var r = n && n.__extends || function () { var e = function (t, n) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]) })(t, n) }; return function (t, n) { function r() { this.constructor = t } e(t, n), t.prototype = null === n ? Object.create(n) : (r.prototype = n.prototype, new r) } }(); Object.defineProperty(t, "__esModule", { value: !0 }); var o = { loop: !0 }; !function (e) { e.Millisecond = "ms", e.Frame = "fr" }(t.TimeUnit || (t.TimeUnit = {})); !function (e) { e.ONCE = "once", e.PLAY = "play", e.LOOP = "loop", e.STOP = "stop", e.SEEK = "seek" }(t.PlaybackFlag || (t.PlaybackFlag = {})); var a = function (e) { return new Function("$time", e) }, s = { once: !0, play: !0, loop: !0, stop: !0, seek: !0 }, u = function (e) { function t(t, n, r) { var o = e.call(this) || this; return o.component = t, o.name = n, o.assignOptions(r || {}), o.globalClockTime = 0, o.localElapsedTime = 0, o.localControlledTime = null, o.areUpdatesFrozen = !!o.options.freeze, o.isTimelineLooping = !!o.options.loop, o.isTimelinePlaying = !0, o.offsetCalculator = null, o.lastFrame = null, o.numLoops = 0, o } return r(t, e), t.prototype.getMs = function (e, t) { switch (t) { case "fr": return Math.round(this.getFrameDuration() * e); case "ms": default: return e } }, t.prototype.getFrameDuration = function () { return this.component.getClock().getFrameDuration() }, t.prototype.assignOptions = function (e) { this.options = k.default(this.options || {}, o, e || {}) }, t.prototype.ensureClockIsRunning = function () { var e = this.component.getClock(); e.isRunning() || e.start() }, t.prototype.setComponent = function (e) { this.component = e }, t.prototype.doUpdateWithGlobalClockTime = function (e) { if (!this.isFrozen()) { var t = e - this.getClockTime(); this.globalClockTime = e, this.isPaused() || this.doUpdateWithTimeDelta(t) } }, t.prototype.doUpdateWithTimeDelta = function (e) { var n = this.getCeilTime(), r = this.getElapsedTime(), o = r + e, i = t.didTimeLoop(r, o, n); this.setElapsedTime(o), this.isLooping() && i && (this.numLoops++ , this.getMaxTime() > 200 && this.component.callHook("timeline:loop", { localElapsedTime: o, maxExplicitlyDefinedTime: this.getMaxTime(), globalClockTime: this.getClockTime(), boundedFrame: this.getBoundedFrame(), loopCount: this.numLoops })) }, t.prototype.executePreUpdateHooks = function (e) { this.doUpdateWithGlobalClockTime(e) }, t.prototype.executePostUpdateHooks = function (e) { if (!this.isFrozen() && !this.isPaused()) { var t = this.getBoundedFrame(), n = Math.round(this.getBoundedTime()); this.component.routeEventToHandlerAndEmitWithoutBubbling(O.GLOBAL_LISTENER_KEY, "timeline:" + this.getName() + ":" + t, [t, n]), this.component.routeEventToHandlerAndEmitWithoutBubbling(O.GLOBAL_LISTENER_KEY, "frame", [t, n]), this.emit("tick", t, n), this.lastFrame = t } }, t.prototype.getLastFrame = function () { return this.lastFrame }, t.prototype.controlTime = function (e, t) { this.setControlledTime(parseInt(e || 0, 10)), this.doUpdateWithGlobalClockTime(t) }, t.prototype.isTimeControlled = function () { return "number" == typeof this.getControlledTime() }, t.prototype.getName = function () { return this.name }, t.prototype.getMaxTime = function () { var e = this; return this.cacheFetch("getMaxTime", function () { var t = e.getMaxKeyframeTime(), n = e.getMaxActionsTime(); return Math.max(t, n) }) }, t.prototype.getMaxKeyframeTime = function () { return I.default(this.getDescriptor()) }, t.prototype.getMaxActionsTime = function () { return Math.round(j.default(this.name, this.component.bytecode.eventHandlers, this.getFrameDuration())) }, t.prototype.getDescriptor = function () { return this.component.getTimelineDescriptor(this.name) }, t.prototype.getCeilTime = function () { return this.getMaxTime() + this.getMs(1, "fr") }, t.prototype.getClockTime = function () { return this.globalClockTime }, t.prototype.getElapsedTime = function () { return this.localElapsedTime }, t.prototype.setElapsedTime = function (e) { this.localElapsedTime = e }, t.prototype.getControlledTime = function () { return this.localControlledTime }, t.prototype.setControlledTime = function (e) { this.localControlledTime = e }, t.prototype.getBoundedTime = function () { var e = this.getMaxTime(), n = this.isTimeControlled() ? this.getControlledTime() : this.getElapsedTime(); if (this.offsetCalculator) try { n = this.offsetCalculator.call(this, n) } catch (e) { } return this.isLooping() ? t.modulo(Math.round(n), this.getCeilTime()) : (n < 1e-6 && (n = 0), Math.min(n, e)) }, t.prototype.getTime = function () { return this.getBoundedTime() }, t.prototype.getBoundedFrame = function () { var e = this.getTime(), t = this.component.getClock().getFrameDuration(); return Math.round(e / t) }, t.prototype.getUnboundedFrame = function () { var e = this.getElapsedTime(), t = this.component.getClock().getFrameDuration(); return Math.round(e / t) }, t.prototype.getFrame = function () { return this.getBoundedFrame() }, t.prototype.isPlaying = function () { return this.isTimelinePlaying }, t.prototype.setPlaying = function (e) { void 0 === e && (e = !0), this.isTimelinePlaying = !!e }, t.prototype.isPaused = function () { return !this.isPlaying() }, t.prototype.isFinished = function () { return !this.isLooping() && !this.isTimeControlled() && this.getElapsedTime() > this.getMaxTime() }, t.prototype.isUnfinished = function () { return !this.isFinished() }, t.prototype.getDuration = function () { return this.getMaxTime() || 0 }, t.prototype.setRepeat = function (e) { void 0 === e && (e = !0), this.isTimelineLooping = !!e }, t.prototype.getRepeat = function () { return this.isTimelineLooping }, t.prototype.isRepeating = function () { return this.getRepeat() }, t.prototype.isLooping = function () { return this.isRepeating() }, t.prototype.isFrozen = function () { return this.areUpdatesFrozen }, t.prototype.freeze = function () { this.areUpdatesFrozen = !0 }, t.prototype.unfreeze = function () { this.areUpdatesFrozen = !1 }, t.prototype.start = function () { this.startSoftly(0), this.emit("start") }, t.prototype.startSoftly = function (e) { this.setPlaying(!0), this.setElapsedTime(e || 0) }, t.prototype.stop = function () { this.stopSoftly(), this.emit("stop") }, t.prototype.stopSoftly = function () { this.setPlaying(!1) }, t.prototype.pause = function () { this.pauseSoftly(), this.emit("pause") }, t.prototype.pauseSoftly = function () { this.setPlaying(!1) }, t.prototype.play = function (e) { void 0 === e && (e = {}), this.playSoftly(), e && e.skipMarkForFullFlush || this.component.markForFullFlush(), this.emit("play") }, t.prototype.playSoftly = function () { this.ensureClockIsRunning(), this.setPlaying(!0), this.isTimeControlled() && (this.setElapsedTime(this.getControlledTime()), this.setControlledTime(null)) }, t.prototype.seek = function (e, t) { void 0 === t && (t = "fr"); var n = this.getMs(e, t); this.seekSoftly(n), this.component.markForFullFlush(), this.emit("seek", n) }, t.prototype.seekSoftly = function (e) { this.ensureClockIsRunning(), this.controlTime(e, this.component.getClock().getTime()), this.setElapsedTime(this.getControlledTime()) }, t.prototype.gotoAndPlay = function (e, t) { void 0 === t && (t = "fr"); var n = this.getMs(e, t); this.seekSoftly(n), this.play(null) }, t.prototype.gotoAndStop = function (e, t) { void 0 === t && (t = "fr"), this.seekSoftly(this.getMs(e, t)), this.component && this.component.context && this.component.context.tick && this.component.context.tick(), this.pause() }, t.prototype.setPlaybackStatus = function (e) { var t = this.parsePlaybackStatus(e), n = t.flag, r = t.time, o = t.proc; "loop" === n && this.setRepeat(!0), "once" === n && this.setRepeat(!1), "loop" !== n && "once" !== n && "play" !== n || this.isPlaying() || this.play(), "stop" === n && this.isPlaying() && this.stop(), "seek" === n && this.seek(r || 0, "ms"), "function" == typeof o && (this.offsetCalculator = o) }, t.prototype.parsePlaybackStatus = function (e) { if (!e) return { flag: "loop" }; if ("object" == typeof e) return e; if ("number" == typeof e && i.isNumeric(e)) return { flag: "seek", time: this.getMs(Number(e), "fr") }; if ("string" == typeof e) { var t = this.cacheFetch("getPlaybackStatusTokens:" + e, function () { return i.tokenizeDirective(e).map(function (e) { return e.value }) }); if (t.length < 1) return { flag: "loop" }; if (1 === t.length && s[t[0]]) return { flag: t[0] }; for (var n = [], r = 0; r < t.length; r++) { var o = t[r], u = t[r + 1]; if ("number" == typeof o) { if ("ms" === u) { n.push(this.getMs(o, "ms")), r++; continue } if ("fr" === u) { n.push(this.getMs(o, "fr")), r++; continue } if ("fr" !== u) { n.push(this.getMs(o, "fr")); continue } } n.push(o) } n.length > 1 && (s[n[0]] || n.unshift("loop")); var l = n.map(function (e) { return s[e] ? "$time" : e }).join(" "), c = void 0; try { c = a("return " + l + ";") } catch (e) { } return { proc: c, flag: n[0] } } return { flag: "loop" } }, t.prototype.duration = function () { return this.getDuration() }, Object.defineProperty(t.prototype, "repeat", { get: function () { return this.getRepeat() }, enumerable: !0, configurable: !0 }), Object.defineProperty(t.prototype, "time", { get: function () { return this.getTime() }, enumerable: !0, configurable: !0 }), Object.defineProperty(t.prototype, "max", { get: function () { return this.getMaxTime() }, enumerable: !0, configurable: !0 }), Object.defineProperty(t.prototype, "frame", { get: function () { return this.getFrame() }, enumerable: !0, configurable: !0 }), t.__name__ = "HaikuTimeline", t.all = function () { return O.default.getRegistryForClass(t) }, t.where = function (e) { return t.all().filter(function (t) { return t.matchesCriteria(e) }) }, t.create = function (e, n, r) { return new t(e, n, r) }, t.modulo = function (e, t) { return 0 === t ? 0 : (e % t + t) % t }, t.didTimeLoop = function (e, n, r) { var o = t.modulo(e, r); return t.modulo(n, r) < o }, t }(O.default); t.default = u }); e(L); L.TimeUnit, L.PlaybackFlag; var N = t(function (e, t) { Object.defineProperty(t, "__esModule", { value: !0 }), t.default = { aliceblue: [240, 248, 255], antiquewhite: [250, 235, 215], aqua: [0, 255, 255], aquamarine: [127, 255, 212], azure: [240, 255, 255], beige: [245, 245, 220], bisque: [255, 228, 196], black: [0, 0, 0], blanchedalmond: [255, 235, 205], blue: [0, 0, 255], blueviolet: [138, 43, 226], brown: [165, 42, 42], burlywood: [222, 184, 135], cadetblue: [95, 158, 160], chartreuse: [127, 255, 0], chocolate: [210, 105, 30], coral: [255, 127, 80], cornflowerblue: [100, 149, 237], cornsilk: [255, 248, 220], crimson: [220, 20, 60], cyan: [0, 255, 255], darkblue: [0, 0, 139], darkcyan: [0, 139, 139], darkgoldenrod: [184, 134, 11], darkgray: [169, 169, 169], darkgreen: [0, 100, 0], darkgrey: [169, 169, 169], darkkhaki: [189, 183, 107], darkmagenta: [139, 0, 139], darkolivegreen: [85, 107, 47], darkorange: [255, 140, 0], darkorchid: [153, 50, 204], darkred: [139, 0, 0], darksalmon: [233, 150, 122], darkseagreen: [143, 188, 143], darkslateblue: [72, 61, 139], darkslategray: [47, 79, 79], darkslategrey: [47, 79, 79], darkturquoise: [0, 206, 209], darkviolet: [148, 0, 211], deeppink: [255, 20, 147], deepskyblue: [0, 191, 255], dimgray: [105, 105, 105], dimgrey: [105, 105, 105], dodgerblue: [30, 144, 255], firebrick: [178, 34, 34], floralwhite: [255, 250, 240], forestgreen: [34, 139, 34], fuchsia: [255, 0, 255], gainsboro: [220, 220, 220], ghostwhite: [248, 248, 255], gold: [255, 215, 0], goldenrod: [218, 165, 32], gray: [128, 128, 128], green: [0, 128, 0], greenyellow: [173, 255, 47], grey: [128, 128, 128], honeydew: [240, 255, 240], hotpink: [255, 105, 180], indianred: [205, 92, 92], indigo: [75, 0, 130], ivory: [255, 255, 240], khaki: [240, 230, 140], lavender: [230, 230, 250], lavenderblush: [255, 240, 245], lawngreen: [124, 252, 0], lemonchiffon: [255, 250, 205], lightblue: [173, 216, 230], lightcoral: [240, 128, 128], lightcyan: [224, 255, 255], lightgoldenrodyellow: [250, 250, 210], lightgray: [211, 211, 211], lightgreen: [144, 238, 144], lightgrey: [211, 211, 211], lightpink: [255, 182, 193], lightsalmon: [255, 160, 122], lightseagreen: [32, 178, 170], lightskyblue: [135, 206, 250], lightslategray: [119, 136, 153], lightslategrey: [119, 136, 153], lightsteelblue: [176, 196, 222], lightyellow: [255, 255, 224], lime: [0, 255, 0], limegreen: [50, 205, 50], linen: [250, 240, 230], magenta: [255, 0, 255], maroon: [128, 0, 0], mediumaquamarine: [102, 205, 170], mediumblue: [0, 0, 205], mediumorchid: [186, 85, 211], mediumpurple: [147, 112, 219], mediumseagreen: [60, 179, 113], mediumslateblue: [123, 104, 238], mediumspringgreen: [0, 250, 154], mediumturquoise: [72, 209, 204], mediumvioletred: [199, 21, 133], midnightblue: [25, 25, 112], mintcream: [245, 255, 250], mistyrose: [255, 228, 225], moccasin: [255, 228, 181], navajowhite: [255, 222, 173], navy: [0, 0, 128], oldlace: [253, 245, 230], olive: [128, 128, 0], olivedrab: [107, 142, 35], orange: [255, 165, 0], orangered: [255, 69, 0], orchid: [218, 112, 214], palegoldenrod: [238, 232, 170], palegreen: [152, 251, 152], paleturquoise: [175, 238, 238], palevioletred: [219, 112, 147], papayawhip: [255, 239, 213], peachpuff: [255, 218, 185], peru: [205, 133, 63], pink: [255, 192, 203], plum: [221, 160, 221], powderblue: [176, 224, 230], purple: [128, 0, 128], rebeccapurple: [102, 51, 153], red: [255, 0, 0], rosybrown: [188, 143, 143], royalblue: [65, 105, 225], saddlebrown: [139, 69, 19], salmon: [250, 128, 114], sandybrown: [244, 164, 96], seagreen: [46, 139, 87], seashell: [255, 245, 238], sienna: [160, 82, 45], silver: [192, 192, 192], skyblue: [135, 206, 235], slateblue: [106, 90, 205], slategray: [112, 128, 144], slategrey: [112, 128, 144], snow: [255, 250, 250], springgreen: [0, 255, 127], steelblue: [70, 130, 180], tan: [210, 180, 140], teal: [0, 128, 128], thistle: [216, 191, 216], tomato: [255, 99, 71], turquoise: [64, 224, 208], violet: [238, 130, 238], wheat: [245, 222, 179], white: [255, 255, 255], whitesmoke: [245, 245, 245], yellow: [255, 255, 0], yellowgreen: [154, 205, 50] } }); e(N); var F = t(function (e, t) { Object.defineProperty(t, "__esModule", { value: !0 }); var n = {}; for (var r in N.default) N.default.hasOwnProperty(r) && (n[N.default[r]] = r); t.get = function (e) { var t, n; switch (e.substring(0, 3).toLowerCase()) { case "hsl": t = i(e), n = "hsl"; break; case "hwb": t = a(e), n = "hwb"; break; default: t = o(e), n = "rgb" }return t ? { model: n, value: t } : null }; var o = function (e) { if (!e) return null; var t, n, r, o = [0, 0, 0, 1], i = e.match(/^#([a-f0-9]{6})([a-f0-9]{2})?$/i), a = e.match(/^#([a-f0-9]{3,4})$/i), u = e.match(/^rgba?\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*(?:,\s*([+-]?[\d.]+)\s*)?\)$/), l = e.match(/^rgba?\(\s*([+-]?[\d.]+)%\s*,\s*([+-]?[\d.]+)%\s*,\s*([+-]?[\d.]+)%\s*(?:,\s*([+-]?[\d.]+)\s*)?\)$/), c = e.match(/(\D+)/); if (i) { for (r = (t = i)[2], t = t[1], n = 0; n < 3; n++) { var f = 2 * n; o[n] = parseInt(t.slice(f, f + 2), 16) } r && (o[3] = Math.round(parseInt(r, 16) / 255 * 100) / 100) } else if (a) { for (r = (t = (t = a)[1])[3], n = 0; n < 3; n++)o[n] = parseInt(t[n] + t[n], 16); r && (o[3] = Math.round(parseInt(r + r, 16) / 255 * 100) / 100) } else if (u) { for (t = u, n = 0; n < 3; n++)o[n] = parseInt(t[n + 1], 0); t[4] && (o[3] = parseFloat(t[4])) } else { if (!l) return c ? "transparent" === (t = c)[1] ? [0, 0, 0, 0] : (o = N.default[t[1]]) ? (o[3] = 1, o) : null : null; for (t = l, n = 0; n < 3; n++)o[n] = Math.round(2.55 * parseFloat(t[n + 1])); t[4] && (o[3] = parseFloat(t[4])) } for (n = 0; n < 3; n++)o[n] = s(o[n], 0, 255); return o[3] = s(o[3], 0, 1), o }, i = function (e) { if (!e) return null; var t = e.match(/^hsla?\(\s*([+-]?\d*[.]?\d+)(?:deg)?\s*,\s*([+-]?[\d.]+)%\s*,\s*([+-]?[\d.]+)%\s*(?:,\s*([+-]?[\d.]+)\s*)?\)$/); if (t) { var n = parseFloat(t[4]); return [(parseFloat(t[1]) % 360 + 360) % 360, s(parseFloat(t[2]), 0, 100), s(parseFloat(t[3]), 0, 100), s(isNaN(n) ? 1 : n, 0, 1)] } return null }, a = function (e) { if (!e) return null; var t = e.match(/^hwb\(\s*([+-]?\d*[.]?\d+)(?:deg)?\s*,\s*([+-]?[\d.]+)%\s*,\s*([+-]?[\d.]+)%\s*(?:,\s*([+-]?[\d.]+)\s*)?\)$/); if (t) { var n = parseFloat(t[4]); return [(parseFloat(t[1]) % 360 + 360) % 360, s(parseFloat(t[2]), 0, 100), s(parseFloat(t[3]), 0, 100), s(isNaN(n) ? 1 : n, 0, 1)] } return null }; t.to = function (e, t) { switch (e) { case "hex": return "#" + u(t[0]) + u(t[1]) + u(t[2]) + (t[3] < 1 ? u(Math.round(255 * t[3])) : ""); case "rgb": return t.length < 4 || 1 === t[3] ? "rgb(" + Math.round(t[0]) + ", " + Math.round(t[1]) + ", " + Math.round(t[2]) + ")" : "rgba(" + Math.round(t[0]) + ", " + Math.round(t[1]) + ", " + Math.round(t[2]) + ", " + t[3] + ")"; case "hsl": return t.length < 4 || 1 === t[3] ? "hsl(" + t[0] + ", " + t[1] + "%, " + t[2] + "%)" : "hsla(" + t[0] + ", " + t[1] + "%, " + t[2] + "%, " + t[3] + ")"; case "hwb": var n = ""; return t.length >= 4 && 1 !== t[3] && (n = ", " + t[3]), "hwb(" + t[0] + ", " + t[1] + "%, " + t[2] + "%" + n + ")" } }; var s = function (e, t, n) { return Math.min(Math.max(t, e), n) }, u = function (e) { var t = e.toString(16).toUpperCase(); return t.length < 2 ? "0" + t : t } }); e(F); F.get, F.to; var R = t(function (e, t) { function n(e) { return e ? typeof e === i || typeof e === o && "url" === e.trim().slice(0, 3) ? e : F.get(String(e)) : null } function r(e) { return typeof e === o ? e : e ? F.to(e.model, e.value) : "none" } Object.defineProperty(t, "__esModule", { value: !0 }); var o = "string", i = "object"; t.default = { parseString: n, generateString: r } }); e(R); var B = t(function (e, t) { Object.defineProperty(t, "__esModule", { value: !0 }), t.default = function () { var e = {}; return function (t) { var n = t && t.message.toString(); e[n] || (e[n] = !0, console.error(t)) } }() }); e(B); var H = t(function (e, t) { function n(e, t) { return 1 !== Object.keys(e).length || !e.hasOwnProperty("0") || "function" == typeof e[0].value || /^controlFlow/.test(t) } Object.defineProperty(t, "__esModule", { value: !0 }), t.default = n }); e(H); var D = t(function (e, t) { Object.defineProperty(t, "__esModule", { value: !0 }); var n = function (e, t) { return e - t }; t.getSortedKeyframes = function (e) { return Object.keys(e).map(Number).sort(n) } }); e(D); D.getSortedKeyframes; var $ = t(function (e, t) { Object.defineProperty(t, "__esModule", { value: !0 }), t.normalizePath = function (e) { var t, n, r, o, i, a, s = (e = e.replace(/,/g, " ").replace(/-/g, " - ").replace(/-\s+/g, "-").replace(/([a-zA-Z])/g, " $1 ")).replace(/([a-zA-Z])\s?/g, "|$1").split("|"), u = s.length, l = [], c = 0, f = 0, p = 0, h = 0, d = 0, y = 0, m = 0, g = 0, v = ""; for (t = 1; t < u; t++)if (n = s[t], r = n.substring(0, 1), o = r.toLowerCase(), l = n.replace(r, "").trim().split(" "), l = l.filter(function (e) { return "" !== e }).map(parseFloat), i = l.length, "m" === o) { if (v += "M ", "m" === r ? (p += l[0], h += l[1]) : (p = l[0], h = l[1]), c = p, f = h, v += p + " " + h + " ", i > 2) for (a = 0; a < i; a += 2)"m" === r ? (p += l[a], h += l[a + 1]) : (p = l[a], h = l[a + 1]), v += "L " + p + " " + h + " " } else if ("l" === o) for (a = 0; a < i; a += 2)"l" === r ? (p += l[a], h += l[a + 1]) : (p = l[a], h = l[a + 1]), v += "L " + p + " " + h + " "; else if ("h" === o) for (a = 0; a < i; a++)"h" === r ? p += l[a] : p = l[a], v += "L " + p + " " + h + " "; else if ("v" === o) for (a = 0; a < i; a++)"v" === r ? h += l[a] : h = l[a], v += "L " + p + " " + h + " "; else if ("q" === o) for (a = 0; a < i; a += 4)"q" === r ? (d = p + l[a], y = h + l[a + 1], p += l[a + 2], h += l[a + 3]) : (d = l[a], y = l[a + 1], p = l[a + 2], h = l[a + 3]), v += "Q " + d + " " + y + " " + p + " " + h + " "; else if ("t" === o) for (a = 0; a < i; a += 2)d = p + (p - d), y = h + (h - y), "t" === r ? (p += l[a], h += l[a + 1]) : (p = l[a], h = l[a + 1]), v += "Q " + d + " " + y + " " + p + " " + h + " "; else if ("c" === o) for (a = 0; a < i; a += 6)"c" === r ? (d = p + l[a], y = h + l[a + 1], m = p + l[a + 2], g = h + l[a + 3], p += l[a + 4], h += l[a + 5]) : (d = l[a], y = l[a + 1], m = l[a + 2], g = l[a + 3], p = l[a + 4], h = l[a + 5]), v += "C " + d + " " + y + " " + m + " " + g + " " + p + " " + h + " "; else if ("s" === o) for (a = 0; a < i; a += 4)d = p + (p - m), y = h + (h - g), "s" === r ? (m = p + l[a], g = h + l[a + 1], p += l[a + 2], h += l[a + 3]) : (m = l[a], g = l[a + 1], p = l[a + 2], h = l[a + 3]), v += "C " + d + " " + y + " " + m + " " + g + " " + p + " " + h + " "; else "z" === o && (v += "Z ", p = c, h = f); return v.trim() }, t.reverseNormalizedPath = function (e) { var t, n, r, o, i, a, s = e.split(" "), u = s.length, l = u - 1, c = [], f = new RegExp("[MLCQZ]", ""); for (t = 0; t < u; t++) { var p = s[t]; if (!f.test(p)) { var h = s.slice(Math.max(t - 3, 0), 3).join(" ") + " [" + p + "] " + s.slice(t + 1, Math.min(t + 4, l)).join(" "); throw new Error("Error while trying to reverse normalized SVG path, at position " + t + " (" + h + ").\nEither the path is not normalised, or it's malformed.") } if ("C" === p) i = 3, a = 2; else if ("Q" === p) i = 2, a = 1; else if ("L" === p) i = 1, a = 1; else { if ("M" !== p) { c.push("M"); continue } i = 1, a = 0 } for (i === a && c.push(p), o = 0; o < i; o++)o === a && c.push(p), n = s[++t], r = s[++t], c.push(r), c.push(n) } var d, y = ""; for (d = c.length - 1; d > 0; d--)y += c[d] + " "; return y += "Z", y = y.replace(/M M/g, "Z M") } }); e($); $.normalizePath, $.reverseNormalizedPath; var V = t(function (e, t) { function r(e) { for (var t = [], n = e; n.length > 0;)for (var r in p) { var o = p[r].exec(n); if (o) { t.push({ type: r, raw: o[0] }), n = n.slice(o[0].length, n.length); break } } return t } var o = n && n.__assign || function () { return (o = Object.assign || function (e) { for (var t, n = 1, r = arguments.length; n < r; n++) { t = arguments[n]; for (var o in t) Object.prototype.hasOwnProperty.call(t, o) && (e[o] = t[o]) } return e }).apply(this, arguments) }; Object.defineProperty(t, "__esModule", { value: !0 }); var i = function (e, t) { return t ? { curve: { type: "cubic", x1: t.x + 2 / 3 * (e.curve.x1 - t.x), y1: t.y + 2 / 3 * (e.curve.y1 - t.y), x2: e.x + 2 / 3 * (e.curve.x1 - e.x), y2: e.y + 2 / 3 * (e.curve.y1 - e.y) }, x: e.x, y: e.y } : e }, a = function (e) { switch (e.type) { case "circle": return s(e); case "ellipse": return u(e); case "line": return l(e); case "path": return g(e); case "polygon": return v(e); case "polyline": return b(e); case "rect": return x(e); default: return [] } }, s = function (e) { var t = e.cx, n = e.cy, r = e.r; return [{ x: t, y: n - r, moveTo: !0 }, { x: t, y: n + r, curve: { type: "arc", rx: r, ry: r, sweepFlag: 1 } }, { x: t, y: n - r, curve: { type: "arc", rx: r, ry: r, sweepFlag: 1 } }] }, u = function (e) { var t = e.cx, n = e.cy, r = e.rx, o = e.ry; return [{ x: t, y: n - o, moveTo: !0 }, { x: t, y: n + o, curve: { rx: r, ry: o, type: "arc", sweepFlag: 1 } }, { x: t, y: n - o, curve: { rx: r, ry: o, type: "arc", sweepFlag: 1 } }] }, l = function (e) { var t = e.x1, n = e.x2; return [{ x: t, y: e.y1, moveTo: !0 }, { x: n, y: e.y2 }] }, c = { A: 7, C: 6, H: 1, L: 2, M: 2, Q: 4, S: 4, T: 2, V: 1, Z: 0 }, f = ["a", "c", "h", "l", "m", "q", "s", "t", "v"], p = { command: /^[MmLlHhVvCcSsQqTtAaZz]/g, whitespace: /^[\s]+/, comma: /^,/, number: /^0b[01]+|^0o[0-7]+|^0x[\da-f]+|^-?\d*\.?\d+(?:e[+-]?\d+)?/i }, h = function (e) { return -1 !== f.indexOf(e) }, d = ["xAxisRotation", "largeArcFlag", "sweepFlag"], y = function (e) { return e && e.match(/[MmLlHhVvCcSsQqTtAaZz]/g) }, m = function (e) { return r(e).filter(function (e) { return "number" === e.type || "command" === e.type || "comma" === e.type }).map(function (e) { return e.raw }).join(" ").split(/[MmLlHhVvCcSsQqTtAaZz]/g).map(function (e) { return e.trim() }).filter(function (e) { return e.length > 0 }).map(function (e) { return e.split(/[ ,]+/).map(function (e) { return parseFloat(e) }).filter(function (e) { return !isNaN(e) }) }) }, g = function (e) { var t = e.d, n = y(t); if (!n) return []; for (var r, o = m(t), a = [], s = 0, u = n.length; s < u; s++) { var l = n[s], f = l.toUpperCase(), p = c[f], g = h(l), v = a.length < 1 ? null : a[a.length - 1]; if (p > 0) for (var b = o.shift(), _ = b.length / p, x = 0; x < _; x++)switch (v = a.length < 1 ? null : a[a.length - 1], f) { case "M": var O = (g && v ? v.x : 0) + b.shift(), k = (g && v ? v.y : 0) + b.shift(); r = { x: O, y: k }, a.push({ x: O, y: k, moveTo: !0 }); break; case "L": a.push({ x: (g ? v.x : 0) + b.shift(), y: (g ? v.y : 0) + b.shift() }); break; case "H": a.push({ x: (g ? v.x : 0) + b.shift(), y: v.y }); break; case "V": a.push({ x: v.x, y: (g ? v.y : 0) + b.shift() }); break; case "A": a.push({ curve: { type: "arc", rx: b.shift(), ry: b.shift(), xAxisRotation: b.shift(), largeArcFlag: b.shift(), sweepFlag: b.shift() }, x: (g ? v.x : 0) + b.shift(), y: (g ? v.y : 0) + b.shift() }); for (var w = 0, z = d; w < z.length; w++) { var P = z[w]; 0 === a[a.length - 1].curve[P] && delete a[a.length - 1].curve[P] } break; case "C": a.push({ curve: { type: "cubic", x1: (g ? v.x : 0) + b.shift(), y1: (g ? v.y : 0) + b.shift(), x2: (g ? v.x : 0) + b.shift(), y2: (g ? v.y : 0) + b.shift() }, x: (g ? v.x : 0) + b.shift(), y: (g ? v.y : 0) + b.shift() }); break; case "S": var T = (g ? v.x : 0) + b.shift(), E = (g ? v.y : 0) + b.shift(), C = (g ? v.x : 0) + b.shift(), M = (g ? v.y : 0) + b.shift(), S = { x: null, y: null }, A = void 0, j = void 0; v.curve && "cubic" === v.curve.type ? (S.x = Math.abs(v.x - v.curve.x2), S.y = Math.abs(v.y - v.curve.y2), A = v.x < v.curve.x2 ? v.x - S.x : v.x + S.x, j = v.y < v.curve.y2 ? v.y - S.y : v.y + S.y) : (S.x = Math.abs(C - T), S.y = Math.abs(M - E), A = v.x, j = v.y), a.push({ curve: { type: "cubic", x1: A, y1: j, x2: T, y2: E }, x: C, y: M }); break; case "Q": a.push(i({ curve: { type: "quadratic", x1: (g ? v.x : 0) + b.shift(), y1: (g ? v.y : 0) + b.shift() }, x: (g ? v.x : 0) + b.shift(), y: (g ? v.y : 0) + b.shift() }, v)); break; case "T": var I = (g ? v.x : 0) + b.shift(), L = (g ? v.y : 0) + b.shift(), N = void 0, F = void 0; if (v.curve && "quadratic" === v.curve.type) { var R = { x: Math.abs(v.x - v.curve.x1), y: Math.abs(v.y - v.curve.y1) }; N = v.x < v.curve.x1 ? v.x - R.x : v.x + R.x, F = v.y < v.curve.y1 ? v.y - R.y : v.y + R.y } else N = v.x, F = v.y; a.push(i({ curve: { type: "quadratic", x1: N, y1: F }, x: I, y: L }, v)) } else null !== v && ("Z" === f && (v.closed = !0), void 0 === r || v.x === r.x && v.y === r.y || a.push({ x: r.x, y: r.y })) } return a }, v = function (e) { var t = e.points; return _({ points: t, closed: !0 }) }, b = function (e) { var t = e.points; return _({ points: t, closed: !1 }) }, _ = function (e) { var t = e.closed, n = e.points.split(/[\s,]+/).map(function (e) { return parseFloat(e) }).reduce(function (e, t, n) { return n % 2 == 0 ? e.push({ x: t }) : e[(n - 1) / 2].y = t, e }, []); return t && n.push(o({}, n[0])), n[0].moveTo = !0, n }, x = function (e) { var t = e.height, n = e.rx, r = e.ry, o = e.width, i = e.x, a = e.y; return n || r ? k({ height: t, width: o, x: i, y: a, rx: n || r, ry: r || n, type: "rect" }) : O({ height: t, width: o, x: i, y: a }) }, O = function (e) { var t = e.height, n = e.width, r = e.x, o = e.y; return [{ x: r, y: o, moveTo: !0 }, { y: o, x: r + n }, { x: r + n, y: o + t }, { x: r, y: o + t }, { x: r, y: o }] }, k = function (e) { var t = e.height, n = e.rx, r = e.ry, o = e.width, i = e.x, a = e.y, s = { rx: n, ry: r, type: "arc", sweepFlag: 1 }; return [{ y: a, x: i + n, moveTo: !0 }, { y: a, x: i + o - n }, { curve: s, x: i + o, y: a + r }, { x: i + o, y: a + t - r }, { curve: s, x: i + o - n, y: a + t }, { x: i + n, y: a + t }, { curve: s, x: i, y: a + t - r }, { x: i, y: a + r }, { curve: s, y: a, x: i + n }] }; t.default = a }); e(V); var G = t(function (e, t) { function n(e) { for (var t, n = "", r = 0, o = 0, i = e; o < i.length; o++) { var a = i[o], s = a.curve, u = a.moveTo, l = a.x, c = a.y, f = 0 === r || u, p = r === e.length - 1 || e[r + 1].moveTo, h = 0 === r ? null : e[r - 1]; if (f) t = a, p || (n += "M" + l + "," + c); else if (s) { switch (s.type) { case "arc": var d = a.curve, y = d.largeArcFlag, m = void 0 === y ? 0 : y, g = d.rx, v = d.ry, b = d.sweepFlag, _ = void 0 === b ? 0 : b, x = d.xAxisRotation; n += "A" + g + "," + v + "," + (void 0 === x ? 0 : x) + "," + m + "," + _ + "," + l + "," + c; break; case "cubic": var O = a.curve; n += "C" + O.x1 + "," + O.y1 + "," + O.x2 + "," + O.y2 + "," + l + "," + c; break; case "quadratic": var k = a.curve; n += "Q" + k.x1 + "," + k.y1 + "," + l + "," + c }p && l === t.x && c === t.y && (n += "Z") } else p && l === t.x && c === t.y ? n += "Z" : l !== h.x && c !== h.y ? n += "L" + l + "," + c : l !== h.x ? n += "H" + l : c !== h.y && (n += "V" + c); r++ } return n } function r(e) { return n(Array.isArray(e) ? e : V.default(e)) } Object.defineProperty(t, "__esModule", { value: !0 }), t.default = r }); e(G); var U = t(function (e, t) { Object.defineProperty(t, "__esModule", { value: !0 }), t.default = { toPath: G.default, toPoints: V.default } }); e(U); var Y = t(function (e, t) { function n(e, t) { if ("number" == typeof e) return { value: e, unit: null }; if (null === e || void 0 === e) return { value: null, unit: null }; var n, r = e.match(/([+-]?[\d|.]+)/); n = r ? Number(r[0]) : 0; var o, i = e.match(/(em|px|%|turn|deg|in)/); return o = i ? i[0] : t && t.match(/rotate/) ? "deg" : null, { unit: o, value: n } } Object.defineProperty(t, "__esModule", { value: !0 }), t.default = n }); e(Y); var Z = t(function (e, t) { function n(e) { if (!e) return []; if (Array.isArray(e)) return e; for (var t = [], n = e.trim().replace(/,/g, " ").split(/\s+/g).map(Number), r = 0; r < n.length; r += 2)t.push(n.slice(r, r + 2)); return t } function r(e) { if (!e) return ""; if ("string" == typeof e) return e; for (var t = [], n = 0; n < e.length; n++) { var r = e[n].join(","); t.push(r) } return t.join(" ") } function o(e, t, n, r, o, i) { var a = o, s = i; return a || s ? (a && isNaN(s) && (s = a), isNaN(a) && (a = 0), isNaN(s) && (s = 0), [{ y: t, x: e + a, moveTo: !0 }, { y: t, x: e + n - a }, { x: e + n, y: t + s, curve: { type: "cubic", x1: e + n - a + a / f, y1: t, x2: e + n, y2: t + s / f } }, { x: e + n, y: t + r - s }, { x: e + n - a, y: t + r, curve: { type: "cubic", x1: e + n, y1: t + r - s / f, x2: e + n - a + a / f, y2: t + r } }, { x: e + a, y: t + r }, { x: e, y: t + r - s, curve: { type: "cubic", x1: e + a - a / f, y1: t + r, x2: e, y2: t + r - s / f } }, { x: e, y: t + s }, { y: t, x: e + a, closed: !0, curve: { type: "cubic", x1: e, y1: t + s - s / f, x2: e + a - a / f, y2: t } }]) : [{ x: e, y: t, moveTo: !0 }, { y: t, x: e + n }, { x: e + n, y: t + r }, { x: e, y: t + r, closed: !0 }, { x: e, y: t }] } function i(e, t, n) { return a(e, t, n, n) } function a(e, t, n, r) { return [{ x: e, y: t - r, moveTo: !0 }, { x: e + n, y: t, curve: { type: "cubic", x1: e + n / f, y1: t - r, x2: e + n, y2: t - r / f } }, { x: e, y: t + r, curve: { type: "cubic", x1: e + n, y1: t + r / f, x2: e + n / f, y2: t + r } }, { x: e - n, y: t, curve: { type: "cubic", x1: e - n / f, y1: t + r, x2: e - n, y2: t + r / f } }, { x: e, y: t - r, closed: !0, curve: { type: "cubic", x1: e - n, y1: t - r / f, x2: e - n / f, y2: t - r } }] } function s(e, t, n, r) { var o = { x1: e, y1: t, x2: n, y2: r, type: "line" }; return U.default.toPoints(o) } function u(e) { if (!e) return []; var t = { type: "path", d: e }; return U.default.toPoints(t) } function l(e) { return U.default.toPath(e) } function c(e) { if ("string" == typeof e.elementName && p[e.elementName] && "rect" !== e.elementName && "g" !== e.elementName) { var t = { type: e.elementName }; if (y[t.type]) for (var n in d) e.attributes[n] && (t[n] = e.attributes[n]); else for (var r in h) e.attributes[r] && (t[r] = Number(e.attributes[r])); return U.default.toPoints(t) } var o = Y.default(e.layout && e.layout.computed && e.layout.computed.size && e.layout.computed.size.x || e.rect && e.rect.width || e.attributes && e.attributes.style && e.attributes.style.width || e.attributes && e.attributes.width || e.attributes && e.attributes.x || 0, null).value, i = Y.default(e.layout && e.layout.computed && e.layout.computed.size && e.layout.computed.size.y || e.rect && e.rect.height || e.attributes && e.attributes.style && e.attributes.style.height || e.attributes && e.attributes.height || e.attributes && e.attributes.y || 0, null).value, a = Y.default(e.rect && e.rect.left || e.attributes.style && e.attributes.style.left || e.attributes.x || 0, null).value, s = Y.default(e.rect && e.rect.top || e.attributes.style && e.attributes.style.top || e.attributes.y || 0, null).value; return U.default.toPoints({ width: o, height: i, type: "rect", x: a, y: s }) } Object.defineProperty(t, "__esModule", { value: !0 }); var f = 1.8106602, p = { g: !0, rect: !0, polyline: !0, polygon: !0, path: !0, line: !0, ellipse: !0, circle: !0 }, h = { cx: !0, cy: !0, r: !0, rx: !0, ry: !0, x1: !0, x2: !0, x: !0, y: !0 }, d = { d: !0, points: !0 }, y = { path: !0, polyline: !0, polygon: !0 }; t.default = { rectToPoints: o, circleToPoints: i, ellipseToPoints: a, lineToPoints: s, pathToPoints: u, pointsToPath: l, polyPointsStringToPoints: n, pointsToPolyString: r, manaToPoints: c } }); e(Z); var Q = t(function (e, t) { Object.defineProperty(t, "__esModule", { value: !0 }), t.splitSegmentInSVGPoints = function (e, n, r, o) { r === e.length && (r = 0); var i, a; e[r].curve ? (i = { x: e[r].curve.x1, y: e[r].curve.y1 }, a = { x: e[r].curve.x2, y: e[r].curve.y2 }) : (i = e[n], a = e[r]); var s = t.cubicBezierSplit(o, e[n], i, a, e[r]); e[r].curve && (e[r].curve.x1 = s[1][1].x, e[r].curve.y1 = s[1][1].y, e[r].curve.x2 = s[1][2].x, e[r].curve.y2 = s[1][2].y); var u = null; e[r].curve && (u = { type: "cubic", x1: s[0][1].x, y1: s[0][1].y, x2: s[0][2].x, y2: s[0][2].y }); var l = { x: s[0][3].x, y: s[0][3].y, curve: u }; e.splice(r, 0, l) }, t.cubicBezierSplit = function (e, n, r, o, i) { var a = [1, 0, 0, 0, -(e - 1), e, 0, 0, Math.pow(e - 1, 2), -2 * e * (e - 1), e * e, 0, -Math.pow(e - 1, 3), 3 * e * Math.pow(e - 1, 2), -3 * e * e * (e - 1), e * e * e], s = t.mat4_multiply_vec4(a, { x: n.x, y: r.x, z: o.x, w: i.x }), u = t.mat4_multiply_vec4(a, { x: n.y, y: r.y, z: o.y, w: i.y }), l = [-Math.pow(e - 1, 3), 3 * e * Math.pow(e - 1, 2), -3 * e * e * (e - 1), e * e * e, 0, Math.pow(e - 1, 2), -2 * e * (e - 1), e * e, 0, 0, -(e - 1), e, 0, 0, 0, 1], c = t.mat4_multiply_vec4(l, { x: n.x, y: r.x, z: o.x, w: i.x }), f = t.mat4_multiply_vec4(l, { x: n.y, y: r.y, z: o.y, w: i.y }); return [[{ x: s.x, y: u.x }, { x: s.y, y: u.y }, { x: s.z, y: u.z }, { x: s.w, y: u.w }], [{ x: c.x, y: f.x }, { x: c.y, y: f.y }, { x: c.z, y: f.z }, { x: c.w, y: f.w }]] }, t.distance = function (e, t) { return Math.sqrt(Math.pow(t.x - e.x, 2) + Math.pow(t.y - e.y, 2)) }, t.mat4_multiply_vec4 = function (e, t) { return { x: t.x * e[0] + t.y * e[1] + t.z * e[2] + t.w * e[3], y: t.x * e[4] + t.y * e[5] + t.z * e[6] + t.w * e[7], z: t.x * e[8] + t.y * e[9] + t.z * e[10] + t.w * e[11], w: t.x * e[12] + t.y * e[13] + t.z * e[14] + t.w * e[15] } }, t.polygonArea = function (e) { for (var t, n = 0, r = e[e.length - 1], o = 0; o < e.length; o++)t = r, r = e[o], n += t.y * r.x - t.x * r.y; return n / 2 }, t.polygonLength = function (e) { for (var n, r = 0, o = e[e.length - 1], i = 0; i < e.length; i++)n = o, o = e[i], r += t.distance(n, o); return r }, t.distributeTotalVertices = function (e, n) { var r = n - e.length; if (!(r <= 0)) { for (var o = [], i = 0; i < e.length; i++)o.push({ index: i, length: t.distance(e[i], e[(i + 1) % e.length]), splits: 0 }); for (var a = 0; a < r;)o.sort(function (e, t) { return e.length / (e.splits || 1) - t.length / (t.splits || 1) }), o[o.length - 1].splits++ , a++; o.sort(function (e, t) { return e.index - t.index }); for (var s = 0, i = 0; i < o.length; i++)for (; o[i].splits > 0;)t.splitSegmentInSVGPoints(e, i + s, (i + s + 1) % e.length, 1 / (o[i].splits + 1)), s++ , o[i].splits-- } }, t.rotatePathForSmallestDistance = function (e, n) { if (e.length !== n.length) throw new Error("Mismatched source and destination length."); var r = !1; e[0].moveTo && n[0].moveTo && (e.shift(), n.shift(), r = !0); for (var o = 0, i = 1 / 0, a = 0; a < e.length; a++) { for (var s = 0, u = 0; u < e.length; u++)s += t.distance(e[u], n[(a + u) % n.length]); s < i && (i = s, o = a) } if (0 === o) return void (r && (e.unshift({ x: e[e.length - 1].x, y: e[e.length - 1].y, moveTo: !0 }), n.unshift({ x: n[n.length - 1].x, y: n[n.length - 1].y, moveTo: !0 }))); var l = n[n.length - 1].closed, c = n.splice(0, o); n.splice.apply(n, [e.length, 0].concat(c)), l && (n[n.length - 1].closed = !0), r && (e.unshift({ x: e[e.length - 1].x, y: e[e.length - 1].y, moveTo: !0 }), n.unshift({ x: n[n.length - 1].x, y: n[n.length - 1].y, moveTo: !0 })); for (u = 0; u < n.length; u++)u < n.length - 1 && n[u].closed && delete n[u].closed, u > 0 && n[u].moveTo && delete n[u].moveTo }, t.ensurePathClockwise = function (e) { if (t.polygonArea(e) > 0) { var n = $.reverseNormalizedPath($.normalizePath(Z.default.pointsToPath(e))); e.splice(0, e.length); for (var r = Z.default.pathToPoints(n), o = 0; o < r.length; o++)e.push(r[o]) } }, t.normalizePointCurves = function (e) { for (var t = 1; t < e.length; t++)if (e[t].curve) if ("quadratic" === e[t].curve.type) { var n = { type: "cubic" }; n.x1 = e[t - 1].x + 2 / 3 * (e[t].curve.x1 - e[t - 1].x), n.y1 = e[t - 1].y + 2 / 3 * (e[t].curve.y1 - e[t - 1].y), n.x2 = e[t].x + 2 / 3 * (e[t].curve.x1 - e[t].x), n.y2 = e[t].y + 2 / 3 * (e[t].curve.y2 - e[t].y), e[t].curve = n } else "arc" === e[t].curve.type && console.warn("Paths with arcs are not yet supported."); else e[t].curve = { type: "cubic", x1: e[t - 1].x, y1: e[t - 1].y, x2: e[t].x, y2: e[t].y } }, t.isMultiShape = function (e) { for (var t = 0; t < e.length; t++)if (e[t].closed && t < e.length - 1) return !0; return !1 }, t.synchronizePathStructure = function () { for (var e = [], n = 0; n < arguments.length; n++)e[n] = arguments[n]; if (!e.some(t.isMultiShape)) { var r = Math.max.apply(Math, e.map(function (e) { return e.length })), o = e.filter(function (e) { return e.length && !e.some(function (e) { var t = e.x, n = e.y; return isNaN(t) || isNaN(n) }) }); o.forEach(function (e) { t.ensurePathClockwise(e), t.distributeTotalVertices(e, r), t.normalizePointCurves(e) }); for (var i = 0; i < o.length - 1; i++)t.rotatePathForSmallestDistance(o[i], o[i + 1]) } } }); e(Q); Q.splitSegmentInSVGPoints, Q.cubicBezierSplit, Q.distance, Q.mat4_multiply_vec4, Q.polygonArea, Q.polygonLength, Q.distributeTotalVertices, Q.rotatePathForSmallestDistance, Q.ensurePathClockwise, Q.normalizePointCurves, Q.isMultiShape, Q.synchronizePathStructure; var q = t(function (e, t) { Object.defineProperty(t, "__esModule", { value: !0 }); var n = function (e, t) { var n = e.split("."), r = t.split("."); if (3 !== n.length || 3 !== r.length) throw new Error("Invalid semver comparison: " + e + ", " + t); for (var o = 0; o < 3; ++o) { if (n[o] < r[o]) return -1; if (n[o] > r[o]) return 1 } return 0 }; t.default = n }); e(q); var W = t(function (e, t) { Object.defineProperty(t, "__esModule", { value: !0 }); var n = function (e) { r(e, "sizeAbsolute.x"), r(e, "sizeAbsolute.y") }, r = function (e, t) { if (e[t]) for (var n in e[t]) !0 === e[t][n].value && (e[t][n].value = E.AUTO_SIZING_TOKEN) }; t.default = n }); e(W); var K = t(function (e, t) { Object.defineProperty(t, "__esModule", { value: !0 }), t.transformValueIsEssentiallyInt = function (e, t) { return Math.abs(e - t) < 1e-6 } }); e(K); K.transformValueIsEssentiallyInt; var X = t(function (e, t) { function n(e, t) { return t === E.default.FORMATS.TWO ? "matrix(" + [e[0], e[1], e[4], e[5], e[12], e[13]].map(o).join(r) + ")" : "matrix3d(" + e.map(o).join(r) + ")" } Object.defineProperty(t, "__esModule", { value: !0 }); var r = ",", o = function (e) { return K.transformValueIsEssentiallyInt(e, 0) ? "0" : e }; t.default = n }); e(X); var J = t(function (e, t) { function n(e) { return e.__memory.scope ? e.__memory.scope : e.__memory && e.__memory.parent ? n(e.__memory.parent) : null } Object.defineProperty(t, "__esModule", { value: !0 }), t.default = n }); e(J); var ee = t(function (e, t) { function n(e, t) { return !!e.haiku && (!!e.haiku.explicitStyles && void 0 !== e.haiku.explicitStyles[t]) } function r(e, r, i, a, s) { if (void 0 !== a.opacity || a.size || a.matrix) { var u = J.default(r); if (!1 === i.shown ? "hidden" !== e.style.visibility && (e.style.visibility = "hidden") : !0 === i.shown && "visible" !== e.style.visibility && (e.style.visibility = "visible"), !n(e, "opacity")) if (void 0 === a.opacity); else { var l = void 0, c = "" + (l = a.opacity >= .999 ? 1 : a.opacity <= 1e-4 ? 0 : a.opacity); e.style.opacity !== c && (e.style.opacity = c) } if (a.size) if (u === o) t.SVG_SIZEABLES[r.elementName] && (void 0 !== a.size.x && null === e.getAttribute("width") && e.getAttribute("width") !== a.size.x && e.setAttribute("width", a.size.x), void 0 !== a.size.y && null === e.getAttribute("height") && e.getAttribute("height") !== a.size.y && e.setAttribute("height", a.size.y)); else if (!n(e, "width")) { if (void 0 !== a.size.x) { var f = parseFloat(a.size.x.toFixed(2)) + "px"; e.style.width !== f && (e.style.width = f) } if (void 0 !== a.size.y) { var p = parseFloat(a.size.y.toFixed(2)) + "px"; e.style.height !== p && (e.style.height = p) } } if (E.default.virtualElementIsLayoutContainer(r) && !e.style.transformOrigin && (e.style.transformOrigin = "0% 0% 0px"), a.matrix) { var h = X.default(a.matrix, i.format); if (h === e.haiku.cachedTransform) return; e.haiku.cachedTransform = h, u === o && (i.format === E.default.FORMATS.TWO || s.config.platform.isIE || s.config.platform.isEdge) ? e.setAttribute("transform", h) : n(e, "transform") || e.getAttribute("transform") || (e.style.transform = h) } } } Object.defineProperty(t, "__esModule", { value: !0 }); var o = "svg"; t.SVG_SIZEABLES = { feBlend: !0, feColorMatrix: !0, feComponentTransfer: !0, feComposite: !0, feConvolveMatrix: !0, feDiffuseLighting: !0, feDisplacementMap: !0, feDropShadow: !0, feFlood: !0, feGaussianBlur: !0, feImage: !0, feMerge: !0, feMorphology: !0, feOffset: !0, feSpecularLighting: !0, feTile: !0, feTurbulence: !0, filter: !0, foreignObject: !0, image: !0, mask: !0, pattern: !0, rect: !0, use: !0 }, t.default = r }); e(ee); ee.SVG_SIZEABLES; var te = t(function (e, t) { Object.defineProperty(t, "__esModule", { value: !0 }); var n = { enum: !0, function: !0, implements: !0, with: !0, abstract: !0, arguments: !0, await: !0, boolean: !0, break: !0, byte: !0, case: !0, catch: !0, char: !0, class: !0, const: !0, continue: !0, debugger: !0, default: !0, delete: !0, do: !0, double: !0, else: !0, eval: !0, export: !0, extends: !0, false: !0, final: !0, finally: !0, float: !0, for: !0, goto: !0, if: !0, import: !0, in: !0, instanceof: !0, int: !0, interface: !0, let: !0, long: !0, native: !0, new: !0, null: !0, package: !0, private: !0, protected: !0, public: !0, return: !0, short: !0, static: !0, super: !0, switch: !0, synchronized: !0, this: !0, throw: !0, throws: !0, transient: !0, true: !0, try: !0, typeof: !0, undefined: !0, var: !0, void: !0, volatile: !0, while: !0, yield: !0 }, r = function (e) { return n[e] }; t.default = { isReserved: r, WORDS: n } }); e(te); var ne = t(function (e, t) { function n(e) { return a + e.charCodeAt(0) + s } function r(e) { return !isNaN(parseInt(e, 10)) && parseInt(e, 10) === parseFloat(e) } function o(e) { var t = e; return t = t.replace(u, n), te.default.WORDS[t] ? "" + a + t + s : t } function i(e) { return e.replace(/_\$([a-zA-Z_0-9]+)\$_/g, function (e) { var t = e.slice(2, e.length - 2); return r(t) ? String.fromCharCode(parseInt(t, 10)) : t }) } Object.defineProperty(t, "__esModule", { value: !0 }); var a = "_$", s = "$_", u = /(^[^a-zA-Z_\$])|([^a-zA-Z_\$0-9])/g; t.toIdentifier = o, t.toText = i }); e(ne); ne.toIdentifier, ne.toText; var re = t(function (e, t) { function n(e) { for (var t = [], n = 0; n < e.length; n++)t.push(o(e[n], null)); return "[ " + t.join(", ") + " ]" } function r(e) { var t = []; if (e.__rest) return "..." + e.__rest; for (var n in e) t.push(o(e[n], n)); return "{ " + t.join(", ") + " }" } function o(e, t) { return e && "string" == typeof e ? ne.toIdentifier(e) : e && Array.isArray(e) ? e.length < 1 ? t : t ? t + ", " + t + ": " + n(e) : n(e) : e && "object" == typeof e ? Object.keys(e).length < 1 ? t : t ? t + ", " + t + ": " + r(e) : r(e) : "__" + a.baddies++ + "__" } function i(e) { return e.map(function (e) { return o(e, null) }).join(", ") } Object.defineProperty(t, "__esModule", { value: !0 }); var a = { baddies: 0 }; t.default = i }); e(re); var oe = t(function (e, t) { function n(e, t, n, r) { void 0 === r && (r = "FunctionExpression"); return "ArrowFunctionExpression" === r ? new Function("\nreturn " + (e || "") + "(" + re.default(t) + ") => {\n  " + (n || "") + "\n}\n")() : new Function("\nreturn function " + (e || "") + "(" + re.default(t) + ") {\n  " + (n || "") + "\n}\n")() } Object.defineProperty(t, "__esModule", { value: !0 }), t.default = n }); e(oe); var ie = t(function (e, t) { function n(e) { var t = oe.default(e.name || "", e.params, e.body, e.type); return e.injectee && u.default.apply(null, [t].concat(e.params)), t } Object.defineProperty(t, "__esModule", { value: !0 }), t.default = n }); e(ie); var ae = t(function (e, t) { var r = n && n.__assign || function () { return (r = Object.assign || function (e) { for (var t, n = 1, r = arguments.length; n < r; n++) { t = arguments[n]; for (var o in t) Object.prototype.hasOwnProperty.call(t, o) && (e[o] = t[o]) } return e }).apply(this, arguments) }; Object.defineProperty(t, "__esModule", { value: !0 }); var o; !function (e) { e.OriginSupport = "3.2.0", e.TimelineDefaultFrames = "3.2.23", e.CamelAutoSizingOffset3DOmnibus = "3.5.2" }(o || (o = {})); var i = /^web\+haikuroot:\/\//, s = function (e, t) { return !e || q.default(e, t) < 0 }, u = function (e) { return e && Object.keys(e).length > 0 }, l = function (e) { if (e && e.attributes && e.attributes.style) { var t = !1; return e.attributes.style.transformStyle || (e.attributes.style.transformStyle = "preserve-3d", t = !0, e.attributes.style.perspective || (e.attributes.style.perspective = "inherit")), t } }; t.runMigrationsPrePhase = function (e, t) { var n = e.bytecode; n.states || (n.states = {}), n.metadata || (n.metadata = {}); var r = n.metadata.core || n.metadata.player; if (n.properties) { var o = n.properties; delete n.properties; for (var a = 0; a < o.length; a++) { var l = o[a], c = {}; void 0 !== l.value && (c.value = l.value), void 0 !== l.type && (c.type = l.type), void 0 !== l.setter && (c.set = l.setter), void 0 !== l.getter && (c.get = l.getter), void 0 !== l.set && (c.set = l.set), void 0 !== l.get && (c.get = l.get), n.states[l.name] = c } } if (Array.isArray(n.eventHandlers)) { var f = n.eventHandlers; delete n.eventHandlers, n.eventHandlers = {}; for (var p = 0; p < f.length; p++) { var h = f[p]; n.eventHandlers[h.selector] || (n.eventHandlers[h.selector] = {}), n.eventHandlers[h.selector][h.name] = { handler: h.handler } } } if (n.timelines) for (var d in n.timelines) for (var y in n.timelines[d]) for (var m in n.timelines[d][y]) null === n.timelines[d][y][m] ? delete n.timelines[d][y][m] : "object" != typeof n.timelines[d][y][m] && (n.timelines[d][y][m] = { 0: { value: n.timelines[d][y][m] } }); var g = s(r, "3.5.2"), v = {}; if (n.template) { var b = "auto" === e.config.preserve3d && "visible" !== e.config.overflowY; M.visitManaTree("0", n.template, function (e, n) { if ("object" == typeof n && t.mutations && n.id) { var r = n.id, o = r + "-" + t.mutations.referenceUniqueness; n.id = o, v["#" + r] = "#" + o, v["url(#" + r + ")"] = "url(#" + o + ")" } }, null, 0), M.visitManaTree("0", n.template, function (r, o) { if ("object" == typeof o) { var a = n.timelines.Default["haiku:" + o["haiku-id"]] || {}; if (o["xlink:href"] && (a["xlink:href"] = { 0: { value: o["xlink:href"] } }, delete o["xlink:href"]), t.mutations) for (var s in a) if ("src" === s || "xlink:href" === s || "href" === s) for (var l in a[s]) { var c = a[s][l].value; i.test(c) ? a[s][l].value = c.replace("web+haikuroot://", t.mutations.haikuRoot) : v[c] && (a[s][l].value = v[c]) } if (o.source && (o["haiku-source"] = o.source, delete o.source), o.identifier && (o["haiku-var"] = o.identifier, delete o.identifier), a.backgroundColor && !a["style.backgroundColor"] && (a["style.backgroundColor"] = a.backgroundColor, delete a.backgroundColor), g) { var f = a["style.transformStyle"]; f && f[0] && "flat" === f[0].value && delete a["style.transformStyle"]; var p = a["style.perspective"]; p && p[0] && "none" === p[0].value && delete a["style.perspective"], "string" == typeof r && ee.SVG_SIZEABLES[r] && (a["sizeAbsolute.x"] && (a.width = { 0: { value: a["sizeAbsolute.x"][0].value } }, delete a["sizeAbsolute.x"], delete a["sizeMode.x"]), a["sizeAbsolute.y"] && (a.height = { 0: { value: a["sizeAbsolute.y"][0].value } }, delete a["sizeAbsolute.y"], delete a["sizeMode.y"]), a["sizeProportional.x"] && (a.width = { 0: { value: 100 * Number(a["sizeProportional.x"][0].value) + "%" } }, delete a["sizeProportional.x"], delete a["sizeMode.x"]), a["sizeProportional.y"] && (a.height = { 0: { value: 100 * Number(a["sizeProportional.y"][0].value) + "%" } }, delete a["sizeProportional.y"], delete a["sizeMode.y"])) } !e.doPreserve3d && b && (u(a["rotation.x"]) || u(a["rotation.y"]) || u(a["translation.z"]) || u(a["scale.z"])) && (e.doPreserve3d = !0), !n.timelines.Default["haiku:" + o["haiku-id"]] && Object.keys(a).length > 0 && (n.timelines.Default["haiku:" + o["haiku-id"]] = a) } }, null, 0) } if (n.timelines) for (var d in n.timelines) for (var y in n.timelines[d]) { g && W.default(n.timelines[d][y]), v[y] && (n.timelines[d][v[y]] = n.timelines[d][y], delete n.timelines[d][y], y = v[y]); for (var _ in n.timelines[d][y]) { if (g) { var x = t.attrsHyphToCamel[_]; x && (n.timelines[d][y][x] = n.timelines[d][y][_], delete n.timelines[d][y][_]) } for (var O in n.timelines[d][y][_]) { var k = n.timelines[d][y][_][O]; k && v[k.value] && (k.value = v[k.value]) } } } }, t.runMigrationsPostPhase = function (e, t, n) { var o = e.bytecode, i = o.metadata.core || o.metadata.player, u = !1; if (e.doPreserve3d) { var c = e.node; c && l(c) && e.patches.push(c); var f = e.parentNode; f && l(f) && e.patches.push(f) } if (s(i, "3.5.2")) { var p = s(i, "3.2.0"); e.visit(function (e) { var t = 0, n = 0, r = o.timelines.Default["haiku:" + e.getComponentId()]; if (r) { if (r["align.x"]) { var i = r["align.x"][0] && r["align.x"][0].value; "number" == typeof i && (t += i * e.getNearestDefinedNonZeroAncestorSizeX()) } if (r["align.y"]) { var a = r["align.y"][0] && r["align.y"][0].value; "number" == typeof a && (n += a * e.getNearestDefinedNonZeroAncestorSizeY()) } if (r["mount.x"]) { var s = r["mount.x"][0] && r["mount.x"][0].value; "number" == typeof s && (t -= s * e.getNearestDefinedNonZeroAncestorSizeX()) } if (r["mount.y"]) { var l = r["mount.y"][0] && r["mount.y"][0].value; "number" == typeof l && (n -= l * e.getNearestDefinedNonZeroAncestorSizeY()) } p && ("svg" === e.tagName ? (t += .5 * e.getNearestDefinedNonZeroAncestorSizeX(), n += .5 * e.getNearestDefinedNonZeroAncestorSizeY()) : (t += e.originX * e.getNearestDefinedNonZeroAncestorSizeX(), n += e.originY * e.getNearestDefinedNonZeroAncestorSizeY())), 0 !== t && (r["offset.x"] = { 0: { value: t } }, u = !0), 0 !== n && (r["offset.y"] = { 0: { value: n } }, u = !0), delete r["align.x"], delete r["align.y"], delete r["align.z"], delete r["mount.x"], delete r["mount.y"], delete r["mount.z"] } }) } e.eachEventHandler(function (t, n, u) { var l = u.handler; if (!l) return void console.warn("Unable to migrate event handler for " + t + " " + n + " in " + e.$id); var c = l.__rfo || a.default(l).__function, f = c.params, p = c.body, h = !1; s(i, "3.2.23") && [".seek(", ".gotoAndPlay(", ".gotoAndStop("].forEach(function (e) { for (var t = 0; t < p.length; ++t)if (p.substring(t, t + e.length) === e) { h = !0, t += e.length; for (var n = 1; n > 0 && t < p.length;)"(" === p[t] ? n++ : ")" === p[t] && n-- , ++t; p = p.slice(0, t - 1) + ", 'ms')" + p.slice(t) } }), f.length < 4 && (f = ["component", "element", "target", "event"], h = !0), h && (o.eventHandlers[t][n].handler = ie.default(r({}, c, { params: f, body: p }))) }), u && (e.clearCaches(), e.markForFullFlush()), o.metadata.core = n } }); e(ae); ae.runMigrationsPrePhase, ae.runMigrationsPostPhase; var se = t(function (e, t) { Object.defineProperty(t, "__esModule", { value: !0 }); var n = "cubic-bezier", r = "steps"; t.ease = n + "(.25,.1,.25,1)", t.easeIn = n + "(.42,0,1,1)", t.easeInBack = n + "(.6,-.28,.735,.045)", t.easeInCirc = n + "(.6,.04,.98,.335)", t.easeInCubic = n + "(.55,.055,.675,.19)", t.easeInExpo = n + "(.95,.05,.795,.035)", t.easeInOut = n + "(.42,0,.58,1)", t.easeInOutBack = n + "(.68,-.55,.265,1.55)", t.easeInOutCirc = n + "(.785,.135,.15,.86)", t.easeInOutCubic = n + "(.645,.045,.355,1)", t.easeInOutExpo = n + "(1,0,0,1)", t.easeInOutQuad = n + "(.455,.03,.515,.955)", t.easeInOutQuart = n + "(.77,0,.175,1)", t.easeInOutQuint = n + "(.86,0,.07,1)", t.easeInOutSine = n + "(.445,.05,.55,.95)", t.easeInQuad = n + "(.55,.085,.68,.53)", t.easeInQuart = n + "(.895,.03,.685,.22)", t.easeInQuint = n + "(.755,.05,.855,.06)", t.easeInSine = n + "(.47,0,.745,.715)", t.easeOut = n + "(0,0,.58,1)", t.easeOutBack = n + "(.175,.885,.32,1.275)", t.easeOutCirc = n + "(.075,.82,.165,1)", t.easeOutCubic = n + "(.215,.61,.355,1)", t.easeOutExpo = n + "(.19,1,.22,1)", t.easeOutQuad = n + "(.25,.46,.45,.94)", t.easeOutQuart = n + "(.165,.84,.44,1)", t.easeOutQuint = n + "(.23,1,.32,1)", t.easeOutSine = n + "(.39,.575,.565,1)", t.elegantSlowStartEnd = n + "(.175,.885,.32,1.275)", t.linear = n + "(0,0,1,1)", t.stepEnd = r + "(1,0)", t.stepStart = r + "(1,1)" }); e(se); se.ease, se.easeIn, se.easeInBack, se.easeInCirc, se.easeInCubic, se.easeInExpo, se.easeInOut, se.easeInOutBack, se.easeInOutCirc, se.easeInOutCubic, se.easeInOutExpo, se.easeInOutQuad, se.easeInOutQuart, se.easeInOutQuint, se.easeInOutSine, se.easeInQuad, se.easeInQuart, se.easeInQuint, se.easeInSine, se.easeOut, se.easeOutBack, se.easeOutCirc, se.easeOutCubic, se.easeOutExpo, se.easeOutQuad, se.easeOutQuart, se.easeOutQuint, se.easeOutSine, se.elegantSlowStartEnd, se.linear, se.stepEnd, se.stepStart; var ue = t(function (e, t) { Object.defineProperty(t, "__esModule", { value: !0 }), t.pi = Math.PI, t.tau = 2 * t.pi, t.epsilon = 1e-4, t.c1 = 1.70158, t.c2 = 1.525 * t.c1, t.c3 = t.c1 + 1, t.c4 = t.tau / 3, t.c5 = t.tau / 4.5 }); e(ue); ue.pi, ue.tau, ue.epsilon, ue.c1, ue.c2, ue.c3, ue.c4, ue.c5; var le = t(function (e, t) { Object.defineProperty(t, "__esModule", { value: !0 }), t.abs = Math.abs, t.asin = Math.asin, t.floor = Math.floor, t.cos = Math.cos, t.pow = Math.pow, t.sin = Math.sin, t.sqrt = Math.sqrt }); e(le); le.abs, le.asin, le.floor, le.cos, le.pow, le.sin, le.sqrt; var ce = t(function (e, t) { Object.defineProperty(t, "__esModule", { value: !0 }); var n = function (e, t, n) { return 3 * e * (1 - n) * (1 - n) * n + 3 * t * (1 - n) * n * n + n * n * n }; t.cubicBezier = function (e, t, r, o) { return e < 0 || e > 1 || r < 0 || r > 1 ? function (e) { return e } : function (i) { if (0 === i || 1 === i) return i; var a = 0, s = 1, u = 19; do { var l = .5 * (a + s), c = n(e, r, l); if (le.abs(i - c) < ue.epsilon) return n(t, o, l); c < i ? a = l : s = l } while (--u); return i } } }); e(ce); ce.cubicBezier; var fe = t(function (e, t) { Object.defineProperty(t, "__esModule", { value: !0 }), t.frames = function (e) { var t = 1 / (e - 1); return function (n) { var r = le.floor(n * e) * t; return n >= 0 && r < 0 ? 0 : n <= 1 && r > 1 ? 1 : r } } }); e(fe); fe.frames; var pe = t(function (e, t) { Object.defineProperty(t, "__esModule", { value: !0 }), t.steps = function (e, t) { var n = e / 1, r = "end" === t ? 0 : "start" === t ? 1 : t || 0; return function (e) { return e >= 1 ? 1 : r * n + e - (r * n + e) % n } } }); e(pe); pe.steps; var he = t(function (e, t) { function n(e) { for (var n in e) t.hasOwnProperty(n) || (t[n] = e[n]) } Object.defineProperty(t, "__esModule", { value: !0 }), n(ue), n(se), n(ce), n(fe), n(le), n(pe) }); e(he); var de = t(function (e, t) { Object.defineProperty(t, "__esModule", { value: !0 }), t.ease = he.cubicBezier(.25, .1, .25, .1) }); e(de); de.ease; var ye = t(function (e, t) { Object.defineProperty(t, "__esModule", { value: !0 }), t.easeIn = he.cubicBezier(.42, 0, 1, 1) }); e(ye); ye.easeIn; var me = t(function (e, t) { Object.defineProperty(t, "__esModule", { value: !0 }), t.easeInBack = function (e) { return he.c3 * e * e * e - he.c1 * e * e } }); e(me); me.easeInBack; var ge = t(function (e, t) { Object.defineProperty(t, "__esModule", { value: !0 }), t.easeOutBounce = function (e) { var t = 7.5625, n = 2.75; return e < 1 / n ? t * e * e : e < 2 / n ? t * (e -= 1.5 / n) * e + .75 : e < 2.5 / n ? t * (e -= 2.25 / n) * e + .9375 : t * (e -= 2.625 / n) * e + .984375 } }); e(ge); ge.easeOutBounce; var ve = t(function (e, t) { Object.defineProperty(t, "__esModule", { value: !0 }), t.easeInBounce = function (e) { return 1 - ge.easeOutBounce(1 - e) } }); e(ve); ve.easeInBounce; var be = t(function (e, t) { Object.defineProperty(t, "__esModule", { value: !0 }), t.easeInCirc = function (e) { return 1 - he.sqrt(1 - e * e) } }); e(be); be.easeInCirc; var _e = t(function (e, t) { Object.defineProperty(t, "__esModule", { value: !0 }), t.easeInCubic = function (e) { return e * e * e } }); e(_e); _e.easeInCubic; var xe = t(function (e, t) { Object.defineProperty(t, "__esModule", { value: !0 }), t.easeInElastic = function (e) { return e && 1 !== e ? -1 * he.sin((e - 1.1) * he.tau * 2.5) * he.pow(2, 10 * (e - 1)) : e } }); e(xe); xe.easeInElastic; var Oe = t(function (e, t) { Object.defineProperty(t, "__esModule", { value: !0 }), t.easeInExpo = function (e) { return 0 === e ? 0 : he.pow(2, 10 * e - 10) } }); e(Oe); Oe.easeInExpo; var ke = t(function (e, t) { Object.defineProperty(t, "__esModule", { value: !0 }), t.easeInOut = he.cubicBezier(.42, 0, .58, 1) }); e(ke); ke.easeInOut; var we = t(function (e, t) { Object.defineProperty(t, "__esModule", { value: !0 }), t.easeInOutBack = function (e) { return e < .5 ? he.pow(2 * e, 2) * (2 * (he.c2 + 1) * e - he.c2) / 2 : (he.pow(2 * e - 2, 2) * ((he.c2 + 1) * (2 * e - 2) + he.c2) + 2) / 2 } }); e(we); we.easeInOutBack; var ze = t(function (e, t) { Object.defineProperty(t, "__esModule", { value: !0 }), t.easeInOutBounce = function (e) { return e < .5 ? (1 - ge.easeOutBounce(1 - 2 * e)) / 2 : (1 + ge.easeOutBounce(2 * e - 1)) / 2 } }); e(ze); ze.easeInOutBounce; var Pe = t(function (e, t) { Object.defineProperty(t, "__esModule", { value: !0 }), t.easeInOutCirc = function (e) { return e < .5 ? (1 - he.sqrt(1 - he.pow(2 * e, 2))) / 2 : (he.sqrt(1 - he.pow(-2 * e + 2, 2)) + 1) / 2 } }); e(Pe); Pe.easeInOutCirc; var Te = t(function (e, t) { Object.defineProperty(t, "__esModule", { value: !0 }), t.easeInOutCubic = function (e) { return e < .5 ? 4 * e * e * e : 1 - he.pow(-2 * e + 2, 3) / 2 } }); e(Te); Te.easeInOutCubic; var Ee = t(function (e, t) { Object.defineProperty(t, "__esModule", { value: !0 }), t.easeInOutElastic = function (e) { return e && 1 !== e ? (e *= 2, e < 1 ? he.pow(2, 10 * (e - 1)) * he.sin((e - 1.1) * he.tau / .4) * -.5 : he.pow(2, -10 * (e - 1)) * he.sin((e - 1.1) * he.tau / .4) * .5 + 1) : e } }); e(Ee); Ee.easeInOutElastic; var Ce = t(function (e, t) { Object.defineProperty(t, "__esModule", { value: !0 }), t.easeInOutExpo = function (e) { return 0 === e ? 0 : 1 === e ? 1 : e < .5 ? he.pow(2, 20 * e - 10) / 2 : (2 - he.pow(2, -20 * e + 10)) / 2 } }); e(Ce); Ce.easeInOutExpo; var Me = t(function (e, t) { Object.defineProperty(t, "__esModule", { value: !0 }), t.easeInOutQuad = function (e) { return e < .5 ? 2 * e * e : 1 - he.pow(-2 * e + 2, 2) / 2 } }); e(Me); Me.easeInOutQuad; var Se = t(function (e, t) { Object.defineProperty(t, "__esModule", { value: !0 }), t.easeInOutQuart = function (e) { return e < .5 ? 8 * e * e * e * e : 1 - he.pow(-2 * e + 2, 4) / 2 } }); e(Se); Se.easeInOutQuart; var Ae = t(function (e, t) { Object.defineProperty(t, "__esModule", { value: !0 }), t.easeInOutQuint = function (e) { return e < .5 ? 16 * e * e * e * e * e : 1 - he.pow(-2 * e + 2, 5) / 2 } }); e(Ae); Ae.easeInOutQuint; var je = t(function (e, t) { Object.defineProperty(t, "__esModule", { value: !0 }), t.easeInOutSine = function (e) { return -(he.cos(he.pi * e) - 1) / 2 } }); e(je); je.easeInOutSine; var Ie = t(function (e, t) { Object.defineProperty(t, "__esModule", { value: !0 }), t.easeInQuad = function (e) { return e * e } }); e(Ie); Ie.easeInQuad; var Le = t(function (e, t) { Object.defineProperty(t, "__esModule", { value: !0 }), t.easeInQuart = function (e) { return e * e * e * e } }); e(Le); Le.easeInQuart; var Ne = t(function (e, t) { Object.defineProperty(t, "__esModule", { value: !0 }), t.easeInQuint = function (e) { return e * e * e * e * e } }); e(Ne); Ne.easeInQuint; var Fe = t(function (e, t) { Object.defineProperty(t, "__esModule", { value: !0 }), t.easeInSine = function (e) { return 1 - he.cos(e * he.pi / 2) } }); e(Fe); Fe.easeInSine; var Re = t(function (e, t) { Object.defineProperty(t, "__esModule", { value: !0 }), t.easeOut = he.cubicBezier(0, 0, .58, 1) }); e(Re); Re.easeOut; var Be = t(function (e, t) { Object.defineProperty(t, "__esModule", { value: !0 }), t.easeOutBack = function (e) { return 1 + he.c3 * he.pow(e - 1, 3) + he.c1 * he.pow(e - 1, 2) } }); e(Be); Be.easeOutBack; var He = t(function (e, t) { Object.defineProperty(t, "__esModule", { value: !0 }), t.easeOutCirc = function (e) { return he.sqrt(1 - (e - 1) * (e - 1)) } }); e(He); He.easeOutCirc; var De = t(function (e, t) { Object.defineProperty(t, "__esModule", { value: !0 }), t.easeOutCubic = function (e) { return 1 - he.pow(1 - e, 3) } }); e(De); De.easeOutCubic; var $e = t(function (e, t) { Object.defineProperty(t, "__esModule", { value: !0 }), t.easeOutElastic = function (e) { if (!e || 1 === e) return e; var t, n = .1; return !n || n < 1 ? (n = 1, t = .1) : t = .4 * Math.asin(1 / n) / he.tau, n * he.pow(2, -10 * e) * he.sin((e - t) * he.tau / .4) + 1 } }); e($e); $e.easeOutElastic; var Ve = t(function (e, t) { Object.defineProperty(t, "__esModule", { value: !0 }), t.easeOutExpo = function (e) { return 1 === e ? 1 : 1 - he.pow(2, -10 * e) } }); e(Ve); Ve.easeOutExpo; var Ge = t(function (e, t) { Object.defineProperty(t, "__esModule", { value: !0 }), t.easeOutQuad = function (e) { return 1 - (1 - e) * (1 - e) } }); e(Ge); Ge.easeOutQuad; var Ue = t(function (e, t) { Object.defineProperty(t, "__esModule", { value: !0 }), t.easeOutQuart = function (e) { return 1 - he.pow(1 - e, 4) } }); e(Ue); Ue.easeOutQuart; var Ye = t(function (e, t) { Object.defineProperty(t, "__esModule", { value: !0 }), t.easeOutQuint = function (e) { return 1 - he.pow(1 - e, 5) } }); e(Ye); Ye.easeOutQuint; var Ze = t(function (e, t) { Object.defineProperty(t, "__esModule", { value: !0 }), t.easeOutSine = function (e) { return he.sin(e * he.pi / 2) } }); e(Ze); Ze.easeOutSine; var Qe = t(function (e, t) { Object.defineProperty(t, "__esModule", { value: !0 }), t.linear = function (e) { return e } }); e(Qe); Qe.linear; var qe = t(function (e, t) { Object.defineProperty(t, "__esModule", { value: !0 }), t.stepEnd = he.steps(1, 0) }); e(qe); qe.stepEnd; var We = t(function (e, t) { Object.defineProperty(t, "__esModule", { value: !0 }), t.stepStart = he.steps(1, 1) }); e(We); We.stepStart; var Ke = t(function (e, t) { function n(e) { for (var n in e) t.hasOwnProperty(n) || (t[n] = e[n]) } Object.defineProperty(t, "__esModule", { value: !0 }), n(de), n(ye), n(me), n(ve), n(be), n(_e), n(xe), n(Oe), n(ke), n(we), n(ze), n(Pe), n(Te), n(Ee), n(Ce), n(Me), n(Se), n(Ae), n(je), n(Ie), n(Le), n(Ne), n(Fe), n(Re), n(Be), n(ge), n(He), n(De), n($e), n(Ve), n(Ge), n(Ue), n(Ye), n(Ze), n(Qe), n(qe), n(We) }); e(Ke); var Xe = t(function (e, t) { Object.defineProperty(t, "__esModule", { value: !0 }), t.css = se, t.cubicBezier = he.cubicBezier, t.frames = he.frames, t.steps = he.steps, t.default = Ke }); e(Xe); Xe.css, Xe.cubicBezier, Xe.frames, Xe.steps; var Je = t(function (e, t) { function n(e, t, n) { var r = t - e; return 0 === r ? i : i - (t - n) / r } function r(e, t, n) { return e + (t - e) * n } function o(e, t, o, a, s, u) { var l = n(o, a, s); return l > i && (l = i), u && (l = u(l)), r(e, t, l) } Object.defineProperty(t, "__esModule", { value: !0 }); var i = 1, a = /^\d+(\.\d+)?%$/, s = function (e) { return "string" == typeof e }; t.interpolate = function (e, n, r, i, u, l) { if (u === l) return u; var c; if ("function" != typeof (c = "string" == typeof n ? Xe.default[n] : Array.isArray(n) ? ce.cubicBezier(n[0], n[1], n[2], n[3]) : n)) return u; if (Array.isArray(u) && Array.isArray(l)) { for (var f = [], p = 0; p < u.length; p++)f[p] = t.interpolate(e, c, r, i, u[p], l[p]); return f } if (u && "object" == typeof u && l && "object" == typeof l) { var h = {}; for (var d in u) h[d] = t.interpolate(e, c, r, i, u[d], l[d]); return h } return "number" == typeof u && "number" == typeof l ? o(u, l, r, i, e, c) : s(u) && s(l) && a.test(u) && a.test(l) ? o(parseFloat(u), parseFloat(l), r, i, e, c) + "%" : u } }); e(Je); Je.interpolate; var et = t(function (e, t) { Object.defineProperty(t, "__esModule", { value: !0 }); var n = function () { function e(e) { this.component = e, this.transitions = {}, this.clock = this.component.getClock(), this.states = this.component.state } return e.prototype.setState = function (e, t) { var n, r, o, i; if (!t) { for (var a in e) delete this.transitions[a]; for (var a in e) (l = this.states[a]) !== (c = e[a]) && this.component.callHook("state:change", { from: l, to: c, state: a }); return void this.setStates(e) } var s = this.clock.getTime(), u = { duration: 0, curve: T.Curve.Linear, queue: !1 }; Object.assign(u, t); for (var a in e) if (a in this.states) { var l = this.states[a], c = e[a]; u.queue && this.transitions[a] ? (l !== c && this.component.callHook("state:change", { from: l, to: c, queued: !0, state: a, duration: u.duration }), this.transitions[a].push({ transitionParameter: u, transitionEnd: (n = {}, n[a] = c, n), transitionStart: (r = {}, r[a] = l, r), startTime: s, endTime: s + u.duration, duration: u.duration })) : (l !== c && this.component.callHook("state:change", { from: l, to: c, started: !0, state: a, duration: u.duration }), this.transitions[a] = [{ transitionParameter: u, transitionEnd: (o = {}, o[a] = c, o), transitionStart: (i = {}, i[a] = l, i), startTime: s, endTime: s + u.duration, duration: u.duration }]) } this.tickStateTransitions() }, e.prototype.setStates = function (e) { for (var t in e) this.states[t] = e[t] }, e.prototype.isExpired = function (e, t) { return this.clock.getTime() >= e.endTime }, e.prototype.tickStateTransitions = function () { var e, t = this.clock.getTime(), n = {}; for (var r in this.transitions) if (this.transitions[r].length > 0) { var o = this.transitions[r][0]; this.isExpired(o, t) ? (this.component.callHook("state:change", { finished: !0, state: r, to: o.transitionEnd[r], duration: o.duration }), Object.assign(n, o.transitionEnd), this.transitions[r].splice(0, 1), o.transitionParameter.onComplete instanceof Function && o.transitionParameter.onComplete(), this.transitions[r].length > 0 ? (this.component.callHook("state:change", { started: !0, state: r, to: this.transitions[r][0].transitionEnd[r] }), this.transitions[r][0].transitionStart = (e = {}, e[r] = n[r], e), this.transitions[r][0].startTime = t, this.transitions[r][0].endTime = t + this.transitions[r][0].duration) : delete this.transitions[r]) : Object.assign(n, Je.interpolate(t, o.transitionParameter.curve, o.startTime, o.endTime, o.transitionStart, o.transitionEnd)) } this.setStates(n) }, e.prototype.deleteAllStateTransitions = function () { this.transitions = {} }, Object.defineProperty(e.prototype, "numQueuedTransitions", { get: function () { var e = 0; for (var t in this.transitions) e += this.transitions[t].length; return e }, enumerable: !0, configurable: !0 }), e }(); t.default = n }); e(et); var tt = t(function (e, t) { Object.defineProperty(t, "__esModule", { value: !0 }); var n = function (e, t) { for (var n = 0; n < e.length; n++) { var r = n + 1, o = e[n], i = e[r]; if (o <= t) { if (i > t) return [o, i]; if (r >= e.length) return [o] } } }; t.calculateValue = function (e, t, o) { o || (o = D.getSortedKeyframes(e)); var i = n(o, t); if (i && !(i.length < 1)) { var a = i[0], s = e[a], u = i[1], l = e[u]; return r(a, s, u, l, t) } }; var r = function (e, t, n, r, o) { var i = t.value; return t.curve && r ? Je.interpolate(o, t.curve, e, n, i, r.value) : i } }); e(tt); tt.calculateValue; var nt = t(function (e, t) { function n(e, t) { var n = t[0], r = t[1], o = t[2], i = t[3], a = t[4], s = t[5], u = t[6], l = t[7], c = t[8], f = t[9], p = t[10], h = t[11], d = t[12], y = t[13], m = t[14], g = t[15], v = n * s - r * a, b = n * u - o * a, _ = n * l - i * a, x = r * u - o * s, O = r * l - i * s, k = o * l - i * u, w = c * y - f * d, z = c * m - p * d, P = c * g - h * d, T = f * m - p * y, E = f * g - h * y, C = p * g - h * m, M = v * C - b * E + _ * T + x * P - O * z + k * w; return M ? (M = 1 / M, e[0] = (s * C - u * E + l * T) * M, e[1] = (o * E - r * C - i * T) * M, e[2] = (y * k - m * O + g * x) * M, e[3] = (p * O - f * k - h * x) * M, e[4] = (u * P - a * C - l * z) * M, e[5] = (n * C - o * P + i * z) * M, e[6] = (m * _ - d * k - g * b) * M, e[7] = (c * k - p * _ + h * b) * M, e[8] = (a * E - s * P + l * w) * M, e[9] = (r * P - n * E - i * w) * M, e[10] = (d * O - y * _ + g * v) * M, e[11] = (f * _ - c * O - h * v) * M, e[12] = (s * z - a * T - u * w) * M, e[13] = (n * T - r * z + o * w) * M, e[14] = (y * b - d * x - m * v) * M, e[15] = (c * x - f * b + p * v) * M, e) : null } Object.defineProperty(t, "__esModule", { value: !0 }), t.default = n }); e(nt); var rt = t(function (e, t) { function i(e) { return e && typeof e === P && e.template } function u(e) { if (!e) throw new Error("Empty template not allowed"); if (typeof e === P) return e.attributes ? e.attributes[C] || console.warn("[haiku core] bytecode template has no id") : console.warn("[haiku core] bytecode template has no attributes"), e.elementName || console.warn("[haiku core] unexpected bytecode template format"), e; throw new Error("Unknown bytecode template format") } var l = n && n.__extends || function () { var e = function (t, n) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]) })(t, n) }; return function (t, n) { function r() { this.constructor = t } e(t, n), t.prototype = null === n ? Object.create(n) : (r.prototype = n.prototype, new r) } }(), c = n && n.__assign || function () { return (c = Object.assign || function (e) { for (var t, n = 1, r = arguments.length; n < r; n++) { t = arguments[n]; for (var o in t) Object.prototype.hasOwnProperty.call(t, o) && (e[o] = t[o]) } return e }).apply(this, arguments) }; Object.defineProperty(t, "__esModule", { value: !0 }); var f = 2147483646, p = { div: "div", svg: "svg" }, h = "HAIKU|CDN|PROJECT|ROOT".split("|").join("_"), d = { "controlFlow.placeholder": !0 }, y = function (e) { return e && 0 !== e.length ? Array.isArray(e) ? e : Z.default.pathToPoints(e) : [] }, m = function (e) { return "string" == typeof e ? e : Z.default.pointsToPath(e) }, g = function (e) { return R.default.parseString(e) }, v = function (e) { return R.default.generateString(e) }, b = function (e) { return Array.isArray(e) ? e : Z.default.polyPointsStringToPoints(e) }, x = function (e) { return "string" == typeof e ? e : Z.default.pointsToPolyString(e) }, w = function (e) { return "function" == typeof e }, z = {}; t.VERSION = _.version; var P = "object", C = "haiku-id", j = "Default", I = { name: "elementName", attributes: "attributes", children: "children" }, N = function (e) { function n(n, r, o, i, a) { var s = e.call(this) || this; if (s.parsedValueClusters = {}, s.needsExpand = !0, s.patches = [], n.template || (console.warn("[haiku core] adding missing template object"), n.template = { elementName: "div", attributes: {}, children: [] }), n.timelines || (console.warn("[haiku core] adding missing timelines object"), n.timelines = {}), n.timelines[j] || (console.warn("[haiku core] adding missing default timeline"), n.timelines[j] = {}), !r) throw new Error("Component requires a context"); if (!i) throw new Error("Config options required"); if (!i.seed) throw new Error("Seed value must be provided"); if (s.PLAYER_VERSION = t.VERSION, s.CORE_VERSION = t.VERSION, s.context = r, s.container = a, s.host = o, s.guests = {}, s.bytecode = i.hotEditingMode ? n : t.clone(n, s), u(s.bytecode.template), s.bytecode.methods) for (var l in s.bytecode.methods) s[l] || (s[l] = s.bytecode.methods[l].bind(s)); s._states = {}, s.state = {}, s.stateTransitionManager = new et.default(s), s.hooks = {}, s.helpers = Object.assign({}, s.bytecode.helpers, { data: {} }), s.assignConfig(i), s.doesNeedFullFlush = !1, s.doAlwaysFlush = !1, s.doPreserve3d = !0 === s.config.preserve3d, s.registeredEventHandlers = {}, s.lastHoveredElement = null, s.isDeactivated = !1, s.isSleeping = !1, s.helpers = { data: {} }; var p = Object.assign({}, A.default.helpers, s.getHelpers()); for (var h in p) s.helpers[h] = p[h]; s.helpers.now = function () { return s.isLiveMode() ? (s.config.timestamp || 1) + (s.helpers.data.lastTimelineTime || 1) : 1 }, s.helpers.rand = function () { if (s.isLiveMode()) { var e = [s.helpers.data.lastTimelineName, s.helpers.data.lastTimelineTime, s.helpers.data.lastPropertyName, s.helpers.data.lastFlexId].join("|"), t = s.config.seed + "@" + e; return (Pe(t) + 1) % f / f } return 1 }, s.helpers.find = function (e) { return s.querySelectorAll(e) }; var d = { attrsHyphToCamel: t.ATTRS_HYPH_TO_CAMEL, mutations: i.hotEditingMode ? void 0 : { referenceUniqueness: i.hotEditingMode ? void 0 : Math.random().toString(36).slice(2), haikuRoot: s.getProjectRootPathWithTerminatingSlash() } }; try { ae.runMigrationsPrePhase(s, d) } catch (e) { console.warn("[haiku core] caught error during migration pre-phase", e) } s.render(c({}, s.config)); try { ae.runMigrationsPostPhase(s, d, t.VERSION) } catch (e) { console.warn("[haiku core] caught error during migration post-phase", e) } return s.hydrateMutableTimelines(), s.host ? s.routeEventToHandlerAndEmitWithoutBubbling(O.GLOBAL_LISTENER_KEY, "component:did-initialize", [s]) : s.routeEventToHandlerAndEmit(O.GLOBAL_LISTENER_KEY, "component:did-initialize", [s]), s._bytecode = s.bytecode, s } return l(n, e), n.prototype.markHorizonElement = function (e) { e && e.attributes && (e.__horizon = !0) }, n.prototype.isHorizonElement = function (e) { return !(!e || !e.attributes) && e.__horizon }, n.prototype.isLiveMode = function () { return r.isLiveMode(this.config.interactionMode) }, n.prototype.isEditMode = function () { return !this.isLiveMode() }, n.prototype.registerGuest = function (e) { this.guests[e.getId()] = e }, n.prototype.visitGuestHierarchy = function (e) { e(this, this.$id, this.host); for (var t in this.guests) this.guests[t].visitGuestHierarchy(e) }, n.prototype.visitGuests = function (e) { for (var t in this.guests) e(this.guests[t], t) }, n.prototype.callRemount = function (e, t) { var n = this; void 0 === t && (t = !1), this.visitGuestHierarchy(function (e) { e === n ? e.routeEventToHandlerAndEmit(O.GLOBAL_LISTENER_KEY, "component:will-mount", [e]) : e.routeEventToHandlerAndEmitWithoutBubbling(O.GLOBAL_LISTENER_KEY, "component:will-mount", [e]) }), e && this.assignConfig(e), t || (this.markForFullFlush(), this.clearCaches(null)); var r = this.getTimelines(); for (var o in r) { var i = r[o]; this.config.autoplay ? o === j && (i.isPaused() || i.play({ skipMarkForFullFlush: t })) : i.pause() } this.context.contextMount(), this.visitGuestHierarchy(function (e) { e === n ? e.routeEventToHandlerAndEmit(O.GLOBAL_LISTENER_KEY, "component:did-mount", [e]) : e.routeEventToHandlerAndEmitWithoutBubbling(O.GLOBAL_LISTENER_KEY, "component:did-mount", [e]) }) }, n.prototype.destroy = function () { var t = this; e.prototype.destroy.call(this); var n = this.getTimelines(); for (var r in n) n[r].destroy(); this.visitGuestHierarchy(function (e) { e !== t && e.destroy() }), this.visitDescendants(function (e) { e.destroy() }) }, n.prototype.callUnmount = function () { var e = this, t = this.getTimelines(); for (var n in t) t[n].pause(); this.context.contextUnmount(), this.visitGuestHierarchy(function (t) { t === e ? t.routeEventToHandlerAndEmit(O.GLOBAL_LISTENER_KEY, "component:will-unmount", [t]) : t.routeEventToHandlerAndEmitWithoutBubbling(O.GLOBAL_LISTENER_KEY, "component:will-unmount", [t]) }) }, n.prototype.assignConfig = function (e) { this.config = o.default.build(this.config || {}, e || {}), this.host && this.context.assignConfig(this.config, { skipComponentAssign: !0 }); var t = this.getTimelines(); for (var n in t) t[n].assignOptions(this.config); return this.bindStates(), k.default(this.hooks, this.config.hooks), k.default(this.helpers, this.config.helpers), k.default(this.bytecode.timelines, this.config.timelines), this }, n.prototype.set = function (e, t) { return this.callHook("state:change", { state: e, from: this.state[e], to: t }), this.state[e] = t, this }, n.prototype.get = function (e) { return this.state[e] }, n.prototype.setState = function (e, t) { return e && "object" == typeof e ? (this.stateTransitionManager.setState(e, t), this) : this }, n.prototype.getStates = function () { return this.state }, n.prototype.clearCaches = function (e) { void 0 === e && (e = {}), this.cacheClear(), this.needsExpand = !0, e.clearStates && this.clearStates(), this.hydrateMutableTimelines(), this.parsedValueClusters = {}; var t = this.fetchTimelines(); for (var n in t) t[n].cacheClear() }, n.prototype.cacheNodeWithSelectorKey = function (e) { if (e && "object" == typeof e && e.attributes && e.attributes[C]) { var t = "haiku:" + e.attributes[C], n = this.nodesCacheKey(t), r = this.cacheGet(n) || []; -1 === r.indexOf(e) && r.push(e), this.cacheSet(n, r) } }, n.prototype.clearStates = function () { this._states = {}, this.bindStates() }, n.prototype.getClock = function () { return this.context.clock }, n.prototype.getTemplate = function () { return this.bytecode.template }, n.prototype.getHelpers = function () { return this.bytecode.helpers }, n.prototype.getTimelines = function () { var e = this; return this.cacheFetch("getTimelines", function () { return e.fetchTimelines() }) }, n.prototype.fetchTimelines = function () { for (var e = Object.keys(this.bytecode.timelines), t = 0; t < e.length; t++) { var n = e[t]; n && (L.default.where({ name: n, component: this })[0] || L.default.create(this, n, this.config)) } for (var r = {}, o = L.default.where({ component: this }), i = 0; i < o.length; i++) { var a = o[i]; r[a.getName()] = a } return r }, n.prototype.getTimeline = function (e) { return this.getTimelines()[e] }, n.prototype.fetchTimeline = function (e, t) { var n = this.getTimeline(e); return n || L.default.create(this, e, this.config) }, n.prototype.getDefaultTimeline = function () { return this.getTimelines()[j] }, n.prototype.stopAllTimelines = function () { var e = this.getTimelines(); for (var t in e) this.stopTimeline(t) }, n.prototype.startAllTimelines = function () { var e = this.getTimelines(); for (var t in e) this.startTimeline(t) }, n.prototype.startTimeline = function (e) { var t = this.getTimelineDescriptor(e), n = this.fetchTimeline(e, t); n && n.start() }, n.prototype.stopTimeline = function (e) { var t = this.getTimelineDescriptor(e), n = this.fetchTimeline(e, t); n && n.stop() }, n.prototype.gotoAndPlay = function (e, t) { void 0 === t && (t = "fr"), this.getDefaultTimeline().gotoAndPlay(e, t) }, n.prototype.gotoAndStop = function (e, t) { void 0 === t && (t = "fr"), this.getDefaultTimeline().gotoAndStop(e, t) }, n.prototype.pause = function () { this.getDefaultTimeline().pause() }, n.prototype.stop = function () { this.getDefaultTimeline().stop() }, n.prototype.seek = function (e, t) { void 0 === t && (t = "fr"), this.getDefaultTimeline().seek(e, t) }, n.prototype.start = function () { this.getDefaultTimeline().start() }, n.prototype.play = function (e) { void 0 === e && (e = {}), this.getDefaultTimeline().play() }, n.prototype.getTimelineDescriptor = function (e) { return this.bytecode.timelines[e] }, n.prototype.getInjectables = function () { var e = {}; k.default(e, this.getSummonablesSchema()); for (var t in this._states) { var n = this._states[t] && this._states[t].type; n || (n = typeof this._states[t]), e[t] = n } return e }, n.prototype.deactivate = function () { this.isDeactivated = !0 }, n.prototype.activate = function () { this.isDeactivated = !1 }, n.prototype.sleepOn = function () { this.isSleeping = !0 }, n.prototype.sleepOff = function () { this.isSleeping = !1 }, n.prototype.dump = function () { return this.getBytecodeMetadata().relpath + ":" + this.getComponentId() }, n.prototype.getBytecodeMetadata = function () { return this.bytecode.metadata }, n.prototype.getBytecodeRelpath = function () { var e = this.getBytecodeMetadata(); return e && e.relpath }, n.prototype.getBytecodeProject = function () { var e = this.getBytecodeMetadata(); return e && e.project }, n.prototype.getBytecodeOrganization = function () { var e = this.getBytecodeMetadata(); return e && e.organization }, n.prototype.getAddressableProperties = function (e) { var t = this; if (void 0 === e && (e = {}), !this.bytecode.states) return e; var n = this; for (var r in this.bytecode.states) !function (r) { var o = n.bytecode.states[r]; e[r] = { name: r, type: "state", prefix: r, suffix: void 0, fallback: o.value, typedef: o.type, mock: o.mock, target: n, value: function () { return t.state[r] } } }(r); return e }, n.prototype.bindStates = function () { var e = k.default({}, this.bytecode.states, this.config.states); for (var t in e) { var n = e[t]; n && void 0 !== n.value ? this._states.hasOwnProperty(t) && !this.config.states.hasOwnProperty(t) || (this._states[t] = n.value, this.defineSettableState(n, t)) : console.error("Property `" + t + "` cannot be undefined; use null for empty states") } }, n.prototype.defineSettableState = function (e, t) { var n = this; Object.defineProperty(this.state, t, { configurable: !0, enumerable: !0, get: function () { return n._states[t] }, set: function (r) { return e.setter ? n._states[t] = e.setter.call(n, r) : n._states[t] = r, n.isDeactivated || n.emit("state:set", t, n._states[t]), n._states[t] } }) }, n.prototype.allEventHandlers = function () { return k.default({}, this.bytecode.eventHandlers, this.config.eventHandlers) }, n.prototype.eachEventHandler = function (e) { var t = this.allEventHandlers(); for (var n in t) for (var r in t[n]) { var o = t[n][r]; o && o.handler && e(n, r, o) } }, n.prototype.routeEventToHandler = function (e, t, n) { var r = this; this.isDeactivated || this.eachEventHandler(function (o, i, a) { var s = a.handler; if (t === i && (e === o || e === O.GLOBAL_LISTENER_KEY)) return void r.callEventHandler(o, i, s, n) }) }, n.prototype.setHook = function (e, t) { this.hooks[e] = t }, n.prototype.callHook = function (e) { for (var t = [], n = 1; n < arguments.length; n++)t[n - 1] = arguments[n]; var r; "function" == typeof this.hooks[e] && (r = this.hooks)[e].apply(r, t) }, n.prototype.callEventHandler = function (e, t, n, r) { if (this.isLiveMode() || this.bytecode.options && this.bytecode.options.editModeEvents && this.bytecode.options.editModeEvents[t]) { this.callHook("action:before", this, t, e, r); try { n.apply(this, [this].concat(r)) } catch (e) { B.default(e) } this.callHook("action:after", this, t, e, r) } }, n.prototype.routeEventToHandlerAndEmit = function (e, t, n) { this.isDeactivated || (this.routeEventToHandler(e, t, n), this.emit.apply(this, [t].concat(n))) }, n.prototype.routeEventToHandlerAndEmitWithoutBubbling = function (e, t, n) { this.isDeactivated || (this.routeEventToHandler(e, t, n), this.emitWithoutBubbling.apply(this, [t].concat(n))) }, n.prototype.routeEventToHandlerAndEmitWithoutBubblingAndWithoutGlobalHandlers = function (e, t, n) { this.isDeactivated || (this.routeEventToHandler(e, t, n), this.emitToListeners(t, n), this.emitToGenericListeners(t, n)) }, n.prototype.send = function (e, t) { for (var n = this, r = [], o = 2; o < arguments.length; o++)r[o - 2] = arguments[o]; return "emit" === e || "up" === e || "parent" === e || "<" === e ? void this.emit.apply(this, [t].concat(r)) : "down" === e || "children" === e || ">" === e ? void this.visitGuests(function (e) { e.emitWithoutBubbling.apply(e, [t].concat(r)) }) : "sideways" === e || "siblings" === e || "~" === e ? void (this.host && this.host.visitGuests(function (e) { e !== n && e.emitWithoutBubbling.apply(e, [t].concat(r)) })) : void ("*" === e && this.top.visitGuestHierarchy(function (e) { e !== n && e.emitWithoutBubbling.apply(e, [t].concat(r)) })) }, n.prototype.emitToAncestors = function (e) { for (var n = [], r = 1; r < arguments.length; r++)n[r - 1] = arguments[r]; this.host && (this.host.routeEventToHandler("haiku:" + t.getNodeCompositeId(this.parentNode), e, [this].concat(n)), this.host.routeEventToHandler("haiku:" + t.getNodeCompositeId(this.host), e, [this].concat(n))) }, n.prototype.emitWithoutBubbling = function (e) { for (var t = [], n = 1; n < arguments.length; n++)t[n - 1] = arguments[n]; this.routeEventToHandler(O.GLOBAL_LISTENER_KEY, e, t), this.emitToListeners(e, t), this.emitToGenericListeners(e, t) }, n.prototype.markForFullFlush = function () { this.doesNeedFullFlush = !0 }, n.prototype.unmarkForFullFlush = function () { this.doesNeedFullFlush = !1 }, n.prototype.shouldPerformFullFlush = function () { return this.doesNeedFullFlush || this.doAlwaysFlush }, n.prototype.expandIfNeeded = function () { this.needsExpand && (Y(this.bytecode.template, this.container), this.needsExpand = !1) }, n.prototype.performFullFlushRenderWithRenderer = function (e, t) { return void 0 === t && (t = {}), this.context.getContainer(!0), this.unmarkForFullFlush(), this.needsExpand = !0, this.render(t), e.render(this.container, this.bytecode.template, this) }, n.prototype.performPatchRenderWithRenderer = function (e, t, n) { void 0 === t && (t = {}), e.shouldCreateContainer && this.context.getContainer(!0); var r = this.patch(t, n); e.patch(this, r); for (var o in this.guests) { var i = this.guests[o]; i.shouldPerformFullFlush() && i.target ? i.performFullFlushRenderWithRenderer(e, t) : i.performPatchRenderWithRenderer(e, t, n) } }, n.prototype.render = function (e) { var t = this; if (void 0 === e && (e = {}), this.host && this.host.registerGuest(this), !this.isDeactivated) { this.clearCaches(), S.default.findOrCreateByNode(this.container), this.container.__memory.subcomponent || (this.container.__memory.containee = this), W(this.bytecode.template, this.container, this, this.context, this.host, "div", e, !0), this.applyLocalBehaviors(!1, !1), this.context.renderer.mount && this.eachEventHandler(function (e, n) { var r = e + ":" + n; t.registeredEventHandlers[r] || (t.registeredEventHandlers[r] = !0, t.context.renderer.mountEventListener(t, e, n, function () { for (var r = [], o = 0; o < arguments.length; o++)r[o] = arguments[o]; t.routeEventToHandlerAndEmit(e, n, r) })) }), this.applyGlobalBehaviors(e); for (var n in this.guests) this.guests[n].render(c({}, this.guests[n].config, o.default.buildChildSafeConfig(e))); return this.expandIfNeeded(), this.bytecode.template } }, n.prototype.patch = function (e, n) { if (void 0 === e && (e = {}), void 0 === n && (n = !1), this.isDeactivated) return {}; this.applyLocalBehaviors(!0, n), this.applyGlobalBehaviors(e); var r = {}; this.expandIfNeeded(); for (var o = 0; o < this.patches.length; o++) { var i = this.patches[o]; q(i, i.__memory.parent), r[t.getNodeCompositeId(i)] = i } return this.patches = [], r }, n.prototype.applyGlobalBehaviors = function (e) { void 0 === e && (e = {}), !this.host && e.sizing && K(this.bytecode.template, this.container, e.sizing) && this.patches.push(this.bytecode.template) }, n.prototype.applyLocalBehaviors = function (e, n) { void 0 === n && (n = !1); var r = this.context.clock.getExplicitTime(), o = this.manaTreeCached(); for (var i in this.bytecode.timelines) { var a = this.getTimeline(i); a.executePreUpdateHooks(r); var s = a.getTime(), u = this.bytecode.timelines[i], l = e ? this.mutableTimelines[i] : u; l || (l = {}); for (var c in l) { var f = this.findMatchingNodesByCSSSelector(o, c); if (f && !(f.length < 1)) { var p = l[c]; if (p) for (var h = $(p), y = 0; y < f.length; y++)for (var m = f[y], g = t.getNodeCompositeId(m), v = 0; v < h.length; v++) { var b = h[v]; for (var _ in b) { var x = b[_], O = this.grabValue(i, g, m, _, x, s, e, n), k = O.computedValue, w = O.didValueChangeSinceLastRequest, z = O.didValueOriginateFromExplicitKeyframeDefinition; void 0 !== k && ((!e || w || d[_] || z && (s < a.getMaxTime() || a.isLooping() || a.getLastFrame() !== a.getBoundedFrame())) && (this.applyPropertyToNode(m, _, k, a), e && this.patches.push(m))) } } } } a.executePostUpdateHooks(r) } }, n.prototype.getProjectRootPathWithTerminatingSlash = function () { var e = this.getBytecodeMetadata(); return e && e.root && e.root !== h ? e.root : this.config.folder || e && e.folder || "./" }, n.prototype.applyPropertyToNode = function (e, n, r, o) { var i = e.__memory.instance ? e.__memory.instance : this, a = e.__memory.subcomponent, s = a && a.tagName || e.elementName, u = a && a.getAddressableProperties(), l = u && void 0 !== u[n] && a; l && l.set(n, r); var c = t.getVanity(s, n); if (c) return c(n, e, r, this.context, o, a, i); var f = n.split("."); return "style" === f[0] && f[1] ? X(f[1], e, r) : J(n, e, r) }, n.prototype.findElementsByHaikuId = function (e) { return this.findMatchingNodesByCSSSelector(this.manaTreeCached(), "haiku:" + e) }, n.prototype.nodesCacheKey = function (e) { return "nodes:" + e }, n.prototype.manaTreeCached = function () { var e = this; return this.cacheFetch("flatManaTree", function () { return M.manaFlattenTree(e.bytecode.template, I) }) }, n.prototype.findMatchingNodesByCSSSelector = function (e, t) { for (var n = this.cacheFetch(this.nodesCacheKey(t), function () { return M.cssQueryList(e, t, I) }), r = [], o = 0; o < n.length; o++) { var i = n[o], a = he(i); a.length > 0 ? r.push.apply(r, a) : r.push(i) } return r }, n.prototype.hydrateMutableTimelines = function () { if (this.mutableTimelines = {}, this.bytecode.timelines) for (var e in this.bytecode.timelines) for (var t in this.bytecode.timelines[e]) for (var n in this.bytecode.timelines[e][t]) H.default(this.bytecode.timelines[e][t][n], n) && (this.mutableTimelines[e] || (this.mutableTimelines[e] = {}), this.mutableTimelines[e][t] || (this.mutableTimelines[e][t] = {}), this.mutableTimelines[e][t][n] = this.bytecode.timelines[e][t][n]) }, n.prototype.addHotComponent = function (e) { if (this.bytecode.timelines && this.bytecode.timelines[e.timelineName] && this.bytecode.timelines[e.timelineName][e.selector]) { var t = this.bytecode.timelines[e.timelineName][e.selector]; this.mutableTimelines[e.timelineName] || (this.mutableTimelines[e.timelineName] = {}), this.mutableTimelines[e.timelineName][e.selector] || (this.mutableTimelines[e.timelineName][e.selector] = {}), Object.assign(this.mutableTimelines[e.timelineName][e.selector], e.propertyNames.reduce(function (e, n) { return e[n] = t[n], e }, {})) } }, n.prototype.controlTime = function (e, t) { var n = this.context.clock.getExplicitTime(), r = this.getTimelines(); for (var o in r) o === e && r[e].controlTime(t, n); for (var i in this.guests) this.guests[i].controlTime(e, 0) }, n.prototype.getPropertiesGroup = function (e, t) { return this.bytecode && this.bytecode.timelines && this.bytecode.timelines[e] && this.bytecode.timelines[e]["haiku:" + t] }, n.prototype.tickStateTransitions = function () { this.stateTransitionManager.tickStateTransitions() }, n.prototype.resetStatesToInitialValuesWithTransition = function (e, t) { void 0 === t && (t = T.Curve.Linear); var n = k.default({}, this.bytecode.states, this.config.states); for (var r in n) n[r] = n[r].value; this.stateTransitionManager.setState(n, { curve: t, duration: e }) }, Object.defineProperty(n.prototype, "top", { get: function () { return this.host ? this.host.top : this }, enumerable: !0, configurable: !0 }), n.prototype.getRootComponent = function () { return this.host ? this.host.getRootComponent() : this }, n.prototype.emitFromRootComponent = function (e, t) { this.getRootComponent().emit(e, c({}, t, { componentTitle: this.title })) }, n.prototype.evaluate = function (e) { try { return new Function("$children", "$clock", "$component", "$container", "$context", "$core", "$element", "$host", "$if", "$index", "$mount", "$parent", "$payload", "$placeholder", "$repeat", "$state", "$timeline", "$top", "$tree", "$user", "$window", "return " + e + ";\n")(this.summon("$children"), this.summon("$clock"), this.summon("$component"), this.summon("$container"), this.summon("$context"), this.summon("$core"), this.summon("$element"), this.summon("$host"), this.summon("$if"), this.summon("$index"), this.summon("$mount"), this.summon("$parent"), this.summon("$payload"), this.summon("$placeholder"), this.summon("$repeat"), this.summon("$state"), this.summon("$timeline"), this.summon("$top"), this.summon("$tree"), this.summon("$user"), this.summon("$window")) } catch (t) { console.warn("[haiku core] could not evaluate " + e, t) } }, n.prototype.summon = function (e) { if (z[e] && z[e].summon) { var t = {}; return z[e].summon(t, this, this.bytecode.template, j), t[e] } }, n.prototype.evaluateExpression = function (e, t, n, r, o, i, a) { s.default(e, null); var u; if (!0 === e.specification) u = ke(e, this, this._states); else if (Array.isArray(e.specification.params)) if (e.specification.params.length < 1) u = ke(e, this, this._states); else if (e.specification.params.length < 1) u = ke(e, this, this._states); else { var l = this.summonSummonables(e.specification.params, t, n, r, o, i, a), c = this.getPreviousSummonees(t, n, o, i); ze(c, l) ? (this.cacheSummonees(t, n, o, i, l), u = we(e, this, l)) : u = this.getPreviousEvaluation(t, n, o, i) } else u = ke(e, this, this._states); return Number.isNaN(u) && (u = 1), "number" != typeof u || isFinite(u) || (u = 1), e.specification && !0 !== e.specification && this.cacheEvaluation(t, n, o, i, u), u }, n.prototype.summonSummonables = function (e, t, n, r, o, i, a) { for (var s = [], u = {}, l = 0; l < e.length; l++) { var c = e[l], f = void 0; "string" == typeof c && (z[c] ? (u[c] = void 0, z[c].summon(u, this, r, t), f = u[c]) : f = this.state[c]), void 0 !== f && (s[l] = f) } return s }, n.prototype.fetchParsedValueCluster = function (e, t, n, r, o, i, a) { var s = this.getParseeWithKeys(e, t, r, o); if (!o) return s; var u = i && !a; if (u && this.clusterParseeIsStable(s)) return s; for (var l = 0; l < s.keys.length; l++) { var c = s.keys[l], f = o[c]; u && s.parsee[c] && !s.parsee[c].expression || void 0 === f || (w(f.value) ? s.parsee[c] = { expression: !0, value: this.evaluateExpression(f.value, e, t, n, r, c, o) } : s.parsee[c] = { expression: !1, value: f.value }, f.curve && (s.parsee[c].curve = f.curve)) } if (s.keys.length > 1) { var p = this.getParser(r); if (p || parseFloat(s.parsee[s.keys[0]].value) != s.parsee[s.keys[0]].value || (p = parseFloat), !p) return s; for (var h = 0; h < s.keys.length; h++) { var d = s.keys[h]; s.parsee[d].value = p(s.parsee[d].value) } "d" === r && Q.synchronizePathStructure.apply(void 0, s.keys.map(function (e) { return s.parsee[e].value })) } return s }, n.prototype.generateFinalValueFromParsedValue = function (e, t, n, r, o) { if (void 0 !== o) { var i = this.getGenerator(r); return i ? i(o) : o } }, n.prototype.grabValue = function (e, n, r, o, i, a, s, u) { this.helpers.data = { lastTimelineName: e, lastFlexId: n, lastPropertyName: o, lastTimelineTime: a }; var l = this.fetchParsedValueCluster(e, n, r, o, i, s, u); if (!l) return { computedValue: void 0, didValueChangeSinceLastRequest: !1, didValueOriginateFromExplicitKeyframeDefinition: !1 }; var c; l.parsee[0] || (l.parsee[0] = { value: t.getFallback(r && r.elementName, o) }), void 0 === (c = tt.calculateValue(l.parsee, a, l.keys)) && (c = t.getFallback(r && r.elementName, o)); var f = this.generateFinalValueFromParsedValue(e, n, r, o, c), p = this.cacheGet("values:" + e + "|" + n + "|" + o); return this.cacheSet("values:" + e + "|" + n + "|" + o, f), { computedValue: f, didValueChangeSinceLastRequest: f !== p, didValueOriginateFromExplicitKeyframeDefinition: i && !!i[Math.round(a)] } }, n.prototype.getPreviousSummonees = function (e, t, n, r) { return this.cacheGet("summonees:" + e + "|" + t + "|" + n + "|" + r) }, n.prototype.cacheSummonees = function (e, t, n, r, o) { return this.cacheSet("summonees:" + e + "|" + t + "|" + n + "|" + r, o), o }, n.prototype.getPreviousEvaluation = function (e, t, n, r) { return this.cacheGet("evaluation:" + e + "|" + t + "|" + n + "|" + r) }, n.prototype.cacheEvaluation = function (e, t, n, r, o) { return this.cacheSet("evaluation:" + e + "|" + t + "|" + n + "|" + r, o), o }, n.prototype.getParseeWithKeys = function (e, t, n, r) { return this.parsedValueClusters[e] || (this.parsedValueClusters[e] = {}), this.parsedValueClusters[e][t] || (this.parsedValueClusters[e][t] = {}), this.parsedValueClusters[e][t][n] || (this.parsedValueClusters[e][t][n] = { parsee: {}, keys: r ? D.getSortedKeyframes(r) : [] }), this.parsedValueClusters[e][t][n] }, n.prototype.clusterParseeIsStable = function (e) { return e.keys.every(function (t) { return e.parsee[t] && !e.parsee[t].expression }) }, n.prototype.didChangeValue = function (e, t, n, r, o) { var i = !1, a = this.cacheGet("changes:" + e + "|" + t + "|" + r); return void 0 !== a && a === o || (this.cacheSet("changes:" + e + "|" + t + "|" + r, o), i = !0), i }, n.prototype.getSummonablesSchema = function () { var e = {}; for (var t in z) e[t] = z[t].schema; return e }, n.prototype.transformContextPointToLocalPoint = function (e) { if (this.layoutAncestryMatrices) { var t = E.default.multiplyArrayOfMatrices(this.layoutAncestryMatrices.reverse()), n = nt.default([], t); null !== n && S.default.transformPointInPlace(e, n) } return e }, n.prototype.getParser = function (e) { var t = n.PARSERS[e]; return t && t.parse }, n.prototype.getGenerator = function (e) { var t = n.PARSERS[e]; return t && t.generate }, n.__name__ = "HaikuComponent", n.PLAYER_VERSION = t.VERSION, n.CORE_VERSION = t.VERSION, n.INJECTABLES = z, n.FORBIDDEN_EXPRESSION_TOKENS = { new: !0, this: !0, with: !0, delete: !0, export: !0, extends: !0, super: !0, class: !0, abstract: !0, interface: !0, static: !0, label: !0, goto: !0, private: !0, import: !0, public: !0, do: !0, native: !0, package: !0, transient: !0, implements: !0, protected: !0, throws: !0, synchronized: !0, final: !0, window: !0, document: !0, global: !0, eval: !0, uneval: !0, Function: !0, EvalError: !0, require: !0, module: !0, exports: !0, Module: !0, arguments: !0, callee: !0, prototpye: !0, __proto__: !0, freeze: !0, setPrototypeOf: !0, constructor: !0, defineProperties: !0, defineProperty: !0 }, n.PARSERS = { "style.stroke": { parse: g, generate: v }, "style.fill": { parse: g, generate: v }, "style.backgroundColor": { parse: g, generate: v }, "style.borderBottomColor": { parse: g, generate: v }, "style.borderColor": { parse: g, generate: v }, "style.borderLeftColor": { parse: g, generate: v }, "style.borderRightColor": { parse: g, generate: v }, "style.borderTopColor": { parse: g, generate: v }, "style.floodColor": { parse: g, generate: v }, "style.lightingColor": { parse: g, generate: v }, "style.stopColor": { parse: g, generate: v }, stroke: { parse: g, generate: v }, fill: { parse: g, generate: v }, floodColor: { parse: g, generate: v }, lightingColor: { parse: g, generate: v }, stopColor: { parse: g, generate: v }, backgroundColor: { parse: g, generate: v }, animateColor: { parse: g, generate: v }, feColor: { parse: g, generate: v }, "flood-color": { parse: g, generate: v }, "lighting-color": { parse: g, generate: v }, "stop-color": { parse: g, generate: v }, "background-color": { parse: g, generate: v }, "animate-color": { parse: g, generate: v }, "fe-color": { parse: g, generate: v }, d: { parse: y, generate: m }, points: { parse: b, generate: x } }, n.all = function () { return O.default.getRegistryForClass(n) }, n }(S.default); t.default = N; var F = function (e) { var t = e && e.attributes && e.attributes.id; return e && e.attributes && e.attributes[C] || t }; t.getNodeCompositeId = function (e) { var t = F(e); return e.__memory && e.__memory.repeatee && e.__memory.repeatee.index ? t + "'" + e.__memory.repeatee.index : t }; var $ = function (e) { var t = [{}, {}, {}, {}]; for (var n in e) "controlFlow.if" === n ? t[0][n] = e[n] : "controlFlow.repeat" === n ? t[1][n] = e[n] : "controlFlow.placeholder" === n ? t[2][n] = e[n] : t[3][n] = e[n]; return t }, V = function (e) { return "object" == typeof e && e.__memory && (e.__memory.if && !e.__memory.if.answer || e.__memory.repeater && !!e.__memory.repeater.repeatees) }, G = function (e, t, n) { void 0 === t && (t = []), void 0 === n && (n = !1); for (var r = 0; r < e.length; r++) { var o = e[r]; if (o) if ("object" == typeof o && o.__memory) { if (o.__memory.if && !o.__memory.if.answer) continue; if (n && o.__memory.repeater && o.__memory.repeater.repeatees) { G(o.__memory.repeater.repeatees, t, !1); continue } t.push(o) } else t.push(o) } return t }, U = function (e, t) { if (t) return [t]; if (e.__memory.placeholder) return []; if (e.children && e.children.some(V)) return G(e.children, [], !0) }, Y = function (e, t) { if (e && "object" == typeof e && e.__memory) { var n = e.children, r = e.__memory.subcomponent && e.__memory.subcomponent.bytecode.template, o = U(e, r); if (o && (e.__memory.children = o), e.__memory.children && (n = e.__memory.children), q(e, t), n) for (var i = 0; i < n.length; i++)n[i] !== r && Y(n[i], e) } }, q = function (e, t) { e.layout && (e.layout.computed = S.default.computeLayout(e, t)) }, W = function (e, t, n, r, a, s, u, l) { if (void 0 === u && (u = {}), e && "object" == typeof e) if (S.default.findOrCreateByNode(e), n.cacheNodeWithSelectorKey(e), e.__memory.parent = t, e.__memory.scope = s || "div", e.__memory.context = r, E.default.initializeNodeAttributes(e, l), l && (e.__memory.instance = n, S.default.connectNodeWithElement(e, e.__memory.instance)), "string" != typeof e.elementName && e.elementName) if (i(e.elementName)) if (e.__memory.subcomponent) e.__memory.subcomponent.context = r, e.__memory.subcomponent.host = n, e.__memory.subcomponent.container = e, n.registerGuest(e.__memory.subcomponent), e.__memory.subcomponent.getDefaultTimeline().isPaused() || e.__memory.subcomponent.startTimeline(j); else { var f = o.default.buildChildSafeConfig(c({}, r.config, u)); e.__memory.subcomponent = new N(e.elementName, r, n, c({ loop: !0 }, f), e), n.registerGuest(e.__memory.subcomponent) } else console.warn("[haiku core] cannot hydrate node"); else if (e.children) for (var h = 0; h < e.children.length; h++)W(e.children[h], e, n, r, a, p[e.elementName] || s, u, !1) }, K = function (e, t, n) { var r = e.layout.sizeAbsolute.x, o = e.layout.sizeAbsolute.y, i = Math.ceil(t.layout.computed.size.x), a = Math.ceil(t.layout.computed.size.y), s = i / r, u = a / o; e.attributes.style["transform-origin"] || (e.attributes.style["transform-origin"] = "0% 0% 0px"); var l = !1; switch (n) { case "normal": 1 === e.layout.scale.x && 1 === e.layout.scale.y || (l = !0, e.layout.scale.x = e.layout.scale.y = 1); break; case "stretch": s !== e.layout.scale.x && (l = !0, e.layout.scale.x = s), u !== e.layout.scale.y && (l = !0, e.layout.scale.y = u); break; case "contain": case !0: var c = null; ~~(s * r) <= i && ~~(s * o) <= a && (c = s), ~~(u * r) <= i && ~~(u * o) <= a && (null === c ? c = u : u >= c && (c = u)), e.layout.scale.x !== c && (l = !0, e.layout.scale.x = c), e.layout.scale.y !== c && (l = !0, e.layout.scale.y = c); var f = -(c * r - i) / 2, p = -(c * o - a) / 2; e.layout.translation.x !== f && (l = !0, e.layout.translation.x = f), e.layout.translation.y !== p && (l = !0, e.layout.translation.y = p); break; case "cover": var h = null; h = ~~(s * o) >= a ? s : ~~(u * r) >= i ? u : Math.max(s, u), e.layout.scale.x !== h && (l = !0, e.layout.scale.x = h), e.layout.scale.y !== h && (l = !0, e.layout.scale.y = h); var d = -(h * r - i) / 2, y = -(h * o - a) / 2; e.layout.translation.x !== d && (l = !0, e.layout.translation.x = d), e.layout.translation.y !== y && (l = !0, e.layout.translation.y = y) }return l }; t.clone = function (e, n) { if (!e) return e; if ("boolean" == typeof e) return e; if ("number" == typeof e) return e; if ("string" == typeof e) return e; if ("function" == typeof e) { var r = function () { for (var t = [], r = 0; r < arguments.length; r++)t[r] = arguments[r]; return e.call.apply(e, [n].concat(t)) }; for (var o in e) e.hasOwnProperty(o) && (r[o] = t.clone(e[o], n)); return r.__rfo = a.default(e).__function, r } if (Array.isArray(e)) return e.map(function (e) { return t.clone(e, n) }); if ("object" == typeof e && e.constructor === Object) { var i = {}; for (var o in e) e.hasOwnProperty(o) && "__" !== o.slice(0, 2) && ("elementName" === o && "string" != typeof e[o] ? i[o] = e[o] : i[o] = t.clone(e[o], n)); return i } return e }; var X = function (e, t, n) { t.attributes.style[e] = n }, J = function (e, n, r) { var o = t.ATTRS_CAMEL_TO_HYPH[e] || e; n.attributes[o] = r }, ee = function (e) { return !isNaN(parseFloat(e)) && isFinite(e) }, te = function (e) { return e % 1 == 0 }, ne = { name: "type", attributes: "props" }, re = { name: "elementName", attributes: "attributes" }, oe = function (e, t) { if (M.cssMatchOne(e, t, re)) return e; if (M.cssMatchOne(e, t, ne)) return e; var n = e.children || e.props && e.props.children; if (!n) return null; if (Array.isArray(n)) for (var r = 0; r < n.length; r++) { var o = oe(n[r], t); if (o) return o } return "object" == typeof n ? oe(n, t) : void 0 }, ie = function (e, t) { return Array.isArray(e) ? e.map(function (e) { return ie(e, t) })[0] : e && "object" == typeof e ? oe(e, t) : void 0 }, se = function (e, t) { return Array.isArray(e) && ee(t) && te(t) && e[t] ? e[t] : e && "object" == typeof e && "string" == typeof t && e[t] ? e[t] : ie(e, t + "") }, ue = function (e) { return "object" != typeof e ? { Default: e } : e }; t.getVanity = function (e, n) { return e && t.VANITIES[e] && t.VANITIES[e][n] ? t.VANITIES[e][n] : t.VANITIES["*"][n] }; var le = function (e) { e.layout || E.default.initializeNodeLayout(e) }; t.LAYOUT_3D_VANITIES = { shown: function (e, t, n) { le(t), t.layout.shown = n }, opacity: function (e, t, n) { le(t), t.layout.opacity = n }, "position.x": function (e, t, n) { le(t), t.attributes.x = n }, "position.y": function (e, t, n) { le(t), t.attributes.y = n }, "rotation.x": function (e, t, n) { le(t), t.layout.rotation.x = n }, "rotation.y": function (e, t, n) { le(t), t.layout.rotation.y = n }, "rotation.z": function (e, t, n) { le(t), t.layout.rotation.z = n }, "offset.x": function (e, t, n) { le(t), t.layout.offset.x = n }, "offset.y": function (e, t, n) { le(t), t.layout.offset.y = n }, "offset.z": function (e, t, n) { le(t), t.layout.offset.z = n }, "origin.x": function (e, t, n) { le(t), t.layout.origin.x = n }, "origin.y": function (e, t, n) { le(t), t.layout.origin.y = n }, "origin.z": function (e, t, n) { le(t), t.layout.origin.z = n }, "scale.x": function (e, t, n) { le(t), t.layout.scale.x = n }, "scale.y": function (e, t, n) { le(t), t.layout.scale.y = n }, "scale.z": function (e, t, n) { le(t), t.layout.scale.z = n }, "sizeAbsolute.x": function (e, t, n) { le(t), t.layout.sizeAbsolute.x = n }, "sizeAbsolute.y": function (e, t, n) { le(t), t.layout.sizeAbsolute.y = n }, "sizeAbsolute.z": function (e, t, n) { le(t), t.layout.sizeAbsolute.z = n }, "sizeDifferential.x": function (e, t, n) { le(t), t.layout.sizeDifferential.x = n }, "sizeDifferential.y": function (e, t, n) { le(t), t.layout.sizeDifferential.y = n }, "sizeDifferential.z": function (e, t, n) { le(t), t.layout.sizeDifferential.z = n }, "sizeMode.x": function (e, t, n) { le(t), t.layout.sizeMode.x = n }, "sizeMode.y": function (e, t, n) { le(t), t.layout.sizeMode.y = n }, "sizeMode.z": function (e, t, n) { le(t), t.layout.sizeMode.z = n }, "sizeProportional.x": function (e, t, n) { le(t), t.layout.sizeProportional.x = n }, "sizeProportional.y": function (e, t, n) { le(t), t.layout.sizeProportional.y = n }, "sizeProportional.z": function (e, t, n) { le(t), t.layout.sizeProportional.z = n }, "shear.xy": function (e, t, n) { le(t), t.layout.shear.xy = n }, "shear.xz": function (e, t, n) { le(t), t.layout.shear.xz = n }, "shear.yz": function (e, t, n) { le(t), t.layout.shear.yz = n }, "translation.x": function (e, t, n) { le(t), t.layout.translation.x = n }, "translation.y": function (e, t, n) { le(t), t.layout.translation.y = n }, "translation.z": function (e, t, n) { le(t), t.layout.translation.z = n } }, t.VANITIES = { "*": c({}, t.LAYOUT_3D_VANITIES, { "style.WebkitTapHighlightColor": function (e, t, n) { t.attributes.style.webkitTapHighlightColor = n }, content: function (e, t, n, r, o, i, a) { t.__memory.children = [n], a.patches.push(t) }, playback: function (e, t, n, r, o, i, a) { var s = ue(n); for (var u in s) { var l = i && i.getTimeline(u); l && l.setPlaybackStatus(s[u]) } }, "controlFlow.placeholder": function (e, t, n, r, o, i, a) { if (!a.config.hotEditingMode && null !== n && void 0 !== n && ("number" == typeof n || "string" == typeof n)) { var s; if (r.config.children ? (s = r.config.children, Array.isArray(s) || (s = [s])) : r.config.placeholder && (s = r.config.placeholder), s) { var u = se(s, n); null !== u && void 0 !== u && (t.__memory.placeholder || (t.__memory.placeholder = {}), t.__memory.placeholder.value = n, r.config.vanities["controlFlow.placeholder"] ? r.config.vanities["controlFlow.placeholder"](t, u, n, r, o, i, a) : t.__memory.placeholder.surrogate = u) } } }, "controlFlow.repeat": function (e, n, r, o, i, a, s) { var u; if (Array.isArray(r)) u = r; else { if (!ee(r)) return; for (var l = [], c = 0; c < r; c++)l.push({}); u = l } if (!(n.__memory.repeatee && n.__memory.repeatee.index > 0)) { if (n.__memory.repeater) if (n.__memory.repeater.changed) n.__memory.repeater.changed = !1; else if (pe(n.__memory.repeater.instructions, u)) return; if (n.__memory.repeater || (n.__memory.repeater = {}), n.__memory.repeater.instructions = u, s.config.hotEditingMode) return void (u.length > 0 && (n.__memory.repeatee = { instructions: u, index: 0, payload: u[0], source: n }, ce(n, u[0], s, i), s.patches.push(n), Y(n, n.__memory.parent))); n.__memory.repeater.repeatees ? n.__memory.repeater.repeatees.splice(u.length) : n.__memory.repeater.repeatees = [], u.forEach(function (e, r) { var o = 0 === r ? n : n.__memory.repeater.repeatees[r] || t.clone(n, s); W(o, n.__memory.parent, s, s.context, s, n.__memory.scope, s.config, !1), o.__memory.repeatee = { index: r, instructions: u, payload: e, source: n }, ce(o, e, s, i), n.__memory.repeater.repeatees[r] = o }), s.patches.push(n), Y(n, n.__memory.parent) } }, "controlFlow.if": function (e, t, n, r, o, i, a) { if (!a.config.hotEditingMode) { var s = !1 !== n; t.__memory.if && fe(t.__memory.if.answer, s) || (t.__memory.if = { answer: s }, t.__memory.repeater && (t.__memory.repeater.changed = !0), a.markForFullFlush()) } } }) }; var ce = function (e, t, n, r) { for (var o in t) n.applyPropertyToNode(e, o, t[o], r) }, fe = function (e, t) { return e === t }, pe = function (e, t) { if (e === t) return !0; if (e.length !== t.length) return !1; for (var n = !0, r = 0; r < e.length && n; r++) { var o = e[r], i = t[r]; if (o !== i) for (var a in i) if (i[a] !== o[a]) { n = !1; break } } return n }, he = function (e) { var t = []; if (!e.__memory) return t; var n; if (e.__memory.repeatee ? n = e : M.ascend(e, function (e) { e.__memory.repeatee && (n = e) }), n) { var r = n.__memory.repeatee.source; r.__memory.repeater.repeatees && r.__memory.repeater.repeatees.forEach(function (n) { M.visit(n, function (n) { de(e, n) && t.push(n) }) }) } return t }, de = function (e, t) { return e === t || !(!e.attributes[C] || e.attributes[C] !== t.attributes[C]) }; t.getFallback = function (e, n) { if (e) { if (ye[e] && void 0 !== ye[e][n]) return ye[e][n]; if (t.FALLBACKS[e] && void 0 !== t.FALLBACKS[e][n]) return t.FALLBACKS[e][n] } return t.FALLBACKS["*"][n] }; var ye = { svg: { "origin.x": .5, "origin.y": .5, "origin.z": .5 } }, me = E.default.createLayoutSpec(); t.FALLBACKS = { "*": { shown: me.shown, opacity: me.opacity, content: "", "offset.x": me.offset.x, "offset.y": me.offset.y, "offset.z": me.offset.z, "origin.x": me.origin.x, "origin.y": me.origin.y, "origin.z": me.origin.z, "translation.x": me.translation.x, "translation.y": me.translation.y, "translation.z": me.translation.z, "rotation.x": me.rotation.x, "rotation.y": me.rotation.y, "rotation.z": me.rotation.z, "scale.x": me.scale.x, "scale.y": me.scale.y, "scale.z": me.scale.z, "shear.xy": me.shear.xy, "shear.xz": me.shear.xz, "shear.yz": me.shear.yz, "sizeAbsolute.x": me.sizeAbsolute.x, "sizeAbsolute.y": me.sizeAbsolute.y, "sizeAbsolute.z": me.sizeAbsolute.z, "sizeProportional.x": me.sizeProportional.x, "sizeProportional.y": me.sizeProportional.y, "sizeProportional.z": me.sizeProportional.z, "sizeDifferential.x": me.sizeDifferential.x, "sizeDifferential.y": me.sizeDifferential.y, "sizeDifferential.z": me.sizeDifferential.z, "sizeMode.x": me.sizeMode.x, "sizeMode.y": me.sizeMode.y, "sizeMode.z": me.sizeMode.z, "style.overflowX": "hidden", "style.overflowY": "hidden", "style.zIndex": 1, "style.WebkitTapHighlightColor": "rgba(0,0,0,0)", width: 0, height: 0, x: 0, y: 0, r: 0, cx: 0, cy: 0, rx: 0, ry: 0, x1: 0, y1: 0, x2: 0, y2: 0, playback: "loop", "controlFlow.repeat": null, "controlFlow.placeholder": null } }, t.LAYOUT_3D_SCHEMA = { shown: "boolean", opacity: "number", "offset.x": "number", "offset.y": "number", "offset.z": "number", "origin.x": "number", "origin.y": "number", "origin.z": "number", "translation.x": "number", "translation.y": "number", "translation.z": "number", "rotation.x": "number", "rotation.y": "number", "rotation.z": "number", "scale.x": "number", "scale.y": "number", "scale.z": "number", "shear.xy": "number", "shear.xz": "number", "shear.yz": "number", "sizeAbsolute.x": "number", "sizeAbsolute.y": "number", "sizeAbsolute.z": "number", "sizeProportional.x": "number", "sizeProportional.y": "number", "sizeProportional.z": "number", "sizeDifferential.x": "number", "sizeDifferential.y": "number", "sizeDifferential.z": "number", "sizeMode.x": "number", "sizeMode.y": "number", "sizeMode.z": "number" }, t.ATTRS_CAMEL_TO_HYPH = { accentHeight: "accent-height", alignmentBaseline: "alignment-baseline", arabicForm: "arabic-form", baselineShift: "baseline-shift", capHeight: "cap-height", clipPath: "clip-path", clipRule: "clip-rule", colorInterpolation: "color-interpolation", colorInterpolationFilters: "color-interpolation-filters", colorProfile: "color-profile", colorRendering: "color-rendering", dominantBaseline: "dominant-baseline", enableBackground: "enable-background", fillOpacity: "fill-opacity", fillRule: "fill-rule", floodColor: "flood-color", floodOpacity: "flood-opacity", fontFamily: "font-family", fontSize: "font-size", fontSizeAdjust: "font-size-adjust", fontStretch: "font-stretch", fontStyle: "font-style", fontVariant: "font-variant", fontWeight: "font-weight", glyphName: "glyph-name", glyphOrientationHorizontal: "glyph-orientation-horizontal", glyphOrientationVertical: "glyph-orientation-vertical", horizAdvX: "horiz-adv-x", horizOriginX: "horiz-origin-x", imageRendering: "image-rendering", letterSpacing: "letter-spacing", lightingColor: "lighting-color", markerEnd: "marker-end", markerMid: "marker-mid", markerStart: "marker-start", overlinePosition: "overline-position", overlineThickness: "overline-thickness", panose1: "panose-1", paintOrder: "paint-order", pointerEvents: "pointer-events", renderingIntent: "rendering-intent", shapeRendering: "shape-rendering", stopColor: "stop-color", stopOpacity: "stop-opacity", strikethroughPosition: "strikethrough-position", strikethroughThickness: "strikethrough-thickness", strokeDasharray: "stroke-dasharray", strokeDashoffset: "stroke-dashoffset", strokeLinecap: "stroke-linecap", strokeLinejoin: "stroke-linejoin", strokeMiterlimit: "stroke-miterlimit", strokeOpacity: "stroke-opacity", strokeWidth: "stroke-width", textAnchor: "text-anchor", textDecoration: "text-decoration", textRendering: "text-rendering", underlinePosition: "underline-position", underlineThickness: "underline-thickness", unicodeBidi: "unicode-bidi", unicodeRange: "unicode-range", unitsPerEm: "units-per-em", vAlphabetic: "v-alphabetic", vHanging: "v-hanging", vIdeographic: "v-ideographic", vMathematical: "v-mathematical", vectorEffect: "vector-effect", vertAdvY: "vert-adv-y", vertOriginX: "vert-origin-x", vertOriginY: "vert-origin-y", wordSpacing: "word-spacing", writingMode: "writing-mode", xHeight: "x-height" }; var ge = { x: "number", y: "number", z: "number" }; t.ATTRS_HYPH_TO_CAMEL = {}; for (var ve in t.ATTRS_CAMEL_TO_HYPH) t.ATTRS_HYPH_TO_CAMEL[t.ATTRS_CAMEL_TO_HYPH[ve]] = ve; z.$element = { schema: { offset: ge, attributes: {}, tagName: "string", matrix: [], opacity: "number", origin: ge, rotation: ge, scale: ge, shown: "boolean", size: { x: "number", y: "number" }, sizeAbsolute: ge, sizeProportional: ge, translation: ge }, summon: function (e, t, n) { e.$element = S.default.findOrCreateByNode(n) } }, z.$window = { schema: {}, summon: function (e) { e.$window = "undefined" != typeof window ? window : {} } }, z.$mount = { schema: {}, summon: function (e, t) { e.$mount = t.context.renderer.mount } }, z.$timeline = { schema: {}, summon: function (e, t, n, r) { e.$timeline = t.getTimeline(r) } }, z.$clock = { schema: { destroy: "function", getExplicitTime: "function", getFrameDuration: "function", getTime: "function", setTime: "function", isRunning: "function", run: "function", start: "function", assignOptions: "function" }, summon: function (e, t) { e.$clock = t.getClock() } }, z.$core = { schema: { options: o.DEFAULTS, timeline: z.$timeline.schema, clock: z.$clock.schema }, summon: function (e, t, n, r) { e.$core = { component: t, context: t.context, options: t.config, timeline: t.getTimeline(r), clock: t.getClock() } } }, z.$context = { schema: {}, summon: function (e, t) { e.$context = t.context } }, z.$component = { schema: z.$element.schema, summon: function (e, t) { e.$component = t } }, z.$host = { schema: {}, summon: function (e, t) { e.$host = t.host } }, z.$top = { schema: {}, summon: function (e, t) { e.$host = t.top } }, z.$state = { schema: {}, summon: function (e, t) { e.$state = t.state } }, z.$parent = { schema: z.$element.schema, summon: function (e, t, n) { e.$parent = S.default.findOrCreateByNode(n).parent } }, z.$container = { schema: z.$element.schema, summon: function (e, t, n) { var r = S.default.findOrCreateByNode(n); e.$container = r.owner } }, z.$children = { schema: z.$element.schema.children, summon: function (e, t, n) { e.$children = S.default.findOrCreateByNode(n).children } }, z.$tree = { schema: { parent: z.$element.schema, chidren: z.$element.schema.children, component: z.$element.schema, root: z.$element.schema, element: z.$element.schema }, summon: function (e, t, n) { var r = S.default.findOrCreateByNode(n); e.$tree = { element: r, component: t, parent: r.parent, children: r.children, root: r.owner } } }, z.$user = { schema: { mouse: { x: "number", y: "number", down: "boolean", buttons: [] }, mouches: [], keys: {}, touches: [], pan: { x: "number", y: "number" } }, summon: function (e, t, n) { t.isLiveMode() ? (e.$user = t.context.getGlobalUserState(), t.host && Object.assign(e.$user.mouse, t.transformContextPointToLocalPoint(Object.assign({}, e.$user.mouse)))) : e.$user = { mouse: { x: 1, y: 1, down: 0, buttons: [0, 0, 0] }, pan: { x: 0, y: 0 }, keys: {}, touches: [], mouches: [] } } }; var be = function (e) { if (e) return e.__memory.repeatee ? e : be(e.__memory && e.__memory.parent) }, _e = function (e) { if (e) return e.__memory.if ? e : _e(e.__memory && e.__memory.parent) }; z.$flow = { schema: {}, summon: function (e, t, n) { e.$flow || (e.$flow = {}); var r = be(n); e.$flow.repeat = r && r.__memory.repeatee || { instructions: [], payload: {}, source: r, index: 0 }; var o = _e(n); e.$flow.if = o && o.__memory.if || { answer: null }, e.$flow.placeholder = n.__memory.placeholder || { value: null, surrogate: null } } }, z.$repeat = { schema: {}, summon: function (e, t, n) { e.$repeat || (e.$repeat = {}); var r = be(n); e.$repeat = r && r.__memory.repeatee || { instructions: [], payload: {}, source: r, index: 0 } } }, z.$if = { schema: {}, summon: function (e, t, n) { e.$if || (e.$if = {}); var r = _e(n); e.$if = r && r.__memory.if || { answer: null } } }, z.$placeholder = { schema: {}, summon: function (e, t, n) { e.$placeholder || (e.$placeholder = {}), e.$placeholder = n.__memory.placeholder || { value: null, surrogate: null } } }, z.$index = { schema: {}, summon: function (e, t, n) { var r = be(n); e.$index = r && r.__memory.repeatee && r.__memory.repeatee.index || 0 } }, z.$payload = { schema: {}, summon: function (e, t, n) { var r = be(n); e.$payload = r && r.__memory.repeatee && r.__memory.repeatee.payload || {} } }, z.$helpers = { schema: { now: "function", rand: "function", find: "function" }, summon: function (e, t) { e.$helpers = t.helpers } }; var xe = { Infinity: 1 / 0, NaN: NaN, Object: Object, Boolean: Boolean, Math: Math, Date: Date, JSON: JSON, Number: Number, String: String, RegExp: RegExp, Array: Array, isFinite: isFinite, isNaN: isNaN, parseFloat: parseFloat, parseInt: parseInt, decodeURI: decodeURI, decodeURIComponent: decodeURIComponent, encodeURI: encodeURI, encodeURIComponent: encodeURIComponent, Error: Error, ReferenceError: ReferenceError, SyntaxError: SyntaxError, TypeError: TypeError, undefined: void 0 }; for (var Oe in xe) !function (e) { z[e] = { summon: function (t) { t[e] = xe[e] } } }(Oe); var ke = function (e, t, n) { try { return e.call(t, n) } catch (e) { return B.default(e), 1 } }, we = function (e, t, n) { try { return e.apply(t, n) } catch (e) { return B.default(e), 1 } }, ze = function (e, t) { if (Array.isArray(e) && Array.isArray(t)) { if (e.length !== t.length) return !0; for (var n = 0; n < e.length; n++) { if (e[n] && "object" == typeof e[n]) return !0; if (e[n] !== t[n]) return !0 } for (var r = 0; r < e.length; r++) { if (t[r] && "object" == typeof t[r]) return !0; if (t[r] !== e[r]) return !0 } return !1 } if ("object" == typeof e && "object" == typeof t) { if (null === e && null === t) return !1; if (null === e) return !0; if (null === t) return !0; for (var o in e) if (e[o] !== t[o]) return !0; for (var i in t) if (t[i] !== e[i]) return !0; return !1 } return e !== t }, Pe = function (e) { for (var t = 5381, n = e.length; n;)t = 33 * t ^ e.charCodeAt(--n); return t >>> 0 } }); e(rt); rt.VERSION, rt.getNodeCompositeId, rt.clone, rt.getVanity, rt.LAYOUT_3D_VANITIES, rt.VANITIES, rt.getFallback, rt.FALLBACKS, rt.LAYOUT_3D_SCHEMA, rt.ATTRS_CAMEL_TO_HYPH, rt.ATTRS_HYPH_TO_CAMEL; var ot = t(function (e, t) { var r = n && n.__extends || function () { var e = function (t, n) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]) })(t, n) }; return function (t, n) { function r() { this.constructor = t } e(t, n), t.prototype = null === n ? Object.create(n) : (r.prototype = n.prototype, new r) } }(), i = n && n.__assign || function () { return (i = Object.assign || function (e) { for (var t, n = 1, r = arguments.length; n < r; n++) { t = arguments[n]; for (var o in t) Object.prototype.hasOwnProperty.call(t, o) && (e[o] = t[o]) } return e }).apply(this, arguments) }; Object.defineProperty(t, "__esModule", { value: !0 }); var a = _.version, s = function (e) { function t(t, n, r, o, i) { var s = e.call(this) || this; if (!n) throw new Error("Context requires a renderer"); if (!o) throw new Error("Context requires bytecode"); return s.PLAYER_VERSION = a, s.CORE_VERSION = a, s.assignConfig(i || {}, null), s.mount = t, s.mount && !s.mount.haiku && (s.mount.haiku = { context: s }), s.renderer = n, s.mount && s.renderer.initialize && s.renderer.initialize(), s.platform = r, s.tickables = [], s.tickables.push({ performTick: s.tick.bind(s) }), s.config.frame && s.tickables.push({ performTick: s.config.frame }), s.clock = new P.default(s.tickables, s.config.clock || {}), s.clock.run(), s.container = s.renderer.createContainer({ elementName: o, attributes: {}, children: [o.template] }), s.component = new rt.default(o, s, null, s.config, s.container), s.mount && s.renderer.menuize && "disabled" !== s.config.contextMenu && s.renderer.menuize(s.component), s.mount && s.platform && s.platform.location && "localhost" !== s.platform.location.hostname && "0.0.0.0" !== s.platform.location.hostname && s.renderer.mixpanel && s.config.mixpanel && s.renderer.mixpanel(s.config.mixpanel, s.component), s.ticks = 0, s.config.automount && s.component.getClock().start(), s } return r(t, e), t.prototype.getRootComponent = function () { return this.component }, t.prototype.getClock = function () { return this.clock }, t.prototype.contextMount = function () { if (this.unmountedTickables) for (var e = this.unmountedTickables.splice(0), t = 0; t < e.length; t++)this.addTickable(e[t]) }, t.prototype.contextUnmount = function () { this.unmountedTickables = this.tickables.splice(0) }, t.prototype.destroy = function () { e.prototype.destroy.call(this), this.component.destroy(), this.renderer.destroy(), this.clock.destroy() }, t.prototype.addTickable = function (e) { for (var t = !1, n = 0; n < this.tickables.length; n++)if (e === this.tickables[n]) { t = !0; break } t || this.tickables.push(e) }, t.prototype.assignConfig = function (e, t) { this.config = i({}, e), this.clock && this.clock.assignOptions(this.config.clock), this.component && (t && t.skipComponentAssign || this.component.assignConfig(this.config)) }, t.prototype.getContainer = function (e) { return void 0 === e && (e = !1), (e || this.renderer.shouldCreateContainer) && this.renderer.createContainer(this.container), this.container }, t.prototype.performFullFlushRender = function () { this.mount && this.component.performFullFlushRenderWithRenderer(this.renderer, this.config) }, t.prototype.performPatchRender = function (e) { void 0 === e && (e = !1), this.mount && this.component.performPatchRenderWithRenderer(this.renderer, this.config, e) }, t.prototype.updateMountRootStyles = function () { if (this.mount) { var e = this.mount && this.mount.children[0]; e && (this.config.position && e.style.position !== this.config.position && (e.style.position = this.config.position), this.config.overflow ? e.style.overflow = this.config.overflow : (this.config.overflowX && e.style.overflowX !== this.config.overflowX && (e.style.overflowX = this.config.overflowX), this.config.overflowY && e.style.overflowY !== this.config.overflowY && (e.style.overflowY = this.config.overflowY))) } }, t.prototype.tick = function (e) { var t = this; void 0 === e && (e = !1); try { var n = !1; if (!this.component.isDeactivated && !this.component.isSleeping) { var r = this.ticks; this.ticks++ , this.component.visitGuestHierarchy(function (e) { e.tickStateTransitions(), t.component }), this.component.shouldPerformFullFlush() || this.config.forceFlush || r < 1 ? (this.performFullFlushRender(), n = !0) : this.performPatchRender(e), this.updateMountRootStyles(), r < 1 && this.component.callRemount(null, n) } } catch (e) { console.warn("[haiku core] caught error during tick", e), this.component && this.component.deactivate() } }, t.prototype.getGlobalUserState = function () { return this.renderer && this.renderer.getUser && this.renderer.getUser() }, t.createComponentFactory = function (e, n, r, i) { if (!e) throw new Error("A runtime renderer class object is required"); if (!n) throw new Error("A runtime `bytecode` object is required"); var s = o.default.build({ seed: o.default.seed(), timestamp: Date.now() }, n && n.options, r), u = function (r, a) { var l = o.default.build(s, a), c = new e(r, l), f = new t(r, c, i, n, l), p = f.getRootComponent(); return u.bytecode = n, u.renderer = c, u.mount = r, u.context = f, u.component = p, p }; return u.PLAYER_VERSION = a, u.CORE_VERSION = a, u }, t.PLAYER_VERSION = a, t.CORE_VERSION = a, t.__name__ = "HaikuContext", t }(O.default); t.default = s }); e(ot); var it = t(function (e, t) { function n(e) { if (!e) return !1; if (!e.document) return !1; var t, n, r, o = e.CSS; return !!(o && o.supports && o.supports("(transform-style: preserve-3d)")) || (t = e.document.createElement("a"), n = e.document.createElement("a"), t.style.cssText = "display: block; transform-style: preserve-3d; transform-origin: right; transform: rotateY(40deg);", n.style.cssText = "display: block; width: 9px; height: 1px; background: #000; transform-origin: right; transform: rotateY(40deg);", t.appendChild(n), e.document.documentElement.appendChild(t), r = n.getBoundingClientRect(), e.document.documentElement.removeChild(t), r.width && r.width < 4) } Object.defineProperty(t, "__esModule", { value: !0 }), t.default = { hasPreserve3d: n } }); e(it); var at = t(function (e, t) { function n(e) { var t = -1; if (!e) return t; if (!e.navigator) return t; if (!e.navigator.userAgent) return t; if (!e.navigator.appName) return t; if ("Microsoft Internet Explorer" === e.navigator.appName) { var n = e.navigator.userAgent; null !== new RegExp("MSIE ([0-9]{1,}[\\.0-9]{0,})").exec(n) && (t = parseFloat(RegExp.$1)) } else "Netscape" === e.navigator.appName && (t = -1 === e.navigator.appVersion.indexOf("Trident") ? 12 : 11); return t } Object.defineProperty(t, "__esModule", { value: !0 }), t.default = n }); e(at); var st = t(function (e, t) { function n(e) { return !!e && (!!e.navigator && (!!e.navigator.userAgent && /Edge\/\d./i.test(e.navigator.userAgent))) } Object.defineProperty(t, "__esModule", { value: !0 }), t.default = n }); e(st); var ut = t(function (e, t) { function n(e) { return !!e && (!!e.navigator && (!!e.navigator.userAgent && (-1 !== e.navigator.userAgent.indexOf("MSIE") || navigator.appVersion.indexOf("Trident") > 0))) } Object.defineProperty(t, "__esModule", { value: !0 }), t.default = n }); e(ut); var lt = t(function (e, t) { function n(e) { return !!e && (!!e.navigator && (!!e.navigator.userAgent && /iPhone|iPad|iPod|Android/i.test(e.navigator.userAgent))) } Object.defineProperty(t, "__esModule", { value: !0 }), t.default = n }); e(lt); var ct = t(function (e, t) { function n(e) { return "object" != typeof e } Object.defineProperty(t, "__esModule", { value: !0 }), t.default = n }); e(ct); var ft = t(function (e, t) { function n(e, t, n) { if (ct.default(t)) return e; if (t.layout) { var r = t.layout.computed; r ? ("block" !== e.style.display && (e.style.display = "block"), n.config.platform = o, ee.default(e, t, t.layout, r, n)) : "none" !== e.style.display && (e.style.display = "none") } return e } Object.defineProperty(t, "__esModule", { value: !0 }); var r = "undefined" != typeof window && window, o = { hasWindow: !!r, isMobile: lt.default(r), isIE: ut.default(r), isEdge: st.default(r), windowsBrowserVersion: at.default(r), hasPreserve3d: it.default.hasPreserve3d(r) }; t.default = n }); e(ft); var pt = t(function (e, t) { function n(e, t) { return e.className !== t && e.setAttribute("class", t), e } Object.defineProperty(t, "__esModule", { value: !0 }), t.default = n }); e(pt); var ht = t(function (e, t) { function n(e, t, n, r) { if (!r && e.haiku && e.haiku.element && e.haiku.element.attributes && e.haiku.element.attributes.style) for (var o in e.haiku.element.attributes.style) { var i = t[o]; null !== i && void 0 !== i || e.style.removeProperty(o) } for (var a in t) { var s = t[a]; e.haiku.explicitStyles[a] !== s && (e.haiku.explicitStyles[a] = t[a], e.style[a] = t[a]) } return e } Object.defineProperty(t, "__esModule", { value: !0 }), t.default = n }); e(ht); var dt = t(function (e, t) { function n(e, t, n, s) { if (!s && e.haiku && e.haiku.element) for (var l in e.haiku.element.attributes) { var c = e.haiku.element.attributes[l], f = t.attributes[l]; l !== r && (null !== f && void 0 !== f && c === f || e.removeAttribute(l)) } for (var p in t.attributes) { var h = t.attributes[p]; p === r && h && typeof h === o ? Object.keys(h).length > 0 && ht.default(e, h, n, s) : p !== i && p !== a || !h ? Number.isNaN(h) || u(e, t, p, h) : pt.default(e, h) } return e } Object.defineProperty(t, "__esModule", { value: !0 }); var r = "style", o = "object", i = "class", a = "className", s = "http://www.w3.org/1999/xlink", u = function (e, t, n, r) { "xlink:href" === n ? e.getAttributeNS(s, n) !== r && e.setAttributeNS(s, n, r) : e.getAttribute(n) !== r && e.setAttribute(n, r) }; t.default = n }); e(dt); var yt = t(function (e, t) { function n(e, t) { e.style["-webkit-box-shadow"] = "0 1px 4px 0 " + t, e.style["-moz-box-shadow"] = "0 1px 4px 0 " + t, e.style["box-shadow"] = "0 1px 4px 0 " + t } function r(e) { return e + "px" } function o(e) { var t = e.getElementById(s); return t || ((t = e.createElement("div")).setAttribute("id", s), t.style.position = "absolute", t.style.zIndex = 2147483647, n(t, "rgba(10,2,21,0.25)"), t.style.borderRadius = r(3), t.style.display = "none", t.style.backgroundColor = "rgba(255,255,255,0.95)", t.style.overflow = "hidden", t.style.cursor = "default", t.style.fontFamily = "Helvetica, Arial, sans-serif", t.style.fontWeight = "Bold", t.style.fontSize = r(10), t.style.padding = "0 0 7px", t.style.color = "black", t.style.margin = "0", t.style.boxSizing = "content-box", t.style.textDecoration = "none", t.style.fontStyle = "none", e.body.appendChild(t), t) } function i(e, t) { return e.length > t ? e.slice(0, t - 3) + "..." : e } function a(e, t) { function n(e) { return y.textContent = e, y.innerHTML.replace(/[><,{}[\]"']/gi, "") } function a(e, t) { var o = [], a = null; if (m && m.project) { var s = i(n(m.project), 25); m.organization && (s = '"' + s + '" <span style="font-weight:normal;">by</span> ' + i(n(m.organization), 11)), a = '<p style="margin:0;margin-bottom:4px;padding:12px 13px 7px;line-height:12px;text-align:center;border-bottom:1px solid rgba(140,140,140,.14);">' + s + "</p>" } g && m && m.uuid && m.uuid !== p && o.push('<a onMouseOver="this.style.backgroundColor=\'rgba(140,140,140,.07)\'" onMouseOut="this.style.backgroundColor=\'transparent\'" style="display:block;color:black;text-decoration:none;padding: 5px 13px;line-height:12px;" href="https://share.haiku.ai/' + n(m.uuid) + '" target="_blank">' + c + " View on Haiku Community</a>"), v && o.push('<a onMouseOver="this.style.backgroundColor=\'rgba(140,140,140,.07)\'" onMouseOut="this.style.backgroundColor=\'transparent\'" style="display:block;color:black;text-decoration:none;padding: 5px 13px;line-height:12px;" href="https://share.haiku.ai/u/' + n(m.organization + "/" + m.project + "/fork") + '" target="_blank">' + f + " Fork this component</a>"), o.push('<a onMouseOver="this.style.backgroundColor=\'rgba(140,140,140,.07)\'" onMouseOut="this.style.backgroundColor=\'transparent\'" style="display:block;color:black;text-decoration:none;padding: 5px 13px;line-height:12px;" href="https://www.haikuforteams.com" target="_blank">' + l + "  Crafted in Haiku Animator</a>"), o.length < 1 || (d.style.width = "auto", d.style.minWidth = u, d.style.height = "auto", d.style.top = r(t), d.style.left = r(e), d.style.pointerEvents = "auto", d.style.display = "block", d.innerHTML = a ? a + o.join("\n") : o.join("\n")) } function s(e) { 2 === e.button || e.ctrlKey || (d.style.width = r(0), d.style.minWidth = r(0), d.style.height = r(0), d.style.top = r(0), d.style.left = r(0), d.style.pointerEvents = "none", d.style.display = "none") } var h = e.ownerDocument, d = o(h), y = h.createElement("textarea"), m = t.bytecode && t.bytecode.metadata, g = !1, v = !1; if (m && m.project && m.organization && window && window.fetch) try { window.fetch("https://inkstone-edge.haiku.ai/v0/community/" + m.organization + "/" + m.project + "/metadata").then(function (e) { return e.json() }).then(function (e) { g = e.IsPublic, v = e.IsForkable }) } catch (e) { } e.addEventListener("contextmenu", function (e) { e.preventDefault(); var n = e.pageX, r = e.pageY; t.mixpanel && t.mixpanel.track("component:contextmenu"), a(n, r) }), h.addEventListener("click", s) } Object.defineProperty(t, "__esModule", { value: !0 }); var s = "haiku-right-click-menu", u = 167, l = '<svg style="transform:translateY(3px);margin-right:3px;" width="13px" height="13px" viewBox="0 0 9 9" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">    <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">        <g id="menu" transform="translate(-9.000000, -50.000000)" fill-rule="nonzero" fill="#899497">            <g id="favicon" transform="translate(9.000000, 50.000000)">                <path d="M5.74649098,4.70558699 L5.74649098,5.7788098 C5.74649098,5.91256161 5.63820821,6.02098888 5.50463465,6.02098888 C5.46594093,6.02098888 5.42936949,6.0118902 5.39693775,5.99571295 C5.39186133,5.99396865 5.38680829,5.99204493 5.38178599,5.98993877 L2.13374851,4.62783436 C2.06585827,4.62681598 2.00074372,4.59703732 1.95556434,4.54557114 C1.89645814,4.50141795 1.85818531,4.43085101 1.85818531,4.35133305 L1.85818531,1.57454768 C1.85079926,1.56515108 1.8440022,1.55516354 1.83787126,1.54461783 L1.68370002,1.48221012 L0.983781643,1.19888682 L0.983781643,7.82711613 L1.85818531,8.18107016 L1.85818531,5.95344076 C1.85818531,5.94997543 1.858258,5.94652709 1.85840193,5.9430972 C1.85672094,5.90820764 1.86258618,5.87240498 1.87695925,5.83803981 C1.92855792,5.7146704 2.07026431,5.65654454 2.19346932,5.70821207 L5.45803735,7.07733924 L5.52116709,7.10578612 C5.64702981,7.11429403 5.74649098,7.21922045 5.74649098,7.34740828 L5.74649098,7.82711613 L6.61247795,8.17766313 L6.62089465,8.18107016 L6.62089465,4.31849373 L5.74649098,4.70558699 Z M5.26277832,4.81941585 L3.49887951,4.07970322 L2.78717926,4.37673832 L5.26277832,5.41491119 L5.26277832,4.81941585 Z M2.34189798,6.29557771 L2.34189798,8.21792436 L3.21630165,7.86397033 L3.21630165,6.66226962 L2.34189798,6.29557771 Z M2.10489107,8.84091277 C2.10327842,8.84094453 2.10166189,8.84096049 2.10004164,8.84096049 C2.03531005,8.84096049 1.97651801,8.81549628 1.93311099,8.77402594 L1.68370002,8.67306569 L0.701593132,8.27551396 C0.587217854,8.25628853 0.500068976,8.15667879 0.500068976,8.03668718 L0.500068976,8.02395302 C0.499977217,8.01997372 0.499976799,8.01598483 0.500068976,8.01198924 L0.500068976,0.83309739 C0.499984517,0.829434725 0.499977444,0.825763881 0.500048734,0.822087163 C0.499977444,0.818410445 0.499984517,0.814739601 0.500068976,0.811076936 L0.500068976,0.808477267 C0.500068976,0.734695385 0.533019284,0.66861973 0.584988773,0.624200019 C0.607223642,0.603893466 0.633376716,0.587129584 0.662911804,0.575173935 L2.00126808,0.0334143141 C2.06884262,-0.00448997495 2.15253254,-0.011953956 2.22949057,0.0203769852 L3.48533098,0.547969766 C3.4886593,0.547833737 3.49200497,0.54776506 3.49536665,0.54776506 C3.62894021,0.54776506 3.73722298,0.656192325 3.73722298,0.789944134 L3.73722298,0.821385651 C3.73731302,0.82532856 3.73731342,0.829280598 3.73722298,0.833238872 L3.73722298,2.40767185 L5.26277832,1.79239207 L5.26277832,0.83309739 C5.26269386,0.829434725 5.26268678,0.825763881 5.26275807,0.822087163 C5.26268678,0.818410445 5.26269386,0.814739601 5.26277832,0.811076936 L5.26277832,0.789944134 C5.26277832,0.660231597 5.36461961,0.55433711 5.49260447,0.548059437 L6.76397742,0.0334143141 C6.83155196,-0.00448997495 6.91524188,-0.011953956 6.99219991,0.0203769852 L8.30051205,0.570013732 C8.41385044,0.590099999 8.49993232,0.689222468 8.49993232,0.808477267 L8.49993232,0.821385589 C8.50002236,0.825328562 8.50002276,0.829280602 8.49993232,0.833238878 L8.49993232,8.03668718 C8.49993232,8.12601922 8.45162927,8.20405443 8.37974945,8.24603352 C8.3570412,8.26726508 8.33012837,8.28475773 8.2996029,8.29711428 L6.99757749,8.82416735 C6.91291064,8.85844005 6.82080599,8.84496071 6.75103698,8.79637735 L6.41724228,8.661259 L5.42562114,8.25985596 C5.34756383,8.22825877 5.29312904,8.1630773 5.27221467,8.08767347 C5.26662904,8.06827265 5.26340051,8.04787145 5.26285962,8.02680084 C5.26269203,8.02187767 5.26266414,8.01693859 5.26277832,8.01198924 L5.26277832,7.52049562 L5.25953529,7.51903428 L5.26277832,7.51181809 L5.26277832,7.52048475 L3.70001431,6.86512047 L3.70001431,8.03470119 C3.70001431,8.04191065 3.69969971,8.04904653 3.6990835,8.05609582 C3.69873979,8.1589341 3.63726868,8.25619133 3.53617314,8.29711428 L2.23486815,8.82387573 C2.19216118,8.84116329 2.14756179,8.84630123 2.10489107,8.84091277 Z M7.10460732,8.21821598 L8.01621965,7.84920008 L8.01621965,1.21243815 L7.10460732,1.58145405 L7.10460732,2.39098426 C7.10460732,2.46741667 7.06924708,2.53557924 7.0140137,2.5799642 C6.98940081,2.61105066 6.95679973,2.63650623 6.91764171,2.65284921 L4.12647169,3.81777145 L5.37396115,4.34092148 L6.74176427,3.73540324 C6.86393122,3.68132067 7.00675126,3.73664611 7.06076176,3.85897608 C7.06205348,3.86190175 7.06328271,3.86483924 7.06445002,3.86778706 C7.08982637,3.90609857 7.10460732,3.95205809 7.10460732,4.00147448 L7.10460732,8.21821598 Z M6.62089465,1.57454768 C6.6135086,1.56515108 6.60671153,1.55516354 6.6005806,1.54461783 L6.44640936,1.48221012 L5.74649098,1.19888682 L5.74649098,1.76114471 L6.62089465,2.11509874 L6.62089465,1.57454768 Z M2.34189798,4.03783399 L3.25351031,3.65736362 L3.25351031,1.21243815 L2.34189798,1.58145405 L2.34189798,4.03783399 Z M3.73722298,2.92984272 L3.73722298,3.45548138 L6.10302085,2.46809239 L5.50003848,2.22400828 C5.49794123,2.22315933 5.49586104,2.22228613 5.49379809,2.22138914 L3.73722298,2.92984272 Z M6.20555471,0.822087163 L6.64164504,0.998614246 L6.89809383,1.10242338 L7.57200867,0.829626174 L6.89232837,0.544084781 L6.20555471,0.822087163 Z M1.44284537,0.822087163 L1.8789357,0.998614246 L2.13538449,1.10242338 L2.80929933,0.829626174 L2.12961903,0.544084781 L1.44284537,0.822087163 Z" id="Combined-Shape"></path>            </g>        </g>    </g></svg>', c = '<svg style="transform:translate(-1px, 3px);margin-right:1px;" width="14px" height="14px" viewBox="0 0 11 10" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">  <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">      <g id="menu" transform="translate(-8.000000, -32.000000)">          <g id="0884-focus" transform="translate(8.500000, 32.000000)">              <rect id="Rectangle-3" fill="#899497" x="4.72222222" y="0" width="1" height="1.66666667" rx="0.5"></rect>              <rect id="Rectangle-3-Copy" fill="#899497" x="4.72222222" y="8.33333333" width="1" height="1.66666667" rx="0.5"></rect>              <g id="Group" transform="translate(5.000000, 5.555556) rotate(90.000000) translate(-5.000000, -5.555556) translate(3.888889, 0.555556)" fill="#899497">                  <rect id="Rectangle-3-Copy-3" x="0.277777778" y="0" width="1" height="1.66666667" rx="0.5"></rect>                  <rect id="Rectangle-3-Copy-2" x="0.277777778" y="8.33333333" width="1" height="1.66666667" rx="0.5"></rect>              </g>              <circle id="Oval" stroke="#899497" stroke-width="0.66" cx="5" cy="5" r="3.33333333"></circle>              <circle id="Oval-2" fill="#899497" cx="5" cy="5" r="1.11111111"></circle>          </g>      </g>  </g></svg>', f = '<svg style="margin-right:5px;transform:translate(1px,3px);" width="11px" height="13px" viewBox="0 0 11 14" xmlns="http://www.w3.org/2000/svg">    <g fill="#899497" fill-rule="evenodd">        <path d="M1.764 2.506c.544 0 .964-.394.964-.853 0-.46-.42-.853-.964-.853S.8 1.194.8 1.653c0 .459.42.853.964.853zm0 .8C.79 3.306 0 2.566 0 1.653S.79 0 1.764 0s1.764.74 1.764 1.653-.79 1.653-1.764 1.653zm7.472-.8c.544 0 .964-.394.964-.853 0-.46-.42-.853-.964-.853s-.964.394-.964.853c0 .459.42.853.964.853zm0 .8c-.974 0-1.764-.74-1.764-1.653S8.262 0 9.236 0 11 .74 11 1.653s-.79 1.653-1.764 1.653zM1.764 13.2c.544 0 .964-.394.964-.853 0-.459-.42-.853-.964-.853s-.964.394-.964.853c0 .46.42.853.964.853zm0 .8C.79 14 0 13.26 0 12.347s.79-1.653 1.764-1.653 1.764.74 1.764 1.653S2.738 14 1.764 14z"/>        <path d="M9.636 3.028h-.8v-.421h.8v1.497c0 2.241-1.525 2.711-5.326 2.711-1.307 0-2.01.707-2.193 2.252l-.795-.094c.229-1.928 1.253-2.958 2.988-2.958 3.34 0 4.526-.365 4.526-1.911V2.61c0-.003 0-.003.8-.004v.422z"/>        <path d="M1.33 3h.8v8h-.8z"/>    </g></svg>', p = "HAIKU_SHARE_UUID"; t.default = a }); e(yt); var mt = t(function (e, t) { function n(e, t) { return e.ownerDocument.createElementNS(r, t) } Object.defineProperty(t, "__esModule", { value: !0 }); var r = "http://www.w3.org/2000/svg"; t.default = n }); e(mt); var gt = t(function (e, t) { function n(e, t) { return e.ownerDocument.createTextNode(t) } Object.defineProperty(t, "__esModule", { value: !0 }), t.default = n }); e(gt); var vt = t(function (e, t) { function n(e) { if (e.getBoundingClientRect instanceof Function) { var t = e.getBoundingClientRect(); return { x: t.width, y: t.height } } return void 0 !== e.offsetWidth ? { x: e.offsetWidth, y: e.offsetHeight } : { x: 1, y: 1 } } Object.defineProperty(t, "__esModule", { value: !0 }), t.default = n }); e(vt); var bt = t(function (e, t) { Object.defineProperty(t, "__esModule", { value: !0 }); var n = function (e, t) { var n = -1, r = -1; return e.hasOwnProperty("pageX") ? (n = e.pageX, r = e.pageY) : (e.clientX || e.clientY) && (n = e.clientX + t.body.scrollLeft + t.documentElement.scrollLeft, r = e.clientY + t.body.scrollTop + t.documentElement.scrollTop), { x: ~~n, y: ~~r } }; t.default = function (e, t) { var r = t.ownerDocument, o = n(e, r), i = t.getBoundingClientRect(), a = o.x - i.left, s = o.y - i.top; return t.offsetWidth !== i.width && (a *= t.offsetWidth / i.width), t.offsetHeight !== i.height && (s *= t.offsetHeight / i.height), { x: a, y: s, pageX: o.x, pageY: o.y } } }); e(bt); var _t = t(function (e, t) { function n(e) { var t = e.elementName; return t && t.default ? t.default : t } function r(e) { return typeof e === s && e.length > 0 ? e : typeof e === u ? o(e) : e && typeof e === l ? "div" : (a("Got blank/malformed virtual element object; falling back to <div>"), "div") } function o(e) { return e.name ? e.name : e.displayName ? e.displayName : e.constructor && "Function" !== e.constructor.name ? e.constructor.name : void 0 } function i(e) { var t = n(e); if (!(t = r(t))) throw new Error("Node has no discernable name"); return t } function a(e) { c[e] || (c[e] = !0, console.warn("[haiku core] warning:", e)) } Object.defineProperty(t, "__esModule", { value: !0 }); var s = "string", u = "function", l = "object"; t.default = i; var c = {} }); e(_t); var xt = t(function (e, t) { function n(e) { return "" === e } Object.defineProperty(t, "__esModule", { value: !0 }), t.default = n }); e(xt); var Ot = t(function (e, t) { function n(e) { return e[0] === e[0].toUpperCase() ? e + "-component" : e } Object.defineProperty(t, "__esModule", { value: !0 }), t.default = n }); e(Ot); var kt = t(function (e, t) { function n(e, t, n) { return n.subcacheClear(t), e.parentNode.removeChild(e), e } Object.defineProperty(t, "__esModule", { value: !0 }), t.default = n }); e(kt); var wt = t(function (e, t) { function n(e, t, n) { if (e && e.textContent !== t) { var r = e.parentNode, o = gt.default(e, t); r.replaceChild(o, e) } return e } Object.defineProperty(t, "__esModule", { value: !0 }), t.default = n }); e(wt); var zt = t(function (e, t) { var r = n && n.__extends || function () { var e = function (t, n) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]) })(t, n) }; return function (t, n) { function r() { this.constructor = t } e(t, n), t.prototype = null === n ? Object.create(n) : (r.prototype = n.prototype, new r) } }(), o = n && n.__assign || function () { return (o = Object.assign || function (e) { for (var t, n = 1, r = arguments.length; n < r; n++) { t = arguments[n]; for (var o in t) Object.prototype.hasOwnProperty.call(t, o) && (e[o] = t[o]) } return e }).apply(this, arguments) }; Object.defineProperty(t, "__esModule", { value: !0 }); var i = function (e) { return void 0 === e || null === e }, a = function (e, t) { e && "object" == typeof e && (e.__memory || (e.__memory = {}), e.__memory.targets || (e.__memory.targets = []), -1 === e.__memory.targets.indexOf(t) && e.__memory.targets.push(t)) }, s = function (e) { function t(t, n) { var r = e.call(this) || this; return r.shouldListenerReceiveEvent = function (e, t, n, o, i) { return "hover" === e || "unhover" === e ? n.target === o : ("keyup" === e || "keydown" === e || "keypress" === e) && i === r.getWindow() || ("mouseenter" === e || "mouseleave" === e ? !(o !== n.target || o.contains && o.contains(n.relatedTarget)) : o === n.target || o.contains && o.contains(n.target)) }, r.mount = t, r.user = { mouse: { x: 0, y: 0, down: 0, buttons: [0, 0, 0] }, keys: {}, touches: [], mouches: [] }, r.config = n, r.shouldCreateContainer = !0, r.clear(), r } return r(t, e), t.prototype.clear = function () { if (this.mount) for (; this.mount.firstChild;)this.mount.removeChild(this.mount.firstChild) }, t.prototype.getMountForComponent = function (e) { return e.host ? e.target && e.target.parentNode : this.mount }, t.prototype.render = function (e, n, r) { return t.renderTree(this.getMountForComponent(r), e, [n], r, !1, !1) }, t.prototype.patch = function (e, n) { if (n && !(Object.keys(n).length < 1)) for (var r in n) { var o = n[r], i = o.__memory && o.__memory.parent, a = o.__memory && o.__memory.targets; if (a) for (var s = 0; s < a.length; s++) { var u = a[s]; u.parentNode && t.updateElement(u, o, u.parentNode, i, e, !0) } } }, t.prototype.menuize = function (e) { return yt.default(this.mount, e) }, t.prototype.mixpanel = function (e, t) { return c(e, t) }, t.prototype.hasSizing = function () { return this.config && this.config.sizing && "normal" !== this.config.sizing }, t.prototype.getZoom = function () { return this.config && this.config.zoom || 1 }, t.prototype.getPan = function () { return { x: this.config && this.config.pan && this.config.pan.x || 0, y: this.config && this.config.pan && this.config.pan.y || 0 } }, t.prototype.createContainer = function (e) { void 0 === e && (e = {}); var t; return this.mount ? t = vt.default(this.mount) : (console.warn("[haiku dom renderer] mount empty; using fallback size"), t = { x: 1, y: 1 }), e.layout = { computed: { size: t } }, this.hasSizing() && this.config.alwaysComputeSizing || (this.shouldCreateContainer = !1), e }, t.prototype.getDocument = function () { return this.mount.ownerDocument }, t.prototype.getWindow = function () { var e = this.getDocument(); return e.defaultView || e.parentWindow }, t.prototype.initialize = function () { var e = this, t = this.user, n = function (n) { var r = e.mount.childNodes[0]; if (r) { var o = bt.default(n, r); t.mouse.x = o.x, t.mouse.y = o.y } }, r = function (n) { t.touches.splice(0); var r = e.mount.childNodes[0]; if (r) for (var o = 0; o < n.touches.length; o++) { var i = n.touches[o], a = bt.default(i, r); t.touches.push(a) } }, o = function () { t.mouches.splice(0), t.mouse.down && t.mouches.push(t.mouse), t.mouches.push.apply(t.mouches, t.touches) }, i = function () { for (var e in t.keys) t.keys[e] = 0 }, a = function () { t.mouse.down = 0, t.touches.splice(0); for (var e = 0; e < t.mouse.buttons.length; e++)t.mouse.buttons[e] = 0 }, s = function () { t.mouches.splice(0) }, u = function () { t.touches.splice(0) }, l = this.getDocument(), c = this.getWindow(); this.mount.addEventListener("mousedown", function (e) { ++t.mouse.down, ++t.mouse.buttons[e.button], n(e), o() }), this.mount.addEventListener("mouseup", function (e) { a(), s(), o() }); var f; c.addEventListener("mousemove", function (t) { if (n(t), o(), f !== t.target) { f = t.target; var r = void 0; (r = e.mount.contains(t.target) ? e.getHaikuElementFromTarget(t.target) : e.getHaikuElementFromTarget(e.mount)) && r.triggerHover(t) } }), c.addEventListener("mouseenter", function (e) { a(), s() }), c.addEventListener("mouseleave", function (e) { a(), s() }), this.mount.addEventListener("wheel", function (e) { n(e), o() }, { passive: !0 }), l.addEventListener("keydown", function (e) { void 0 === t.keys[e.which] && (t.keys[e.which] = 0), ++t.keys[e.which] }), l.addEventListener("keyup", function (e) { void 0 === t.keys[e.which] && (t.keys[e.which] = 0), 91 !== e.which && 17 !== e.which || i(), t.keys[e.which] = 0 }), this.hasSizing() && !this.config.alwaysComputeSizing && (c.addEventListener("resize", function () { e.shouldCreateContainer = !0 }), c.addEventListener("orientationchange", function () { e.shouldCreateContainer = !0 })), c.addEventListener("blur", function (e) { i(), a(), u(), s() }), c.addEventListener("focus", function (e) { i(), a(), u(), s() }), c.addEventListener("touchstart", function (e) { r(e), o() }, { passive: !0 }), c.addEventListener("touchend", function (e) { u(), s() }), c.addEventListener("touchmove", function (e) { r(e), o() }, { passive: !0 }), c.addEventListener("touchenter", function (e) { u(), s() }), c.addEventListener("touchleave", function (e) { u(), s() }) }, t.prototype.decideMountElement = function (e, t, n) { return "keyup" !== n && "keydown" !== n && "keypress" !== n || e.host || "haiku:" + e.getComponentId() !== t ? this.mount : this.getWindow() }, t.prototype.mountEventListener = function (e, t, n, r) { var o = this, i = n; "mouseenter" === n ? i = "mouseover" : "mouseleave" === n && (i = "mouseout"); var a = t; "haiku:" === t.slice(0, 6) && (a = '[haiku-id="' + t.slice(6) + '"]'); var s = this.decideMountElement(e, t, n); s.addEventListener(i, function (u) { if (!t || t === O.GLOBAL_LISTENER_KEY || !u || !u.target) return void r(null, o.wrapEvent(n, u, null, e)); if (e.target && e.target.parentNode) { var l = e.target.parentNode.querySelector(a); return l && o.shouldListenerReceiveEvent(n, i, u, l, s) ? void r(o.getHaikuElementFromTarget(l), u.target, o.wrapEvent(n, u, l, e)) : void 0 } }) }, t.prototype.getHaikuElementFromTarget = function (e) { return e && e.haiku && e.haiku.element && e.haiku.element.__memory && e.haiku.element.__memory.element }, t.prototype.wrapEvent = function (e, t, n, r) { return t }, t.prototype.getUser = function () { var e = this.getZoom(); return { zoom: e, pan: this.getPan(), mouse: { x: this.user.mouse.x / e, y: this.user.mouse.y / e, z: 0, down: this.user.mouse.down, buttons: this.user.mouse.buttons.slice() }, keys: o({}, this.user.keys), touches: this.user.touches.slice(), mouches: this.user.mouches.slice() } }, t.createTagNode = function (e, n, r, o) { var i, a = Ot.default(_t.default(n)), s = rt.getNodeCompositeId(n); (i = u[a] ? mt.default(e, a) : e.ownerDocument.createElement(a)).haiku || (i.haiku = { component: o, explicitStyles: {} }), o.subcacheEnsure(s); var l = n.key || n.attributes && n.attributes.key; return void 0 !== l && null !== l && (i.haiku.key = l), t.updateElement(i, n, e, r, o, null), i }, t.appendChild = function (e, n, r, o, i) { var a = ct.default(n) ? gt.default(r, n) : t.createTagNode(r, n, o, i); return ft.default(a, n, i), r.appendChild(a), a }, t.replaceElement = function (e, n, r, o, i) { var a = rt.getNodeCompositeId(n); i.subcacheClear(a); var s = ct.default(n) ? gt.default(e, n) : t.createTagNode(e, n, o, i); return ft.default(s, n, i), r.replaceChild(s, e), s }, t.updateElement = function (e, n, r, o, i, a) { var s = rt.getNodeCompositeId(n); if (ct.default(n)) return wt.default(e, n, i), n; e.haiku || (e.haiku = { component: i, explicitStyles: {} }), i.subcacheEnsure(s), e.haiku.element || (e.haiku.element = t.cloneVirtualElement(n)); var u = e.tagName.toLowerCase().trim(), l = Ot.default(_t.default(n)).toLowerCase().trim(), c = n.key || n.attributes && n.attributes.key, f = e.haiku && e.haiku.key, p = null !== c && void 0 !== c && c !== f; if (!i.isHorizonElement(n)) { if (u !== l) return t.replaceElement(e, n, r, o, i); if (p) return t.replaceElement(e, n, r, o, i) } n.attributes && "object" == typeof n.attributes && dt.default(e, n, i, a), ft.default(e, n, i), void 0 !== c && null !== c && (e.haiku.key = c); var h = n && n.__memory && n.__memory.instance || i, d = n.__memory && n.__memory.children || n.children; if (Array.isArray(d)) { var y = a && d[0] instanceof Object; t.renderTree(e, n, d, h, a, y) } else d || t.renderTree(e, n, [], h, a, null); return e }, t.renderTree = function (e, n, r, o, s, u) { a(n, e); var l = rt.getNodeCompositeId(n); if (e.haiku || (e.haiku = { component: o, explicitStyles: {} }), e.haiku.virtual = n, e.haiku.element = t.cloneVirtualElement(n), o.subcacheEnsure(l), !Array.isArray(r)) return e; if (o.isHorizonElement(n)) return e; if (u) return e; for (; r.length > 0 && xt.default(r[0]);)r.shift(); for (var c = [], f = 0; f < e.childNodes.length; f++)c[f] = e.childNodes[f]; var p = r.length; p < c.length && (p = c.length); for (var h = 0; h < p; h++) { var d = r[h], y = c[h]; if (i(d) && !y); else if (i(d) && y) kt.default(y, l, o); else if (y) if (t.shouldElementBeReplaced(y, d, o)) { var m = t.replaceElement(y, d, e, n, o); a(d, m) } else t.updateElement(y, d, e, n, o, s), a(d, y); else { var g = t.appendChild(null, d, e, n, o); a(d, g) } } return e }, t.shouldElementBeReplaced = function (e, t, n) { if (e.haiku) { if (rt.getNodeCompositeId(t) !== rt.getNodeCompositeId(e.haiku.element)) return !0; if (e.haiku.component && e.haiku.component !== n) return !0 } return !1 }, t.cloneAttributes = function (e) { if (!e) return {}; var t = {}; for (var n in e) t[n] = e[n]; return t }, t.cloneVirtualElement = function (e) { return { elementName: e.elementName, attributes: t.cloneAttributes(e.attributes), children: e.__memory && e.__memory.children || e.children, __memory: e.__memory } }, t.__name__ = "HaikuDOMRenderer", t }(O.default); t.default = s; var u = { a: !0, altGlyph: !0, altGlyphDef: !0, altGlyphItem: !0, animate: !0, animateColor: !0, animateMotion: !0, animateTransform: !0, circle: !0, clipPath: !0, "color-profile": !0, cursor: !0, defs: !0, desc: !0, discard: !0, ellipse: !0, feBlend: !0, feColorMatrix: !0, feComponentTransfer: !0, feComposite: !0, feConvolveMatrix: !0, feDiffuseLighting: !0, feDisplacementMap: !0, feDistantLight: !0, feFlood: !0, feFuncA: !0, feFuncB: !0, feFuncG: !0, feFuncR: !0, feGaussianBlur: !0, feImage: !0, feMerge: !0, feMergeNode: !0, feMorphology: !0, feOffset: !0, fePointLight: !0, feSpecularLighting: !0, feSpotLight: !0, feTile: !0, feTurbulence: !0, filter: !0, font: !0, "font-face": !0, "font-face-format": !0, "font-face-name": !0, "font-face-src": !0, "font-face-uri": !0, foreignObject: !0, g: !0, glyph: !0, glyphRef: !0, hkern: !0, image: !0, line: !0, linearGradient: !0, marker: !0, mask: !0, metadata: !0, "missing-glyph": !0, mpath: !0, path: !0, pattern: !0, polygon: !0, polyline: !0, radialGradient: !0, rect: !0, script: !0, set: !0, stop: !0, style: !0, svg: !0, switch: !0, symbol: !0, text: !0, textPath: !0, title: !0, tref: !0, tspan: !0, use: !0, view: !0, vkern: !0 }, l = new Function('\n  (function(e,a){if(!a.__SV){var b=window;try{var c,l,i,j=b.location,g=j.hash;c=function(a,b){return(l=a.match(RegExp(b+"=([^&]*)")))?l[1]:null};g&&c(g,"state")&&(i=JSON.parse(decodeURIComponent(c(g,"state"))),"mpeditor"===i.action&&(b.sessionStorage.setItem("_mpcehash",g),history.replaceState(i.desiredHash||"",e.title,j.pathname+j.search)))}catch(m){}var k,h;window[\'mixpanel\']=a;a._i=[];a.init=function(b,c,f){function e(b,a){var c=a.split(".");2==c.length&&(b=b[c[0]],a=c[1]);b[a]=function(){b.push([a].concat(Array.prototype.slice.call(arguments,\n  0)))}}var d=a;"undefined"!==typeof f?d=a[f]=[]:f="mixpanel";d.people=d.people||[];d.toString=function(b){var a="mixpanel";"mixpanel"!==f&&(a+="."+f);b||(a+=" (stub)");return a};d.people.toString=function(){return d.toString(1)+".people (stub)"};k="disable time_event track track_pageview track_links track_forms register register_once alias unregister identify name_tag set_config reset people.set people.set_once people.unset people.increment people.append people.union people.track_charge people.clear_charges people.delete_user".split(" ");\n  for(h=0;h<k.length;h++)e(d,k[h]);a._i.push([b,c,f])};a.__SV=1.2;}})(document,window.mixpanel||[]);\n'), c = function (e, t) { if ("undefined" != typeof window) { if (!window.mixpanel) { l(); var n = document.getElementsByTagName("head")[0], r = document.createElement("script"); r.async = !0, r.type = "text/javascript", r.src = "https://cdn.mxpnl.com/libs/mixpanel-2-latest.min.js", n.appendChild(r), window.mixpanel.init(e, { ip: !1 }) } var o = t.bytecode && t.bytecode.metadata || {}; window.mixpanel.track("component:initialize", k.default({ platform: "dom" }, o)) } } }); e(zt); var Pt = t(function (e, t) { Object.defineProperty(t, "__esModule", { value: !0 }), t.default = zt.default }); e(Pt); var Tt = t(function (e, t) { Object.defineProperty(t, "__esModule", { value: !0 }); var n = _.version, r = function (e, t, n) { return t || (t = {}), n || "undefined" != typeof window && (n = window), ot.default.createComponentFactory(Pt.default, e, t, n) }; (r.defineOnWindow = function () { if ("undefined" != typeof window) { if (!window.HaikuResolve) { var e = {}; window.HaikuResolve = function (t) { if (e[t]) return e[t]; var n = t.match(/^(\d+)\.(\d+)\.(\d+)$/).map(Number); if (n) { n[0]; var r = n[1], o = n[2], i = n[3], a = Object.keys(window.HaikuCore).map(function (e) { return e.split(".").map(Number) }).filter(function (e) { return 3 === e.length && e[0] === r && (e[1] >= o && (e[1] > o || e[2] >= i)) }); if (0 !== a.length) return a.sort(function (e, t) { e[0]; var n = e[1], r = e[2], o = (t[0], t[1]), i = t[2]; return n < o ? -1 : n > o ? 1 : r < i ? -1 : 1 }), e[t] = window.HaikuCore[a[a.length - 1].join(".")] } } } window.HaikuCore || (window.HaikuCore = {}), window.HaikuCore[n] = r } })(), t.default = r }); e(Tt); var Et = t(function (e, t) { Object.defineProperty(t, "__esModule", { value: !0 }), t.default = Tt.default }); return e(Et), Et.default }();